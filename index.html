<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, interactive-widget=resizes-visual"
    />
    <meta name="format-detection" content="telephone=no,email=no,address=no" />
    <title>Jan Russel E. Peñafiel - Freelance Student Web Developer</title>

    <!-- Force open in default browser instead of in-app browsers (Messenger, Facebook, Instagram, etc.) -->
    <script>
      (function () {
        var ua = navigator.userAgent || navigator.vendor || window.opera;
        // Detect common in-app browsers
        var isInApp =
          /FBAN|FBAV|FB_IAB|FBIOS|Instagram|Messenger|Line\/|Twitter|Snapchat|MicroMessenger|WeChat|TikTok|BytedanceWebview|Musical_ly/i.test(
            ua,
          );
        if (isInApp) {
          // Try intent:// for Android (opens in Chrome/default browser)
          var url = window.location.href;
          if (/android/i.test(ua)) {
            var intentUrl =
              "intent://" +
              url.replace(/^https?:\/\//, "") +
              "#Intent;scheme=https;action=android.intent.action.VIEW;end;";
            window.location.href = intentUrl;
          } else {
            // For iOS: try opening in Safari via a workaround
            // window.open won't work in most in-app browsers, but we can try
            window.location.href =
              "x-safari-https://" + url.replace(/^https?:\/\//, "");
            // Fallback: show a prompt to the user
            setTimeout(function () {
              if (!document.hidden) {
                var overlay = document.createElement("div");
                overlay.style.cssText =
                  "position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(10,10,15,0.97);z-index:99999;display:flex;align-items:center;justify-content:center;flex-direction:column;padding:20px;text-align:center;font-family:Poppins,sans-serif;";
                overlay.innerHTML =
                  '<div style="color:#00fff7;font-size:1.3rem;font-weight:700;margin-bottom:16px;">Open in Browser</div>' +
                  '<div style="color:#e0e0e0;font-size:0.95rem;margin-bottom:20px;">For the best experience, please open this page in your default browser.</div>' +
                  '<div style="color:#aaa;font-size:0.85rem;">Tap the <b style="color:#00fff7;">⋯</b> or <b style="color:#00fff7;">Share</b> button, then choose <b style="color:#00fff7;">"Open in Browser"</b> or <b style="color:#00fff7;">"Open in Safari/Chrome"</b>.</div>';
                document.body.appendChild(overlay);
              }
            }, 1500);
          }
        }
      })();
    </script>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="RUSSEL.png" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Highlight.js for Code Syntax Highlighting -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <style>
      body {
        font-family: "Poppins", sans-serif;
        line-height: 1.6;
        background: #000000;
        color: #e0e0e0;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      .display-1,
      .display-2,
      .display-3,
      .display-4,
      .display-5,
      .display-6 {
        font-family: "Orbitron", sans-serif;
        font-weight: 700;
        letter-spacing: 2px;
        text-transform: uppercase;
      }

      .navbar-brand,
      .nav-link {
        font-family: "Orbitron", sans-serif;
        letter-spacing: 1.5px;
      }

      .hero-section {
        background: #000000;
        color: #00fff7;
        padding: 80px 0;
        box-shadow: 0 0 24px #00fff730 inset;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      section {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 80px 0 !important;
      }

      section .container {
        width: 100%;
      }

      .typing-animation {
        font-size: 1.5rem;
        font-weight: 600;
        margin: 20px 0;
        color: #00fff7;
        display: inline-block;
        min-width: 250px;
        min-height: 2.5em;
        text-align: center;
        overflow: hidden;
      }

      #typing-text {
        display: inline-block;
        width: 100%;
      }

      .badge-custom {
        background: linear-gradient(135deg, #0a0a0f 0%, #181825 100%);
        color: #00fff7;
        padding: 10px 18px;
        border-radius: 10px;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        margin: 5px;
        font-weight: 700;
        font-family: "Orbitron", sans-serif;
        letter-spacing: 0.8px;
        text-transform: uppercase;
        border: 1.5px solid #00fff7;
        box-shadow:
          0 0 8px #00fff780,
          0 0 18px #00fff740,
          inset 0 0 10px #00fff720;
        transition: all 0.28s ease;
        position: relative;
        overflow: hidden;
      }

      .badge-custom::before {
        content: "";
        position: absolute;
        top: 0;
        left: -120%;
        width: 80%;
        height: 100%;
        background: linear-gradient(90deg, transparent, #00fff740, transparent);
        transform: skewX(-25deg);
        transition: left 0.45s ease;
      }

      .badge-custom:hover {
        background: linear-gradient(135deg, #181825 0%, #0a0a0f 100%);
        color: #ffffff;
        text-decoration: none;
        transform: translateY(-3px) scale(1.03);
        border-color: #00fff7;
        box-shadow:
          0 0 14px #00fff7,
          0 0 28px #00fff780,
          inset 0 0 14px #00fff740;
      }

      .badge-custom:hover::before {
        left: 135%;
      }

      .hero-actions {
        margin-top: 1.25rem;
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        max-width: 920px;
        margin-left: auto;
        margin-right: auto;
      }

      .hero-actions .badge-custom {
        font-size: 0.78rem;
        padding: 8px 12px;
        letter-spacing: 0.4px;
        text-transform: none;
        line-height: 1.25;
        text-align: center;
        justify-content: center;
        white-space: normal;
        flex: 1 1 260px;
        max-width: 360px;
        margin: 0;
      }

      .section-card {
        background: #181825;
        border-radius: 15px;
        box-shadow: 0 0 24px #00fff7a0;
        padding: 30px;
        margin: 20px 0;
        transition: transform 0.3s ease;
        border: 1.5px solid #00fff7;
      }

      .section-card:hover {
        transform: translateY(-5px) scale(1.01);
        box-shadow: 0 0 32px #00fff7;
      }

      .tech-badge {
        margin: 5px;
        font-size: 0.9rem;
        background: none !important;
        color: inherit !important;
        font-weight: 600;
        box-shadow: none;
      }

      .project-card {
        border: none;
        border-radius: 15px;
        box-shadow: 0 0 24px #00fff7a0;
        transition: transform 0.3s ease;
        margin-bottom: 20px;
        background: #181825;
        border: 1.5px solid #00fff7;
        min-height: 200px;
      }

      .project-card:hover {
        transform: translateY(-5px) scale(1.01);
        box-shadow: 0 0 32px #00fff7;
      }

      .project-card .card-body {
        padding: 25px;
        color: #e0e0e0;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 100%;
      }

      .project-meta-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        gap: 10px;
      }

      .project-meta-row .badge {
        white-space: nowrap;
      }

      .project-image-link {
        display: inline-block;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        border-radius: 15px;
      }

      .project-image-link::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 255, 247, 0);
        transition: all 0.3s ease;
        pointer-events: none;
        z-index: 1;
      }

      .project-image-link:hover::before {
        background: rgba(0, 255, 247, 0.2);
      }

      .project-image-link:hover {
        transform: scale(1.03);
        box-shadow: 0 0 25px rgba(0, 255, 247, 0.6);
      }

      .project-image-link img {
        display: block;
        transition: all 0.3s ease;
      }

      .project-image-link:hover img {
        filter: brightness(1.1);
      }

      .highlight-box {
        background: #16181e;
        color: #00fff7;
        padding: 20px;
        border-radius: 15px;
        margin: 20px 0;
        border: 1.5px solid #00fff7;
        box-shadow: 0 0 8px #00fff730;
      }

      .journey-timeline {
        position: relative;
        padding-left: 30px;
        color: #fff;
      }

      .journey-timeline::before {
        content: "";
        position: absolute;
        left: 15px;
        top: 0;
        bottom: 0;
        width: 2px;
        background: #00fff7;
      }

      .timeline-item {
        position: relative;
        margin-bottom: 30px;
        color: #fff;
      }

      .timeline-item::before {
        content: "";
        position: absolute;
        left: -22px;
        top: 5px;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #00fff7;
        box-shadow:
          0 0 8px #00fff7,
          0 0 16px #00fff7;
      }

      .quote-box {
        background: #181825;
        border-left: 4px solid #00fff7;
        padding: 20px;
        margin: 20px 0;
        font-style: italic;
        color: #00fff7;
        box-shadow: 0 0 8px #00fff7a0;
      }

      .social-links {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px;
      }

      .social-links a {
        background: #00fff7 !important;
        color: #0a0e27 !important;
        border: none !important;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 0 15px rgba(0, 255, 247, 0.5);
      }

      .social-links a:hover {
        transform: scale(1.05);
        box-shadow: 0 0 25px rgba(0, 255, 247, 0.8);
        background: #00d4cc !important;
      }

      /* Contact Section - Full Screen */
      #contact {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #000000 !important;
        padding: 80px 0 !important;
      }

      #contact .container {
        width: 100%;
      }

      #contact h2 {
        color: #00fff7;
        text-shadow: 0 0 20px rgba(0, 255, 247, 0.5);
        margin-bottom: 3rem;
      }

      #contact .social-links {
        gap: 25px;
      }

      #contact .social-links a {
        padding: 18px 40px;
        font-size: 1.2rem;
      }

      .navbar-brand {
        font-weight: 700;
        font-size: 1.5rem;
        color: #00fff7 !important;
        text-shadow: 0 0 8px #00fff7;
      }

      /* Hide navbar profile picture on desktop */
      .navbar-brand img {
        display: none;
      }

      /* Navbar text responsive display */
      .navbar-text-desktop {
        display: none;
      }

      .navbar-text-desktop,
      .navbar-text-mobile {
        font-family: "Orbitron", sans-serif;
        font-weight: 700;
        letter-spacing: 2px;
        text-transform: uppercase;
        color: #00fff7;
        text-shadow: 0 0 4px #00fff7;
        display: none;
        font-size: 0.85rem;
      }

      @media (max-width: 768px) {
        /* Show navbar profile picture on mobile */
        .navbar-brand img {
          display: inline-block !important;
        }

        /* Swap navbar text on mobile */
        .navbar-text-desktop {
          display: none;
        }

        .navbar-text-mobile {
          display: inline !important;
          font-size: 0.70rem !important;
        }
      }

      .nav-link {
        font-family: "Orbitron", sans-serif;
        font-weight: 700;
        letter-spacing: 2px;
        text-transform: uppercase;
        font-size: 0.70rem;
        transition: color 0.3s ease;
        color: #00fff7 !important;
        text-shadow: 0 0 4px #00fff7;
      }

      .nav-link:hover {
        color: #fff !important;
        text-shadow: 0 0 8px #00fff7;
      }

      .btn-primary {
        background: #00fff7;
        color: #0a0a0f;
        border: none;
        font-weight: 700;
        box-shadow: 0 0 8px #00fff7;
      }
      .btn-primary:hover,
      .btn-primary:focus {
        background: #00bcd4;
        color: #fff;
        box-shadow: 0 0 16px #00fff7;
      }
      .btn-danger {
        background: #00bcd4;
        color: #fff;
        border: none;
        font-weight: 700;
        box-shadow: 0 0 8px #00fff7;
      }
      .btn-danger:hover,
      .btn-danger:focus {
        background: #00fff7;
        color: #0a0a0f;
        box-shadow: 0 0 16px #00fff7;
      }
      .btn-success {
        background: #00fff7;
        color: #0a0a0f;
        border: none;
        font-weight: 700;
        box-shadow: 0 0 8px #00fff7;
      }
      .btn-success:hover,
      .btn-success:focus {
        background: #00bcd4;
        color: #fff;
        box-shadow: 0 0 16px #00fff7;
      }
      .bg-light {
        background: #11131a !important;
      }
      .text-primary {
        color: #00fff7 !important;
        text-shadow: 0 0 4px #00fff7;
      }
      .text-success {
        color: #00fff7 !important;
        text-shadow: 0 0 4px #00fff7;
      }
      .text-info {
        color: #00fff7 !important;
        text-shadow: 0 0 4px #00fff7;
      }
      .text-warning {
        color: #00fff7 !important;
        text-shadow: 0 0 4px #00fff7;
      }
      .text-danger {
        color: #00fff7 !important;
        text-shadow: 0 0 4px #00fff7;
      }
      .fw-bold {
        letter-spacing: 1px;
      }
      ::selection {
        background: #00fff7;
        color: #0a0a0f;
      }

      /* Hero Profile Picture Styles - Cybertron Core UI (Desktop) */
      .hero-profile-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 50px;
        width: 100%;
      }

      .hero-content {
        flex: 1;
        text-align: center;
        margin-top: 50px;
      }

      .hero-profile-picture {
        position: relative;
        flex-shrink: 0;
        width: 420px;
        height: 520px;
        overflow: visible;
        isolation: isolate;
        transition:
          transform 0.35s ease,
          filter 0.35s ease;
        filter: drop-shadow(0 0 36px rgba(0, 255, 247, 0.5));
      }

      .hero-profile-picture::before {
        content: "";
        position: absolute;
        inset: -14px;
        border: 1px solid rgba(0, 255, 247, 0.6);
        background: repeating-linear-gradient(
          0deg,
          rgba(0, 255, 247, 0.12) 0px,
          rgba(0, 255, 247, 0.12) 1px,
          transparent 1px,
          transparent 9px
        );
        clip-path: polygon(
          22% 0,
          78% 0,
          100% 11%,
          100% 89%,
          78% 100%,
          22% 100%,
          0 89%,
          0 11%
        );
        box-shadow:
          inset 0 0 36px rgba(0, 255, 247, 0.34),
          0 0 54px rgba(0, 255, 247, 0.5);
        z-index: 0;
        pointer-events: none;
        animation: framePulse 1.6s ease-in-out infinite;
      }

      .hero-profile-picture::after {
        content: "";
        position: absolute;
        inset: -26px;
        border: 2px dashed rgba(0, 255, 247, 0.5);
        clip-path: polygon(
          24% 0,
          76% 0,
          100% 14%,
          100% 86%,
          76% 100%,
          24% 100%,
          0 86%,
          0 14%
        );
        z-index: -1;
        animation: orbitSpin 6s linear infinite;
        pointer-events: none;
      }

      .hero-profile-picture img {
        position: relative;
        z-index: 2;
        width: 100%;
        height: 100%;
        object-fit: cover;
        border: 2px solid rgba(0, 255, 247, 1);
        clip-path: polygon(
          23% 0,
          77% 0,
          100% 13%,
          100% 87%,
          77% 100%,
          23% 100%,
          0 87%,
          0 13%
        );
        box-shadow:
          inset 0 0 46px rgba(0, 255, 247, 0.34),
          0 0 64px rgba(0, 255, 247, 0.58);
      }

      .hero-profile-picture .hero-orbit {
        position: absolute;
        inset: -22px;
        border-radius: 50%;
        border: 1px solid rgba(0, 255, 247, 0.56);
        box-shadow:
          inset 0 0 24px rgba(0, 255, 247, 0.28),
          0 0 26px rgba(0, 255, 247, 0.36);
        pointer-events: none;
      }

      .hero-profile-picture .hero-orbit.orbit-outer {
        inset: -34px;
        border-style: dashed;
        opacity: 0.95;
        animation: orbitSpin 5s linear infinite;
      }

      .hero-profile-picture .hero-orbit.orbit-inner {
        inset: -8px;
        opacity: 1;
        animation: orbitSpinReverse 4.5s linear infinite;
      }

      .hero-profile-picture:hover {
        transform: translateY(-6px) scale(1.018);
        filter: drop-shadow(0 0 54px rgba(0, 255, 247, 0.72));
      }

      /* Animations */
      @keyframes bioScanPulse {
        0%,
        100% {
          opacity: 0.3;
        }
        50% {
          opacity: 0.8;
        }
      }

      @keyframes framePulse {
        0%,
        100% {
          box-shadow:
            inset 0 0 30px rgba(0, 255, 247, 0.24),
            0 0 44px rgba(0, 255, 247, 0.38);
        }
        50% {
          box-shadow:
            inset 0 0 44px rgba(0, 255, 247, 0.48),
            0 0 62px rgba(0, 255, 247, 0.62);
        }
      }

      @keyframes orbitSpin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      @keyframes orbitSpinReverse {
        from {
          transform: rotate(360deg);
        }
        to {
          transform: rotate(0deg);
        }
      }

      @keyframes cornerGlow {
        0% {
          opacity: 0.5;
          box-shadow: 0 0 10px #00fff7;
        }
        100% {
          opacity: 1;
          box-shadow: 0 0 25px #00fff7;
        }
      }

      @keyframes dataFlicker {
        0%,
        100% {
          opacity: 0.3;
          width: 25px;
        }
        50% {
          opacity: 1;
          width: 35px;
        }
      }

      @keyframes statusPulse {
        0%,
        100% {
          opacity: 0.6;
        }
        50% {
          opacity: 1;
        }
      }

      /* General responsive improvements */
      .container {
        padding-left: 15px;
        padding-right: 15px;
      }

      img {
        max-width: 100%;
        height: auto;
      }

      /* Mobile Responsive Styles */
      @media (max-width: 768px) {
        .hero-profile-container {
          flex-direction: column;
          gap: 30px;
        }

        .hero-content {
          order: 1;
          text-align: center;
        }

        .hero-profile-picture {
          display: none;
        }

        /* Mobile circular profile picture - Advanced Cybertron UI */
        .hero-mobile-profile {
          display: block !important;
          width: 150px;
          height: 150px;
          margin: -40px auto 60px;
          border-radius: 50%;
          overflow: visible;
          background: radial-gradient(circle, #1a1c25 0%, #0a0a0f 100%);
          order: 0;
          position: relative;
          z-index: 1;
          filter: drop-shadow(0 0 30px #00fff740);
        }

        /* Inner energy ring */
        .hero-mobile-profile::before {
          content: "";
          position: absolute;
          top: -8px;
          left: -8px;
          right: -8px;
          bottom: -8px;
          border-radius: 50%;
          border: 3px solid #00fff7;
          box-shadow:
            0 0 20px #00fff7,
            0 0 40px #00fff780,
            inset 0 0 20px #00fff730;
          animation: bioScanPulse 2s infinite;
          z-index: -1;
        }

        /* Outer hexagonal tech ring */
        .hero-mobile-profile::after {
          content: "";
          position: absolute;
          top: -20px;
          left: -20px;
          right: -20px;
          bottom: -20px;
          border-radius: 50%;
          border: 2px dashed #00fff760;
          box-shadow:
            0 0 20px #00fff740,
            inset 0 0 15px #00fff720;
          animation:
            rotateGlowReverse 8s linear infinite,
            hexPulse 2s ease-in-out infinite;
          z-index: -2;
        }

        .hero-mobile-profile img {
          width: 100%;
          height: 100%;
          object-fit: cover;
          border-radius: 50%;
          border: 3px solid #00fff7;
          position: relative;
          z-index: 1;
          box-shadow:
            0 0 20px #00fff780,
            inset 0 0 20px rgba(0, 255, 247, 0.1);
        }

        /* Energy rings expanding outward */
        .hero-mobile-profile .corner-tl,
        .hero-mobile-profile .corner-tr,
        .hero-mobile-profile .corner-bl,
        .hero-mobile-profile .corner-br {
          position: absolute;
          width: 25px;
          height: 25px;
          border: 3px solid #00fff7;
          z-index: 3;
          animation:
            cornerGlow 1.5s infinite alternate,
            cornerPulse 3s ease-in-out infinite;
          pointer-events: none;
          filter: drop-shadow(0 0 8px #00fff7);
        }

        @keyframes cornerPulse {
          0%,
          100% {
            transform: scale(1);
            opacity: 1;
          }
          50% {
            transform: scale(1.15);
            opacity: 0.7;
          }
        }

        .hero-mobile-profile .corner-tl {
          top: 5%;
          left: 5%;
          border-right: none;
          border-bottom: none;
          border-radius: 50% 0 0 0;
        }

        .hero-mobile-profile .corner-tr {
          top: 5%;
          right: 5%;
          border-left: none;
          border-bottom: none;
          border-radius: 0 50% 0 0;
        }

        .hero-mobile-profile .corner-bl {
          bottom: 5%;
          left: 5%;
          border-right: none;
          border-top: none;
          border-radius: 0 0 0 50%;
        }

        .hero-mobile-profile .corner-br {
          bottom: 5%;
          right: 5%;
          border-left: none;
          border-top: none;
          border-radius: 0 0 50% 0;
        }

        /* Energy rings expanding outward */
        .hero-mobile-profile .energy-ring {
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          width: 100%;
          height: 100%;
          border: 2px solid #00fff7;
          border-radius: 50%;
          opacity: 0;
          animation: energyExpand 3s infinite;
          pointer-events: none;
          z-index: 0;
        }

        .hero-mobile-profile .energy-ring:nth-child(1) {
          animation-delay: 0s;
        }
        .hero-mobile-profile .energy-ring:nth-child(2) {
          animation-delay: 1s;
        }
        .hero-mobile-profile .energy-ring:nth-child(3) {
          animation-delay: 2s;
        }

        @keyframes energyExpand {
          0% {
            transform: translate(-50%, -50%) scale(0.8);
            opacity: 0;
          }
          10% {
            opacity: 0.8;
          }
          100% {
            transform: translate(-50%, -50%) scale(2.5);
            opacity: 0;
          }
        }

        /* Hexagonal overlay particles */
        .hero-mobile-profile .hex-particle {
          position: absolute;
          width: 8px;
          height: 8px;
          background: #00fff7;
          clip-path: polygon(
            50% 0%,
            100% 25%,
            100% 75%,
            50% 100%,
            0% 75%,
            0% 25%
          );
          opacity: 0;
          animation: hexFloat 4s infinite;
          pointer-events: none;
          z-index: 2;
        }

        .hero-mobile-profile .hex-particle:nth-child(1) {
          left: 20%;
          top: 15%;
          animation-delay: 0s;
        }
        .hero-mobile-profile .hex-particle:nth-child(2) {
          right: 20%;
          top: 25%;
          animation-delay: 0.8s;
        }
        .hero-mobile-profile .hex-particle:nth-child(3) {
          left: 25%;
          bottom: 20%;
          animation-delay: 1.6s;
        }
        .hero-mobile-profile .hex-particle:nth-child(4) {
          right: 25%;
          bottom: 30%;
          animation-delay: 2.4s;
        }

        @keyframes hexFloat {
          0%,
          100% {
            transform: translateY(0) rotate(0deg);
            opacity: 0;
          }
          10% {
            opacity: 0.6;
          }
          50% {
            transform: translateY(-20px) rotate(180deg);
            opacity: 0.8;
          }
          90% {
            opacity: 0.3;
          }
        }

        @keyframes hexPulse {
          0%,
          100% {
            transform: scale(1);
          }
          50% {
            transform: scale(1.08);
          }
        }

        /* Enhanced interaction effects for mobile */
        .hero-mobile-profile:active {
          transform: scale(1.08);
          transition: all 0.3s ease;
          filter: drop-shadow(0 0 50px #00fff7);
        }

        .hero-mobile-profile:active::before {
          animation-duration: 1s;
          opacity: 1;
        }

        .hero-mobile-profile:active::after {
          border-width: 3px;
          box-shadow:
            0 0 40px #00fff7,
            inset 0 0 30px #00fff740;
        }
        body {
          font-size: 14px;
        }

        .hero-section {
          padding: 60px 0 40px;
        }

        .hero-section h1 {
          font-size: 1.75rem !important;
        }

        .typing-animation {
          font-size: 1rem;
          min-width: 200px;
          min-height: 2em;
        }

        .badge-custom {
          padding: 6px 12px;
          font-size: 0.8rem;
          margin: 3px;
          display: inline-block;
          word-break: break-word;
        }

        .hero-actions {
          display: grid;
          grid-template-columns: 1fr;
          gap: 8px;
          max-width: 360px;
          margin-top: 1rem;
        }

        .hero-actions .badge-custom {
          width: 100%;
          max-width: 100%;
          font-size: 0.74rem;
          padding: 8px 10px;
        }

        .section-card {
          padding: 20px;
          margin: 15px 0;
        }

        .project-card {
          min-height: auto;
        }

        .project-card .card-body {
          padding: 15px;
        }

        .project-card img {
          max-height: 80px !important;
        }

        .highlight-box {
          padding: 15px;
          margin: 15px 0;
        }

        .display-4 {
          font-size: 2rem !important;
        }

        .display-6 {
          font-size: 1.5rem !important;
        }

        .lead {
          font-size: 1rem;
        }

        h2 {
          font-size: 1.5rem !important;
        }

        h3 {
          font-size: 1.25rem !important;
        }

        h4 {
          font-size: 1.1rem !important;
        }

        h5 {
          font-size: 1rem !important;
        }

        h6 {
          font-size: 0.9rem !important;
        }

        .navbar-brand {
          font-size: 1.1rem;
        }

        .navbar-brand img {
          width: 30px !important;
          height: 30px !important;
        }

        .quote-box {
          padding: 15px;
          font-size: 0.9rem;
        }

        .btn-lg {
          font-size: 0.9rem;
          padding: 10px 20px;
        }

        .social-links {
          flex-direction: column;
          align-items: center;
          gap: 12px;
          padding: 0 20px;
        }

        .social-links a {
          width: 100%;
          max-width: 280px;
          font-size: 0.85rem;
        }

        .col-md-3,
        .col-md-4,
        .col-lg-3,
        .col-lg-4,
        .col-lg-6 {
          margin-bottom: 15px !important;
        }

        section {
          padding: 30px 0 !important;
        }

        .py-5 {
          padding-top: 2rem !important;
          padding-bottom: 2rem !important;
        }

        .mb-5 {
          margin-bottom: 2rem !important;
        }

        .card-title {
          font-size: 0.95rem !important;
        }

        .card-text {
          font-size: 0.85rem !important;
        }

        .badge {
          font-size: 0.7rem !important;
          padding: 4px 8px !important;
        }

        /* Adjust tech stack icons for mobile */
        .tech-icon {
          height: 60px !important;
          width: 60px !important;
        }

        .tech-icon img {
          height: 54px !important;
          width: 54px !important;
        }
      }

      @media (max-width: 480px) {
        .hero-section h1 {
          font-size: 1.5rem !important;
        }

        .typing-animation {
          font-size: 0.9rem;
          min-width: 150px;
        }

        .badge-custom {
          font-size: 0.7rem;
          padding: 5px 10px;
        }

        .hero-actions {
          gap: 6px;
        }

        .hero-actions .badge-custom {
          font-size: 0.68rem;
          padding: 7px 9px;
        }

        .display-6 {
          font-size: 1.25rem !important;
        }

        .btn-lg {
          font-size: 0.8rem;
          padding: 8px 16px;
        }

        .project-card img {
          max-height: 60px !important;
        }

        /* Adjust tech icons for small mobile */
        .tech-icon {
          height: 50px !important;
          width: 50px !important;
        }

        .tech-icon img {
          height: 45px !important;
          width: 45px !important;
        }
      }

      /* Upload Modal Styles */
      .upload-modal {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        backdrop-filter: blur(5px);
      }

      .upload-modal.active {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .upload-content {
        background: #181825;
        border: 2px solid #00fff7;
        border-radius: 15px;
        padding: 30px;
        max-width: 500px;
        width: 90%;
        box-shadow: 0 0 40px #00fff7;
        animation: slideIn 0.3s ease;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(-50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .upload-close {
        float: right;
        font-size: 28px;
        font-weight: bold;
        color: #00fff7;
        cursor: pointer;
        background: none;
        border: none;
        transition: all 0.3s ease;
      }

      .upload-close:hover {
        color: #ff0000;
        transform: rotate(90deg);
      }

      .upload-zone {
        border: 2px dashed #00fff7;
        border-radius: 15px;
        padding: 40px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        background: #16181e;
        margin: 20px 0;
      }

      .upload-zone:hover {
        border-color: #00bcd4;
        background: #1a1c25;
        transform: scale(1.02);
      }

      .upload-zone.dragover {
        border-color: #00bcd4;
        background: #1a1c25;
        box-shadow: 0 0 20px #00fff7a0;
      }

      .upload-icon {
        font-size: 48px;
        color: #00fff7;
        margin-bottom: 10px;
      }

      .upload-btn-card {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #00fff7;
        color: #0a0a0f;
        border: none;
        border-radius: 50%;
        width: 35px;
        height: 35px;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
        z-index: 10;
        box-shadow: 0 0 8px #00fff7;
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
      }

      .upload-btn-card.enabled {
        opacity: 1;
        visibility: visible;
        pointer-events: auto;
        animation: fadeInPulse 0.5s ease;
      }

      @keyframes fadeInPulse {
        0% {
          opacity: 0;
          transform: scale(0.5);
        }
        50% {
          transform: scale(1.2);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      .upload-btn-card:hover {
        background: #00bcd4;
        color: #fff;
        transform: scale(1.1) rotate(15deg);
        box-shadow: 0 0 16px #00fff7;
      }

      .project-card {
        position: relative;
      }

      .upload-preview {
        max-width: 200px;
        max-height: 200px;
        margin: 20px auto;
        border-radius: 15px;
        border: 2px solid #00fff7;
        display: none;
      }

      .upload-preview.show {
        display: block;
      }

      .toggle-notification {
        position: fixed;
        top: 80px;
        right: 20px;
        background: #181825;
        border: 2px solid #00fff7;
        border-radius: 15px;
        padding: 15px 25px;
        z-index: 10000;
        box-shadow: 0 0 30px #00fff7;
        animation: slideInRight 0.3s ease;
        display: none;
      }

      .toggle-notification.show {
        display: block;
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(100px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes slideOutRight {
        from {
          opacity: 1;
          transform: translateX(0);
        }
        to {
          opacity: 0;
          transform: translateX(100px);
        }
      }

      /* Form Styles */
      .form-control {
        background: #16181e;
        border: 1px solid #00fff7;
        color: #e0e0e0;
        border-radius: 15px;
        padding: 10px;
      }

      .form-control:focus {
        background: #1a1c25;
        border-color: #00bcd4;
        color: #fff;
        box-shadow: 0 0 8px #00fff7a0;
        outline: none;
      }

      .form-control::placeholder {
        color: #888;
      }

      .form-label {
        font-weight: 600;
        margin-bottom: 8px;
      }

      .btn-warning {
        background: #00fff7;
        color: #0a0a0f;
        border: none;
        font-weight: 700;
        box-shadow: 0 0 8px #00fff7;
      }

      .btn-warning:hover,
      .btn-warning:focus {
        background: #ffb800;
        color: #0a0a0f;
        box-shadow: 0 0 16px #ffb800;
      }

      /* Edit Mode Styles */
      .edit-mode-active {
        outline: 2px dashed #00fff7 !important;
        background: #1a1c25 !important;
        padding: 8px !important;
        border-radius: 4px;
        cursor: text;
        transition: all 0.3s ease;
      }

      .edit-mode-active:hover {
        outline-color: #00bcd4 !important;
        background: #1f2129 !important;
      }

      .edit-mode-active:focus {
        outline: 3px solid #00fff7 !important;
        box-shadow: 0 0 16px #00fff7a0;
      }

      .edit-mode-toolbar {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #181825;
        border: 2px solid #00fff7;
        border-radius: 15px;
        padding: 20px 30px;
        z-index: 10001;
        box-shadow: 0 0 40px #00fff7;
        display: none;
      }

      .edit-mode-toolbar.show {
        display: block;
        animation: slideInUp 0.3s ease;
      }

      .delete-btn-card {
        position: absolute;
        bottom: 10px;
        right: 10px;
        background: #ff4444;
        border: 2px solid #ff0000;
        color: white;
        padding: 8px 16px;
        border-radius: 15px;
        cursor: pointer;
        z-index: 100;
        display: none;
        transition: all 0.3s ease;
        box-shadow: 0 0 15px #ff4444;
        font-size: 14px;
      }

      .delete-btn-card.enabled {
        display: block;
      }

      .delete-btn-card:hover {
        background: #cc0000;
        transform: translateY(-2px);
        box-shadow: 0 0 25px #ff0000;
      }

      .add-new-card-btn {
        position: absolute;
        top: 10px;
        right: 55px;
        background: #00ff00;
        border: 2px solid #00cc00;
        color: #0a0a0f;
        padding: 8px 12px;
        border-radius: 50%;
        cursor: pointer;
        z-index: 100;
        display: none;
        transition: all 0.3s ease;
        box-shadow: 0 0 15px #00ff00;
        font-size: 18px;
        font-weight: bold;
        width: 35px;
        height: 35px;
        line-height: 18px;
      }

      .add-new-card-btn.enabled {
        display: block;
      }

      .add-new-card-btn:hover {
        background: #00cc00;
        transform: scale(1.1) rotate(90deg);
        box-shadow: 0 0 25px #00ff00;
      }

      .category-add-btn {
        display: none;
        background: #00ff00;
        border: 2px solid #00cc00;
        color: #0a0a0f;
        padding: 8px 15px;
        border-radius: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 0 15px #00ff00;
        font-size: 20px;
        font-weight: bold;
        margin-left: 15px;
        vertical-align: middle;
      }

      .category-add-btn.enabled {
        display: inline-block;
      }

      .category-add-btn:hover {
        background: #00cc00;
        transform: translateY(-2px);
        box-shadow: 0 0 25px #00ff00;
      }
      .category-selection-options {
        display: grid;
        gap: 15px;
        margin-top: 15px;
      }
      .category-selection-option {
        border: 1.5px solid #00fff7;
        background: #12131b;
        border-radius: 15px;
        padding: 15px;
        text-align: left;
        color: #e0e0e0;
        font-weight: 600;
        width: 100%;
        cursor: pointer;
        transition:
          transform 0.2s ease,
          box-shadow 0.2s ease;
        outline: none;
      }
      .category-selection-option .option-title {
        display: block;
        font-size: 1rem;
        color: #00fff7;
      }
      .category-selection-option small {
        display: block;
        font-weight: 400;
        color: #c0c0c0;
        margin-top: 5px;
      }
      .category-selection-option:hover,
      .category-selection-option:focus {
        transform: translateY(-2px);
        box-shadow: 0 0 20px #00fff7;
        color: #ffffff;
      }

      .category-header {
        display: inline-block;
        margin: 0;
      }

      .add-card-form {
        background: #181825;
        border: 2px solid #00fff7;
        border-radius: 15px;
        padding: 30px;
        margin: 20px 0;
        box-shadow: 0 0 40px #00fff7;
        display: none;
        width: 100%;
      }

      .add-card-form.show {
        display: block;
        animation: slideInUp 0.3s ease;
      }

      .add-card-form-container {
        width: 100%;
        margin: 20px 0;
      }

      .add-card-form input,
      .add-card-form textarea {
        background: #1a1c25;
        border: 1px solid #00fff7;
        color: #e0e0e0;
        padding: 10px;
        border-radius: 15px;
        width: 100%;
        margin-bottom: 15px;
      }

      .add-card-form input:focus,
      .add-card-form textarea:focus {
        outline: none;
        border-color: #00bcd4;
        box-shadow: 0 0 10px #00fff7;
      }

      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translateY(50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .inline-add-card-container [contenteditable]:empty:before {
        content: attr(data-placeholder);
        color: #888;
        font-style: italic;
      }

      .inline-add-card-container [contenteditable]:focus {
        outline: 2px solid #00fff7 !important;
        background: #1f2129 !important;
      }

      /* Editable card content in edit mode */
      .project-card .card-title.edit-mode-active,
      .project-card .card-text.edit-mode-active,
      .project-card .badge.edit-mode-active {
        cursor: text !important;
        outline: 2px dashed #00fff780 !important;
        padding: 8px;
        border-radius: 4px;
        background: rgba(0, 255, 247, 0.05);
        transition: all 0.3s ease;
      }

      .project-card .card-title.edit-mode-active:hover,
      .project-card .card-text.edit-mode-active:hover,
      .project-card .badge.edit-mode-active:hover {
        background: rgba(0, 255, 247, 0.1);
        outline: 2px solid #00fff7 !important;
      }

      .project-card .card-title.edit-mode-active:focus,
      .project-card .card-text.edit-mode-active:focus,
      .project-card .badge.edit-mode-active:focus {
        outline: 2px solid #00fff7 !important;
        background: rgba(0, 255, 247, 0.15);
        box-shadow: 0 0 15px rgba(0, 255, 247, 0.3);
      }

      /* Dynamic About Section Styles */
      .about-intro-card {
        background: linear-gradient(135deg, #181825 0%, #1a1c2e 100%);
        border-radius: 15px;
        padding: 40px;
        box-shadow: 0 0 40px #00fff760;
        border: 2px solid #00fff7;
        position: relative;
        overflow: hidden;
        animation: fadeInUp 0.8s ease-out;
      }

      .about-intro-card::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, #00fff720 0%, transparent 70%);
        animation: rotateGlow 15s linear infinite;
      }

      @keyframes rotateGlow {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .about-greeting {
        font-size: 2.5rem;
        font-weight: 700;
        color: #00fff7;
        text-shadow: 0 0 20px #00fff7;
        margin-bottom: 20px;
        animation: textGlow 3s ease-in-out infinite;
      }

      @keyframes textGlow {
        0%,
        100% {
          text-shadow:
            0 0 10px #00fff7,
            0 0 20px #00fff7;
        }
        50% {
          text-shadow:
            0 0 20px #00fff7,
            0 0 40px #00fff7,
            0 0 60px #00fff7;
        }
      }

      .about-content-wrapper {
        position: relative;
        z-index: 1;
      }

      .about-text {
        font-size: 1.15rem;
        line-height: 2;
        color: #e0e0e0;
        text-align: left;
        padding: 20px;
        background: rgba(10, 10, 15, 0.6);
        border-radius: 15px;
        backdrop-filter: blur(10px);
        box-shadow: inset 0 0 20px #00fff720;
      }

      .about-highlight {
        color: #00fff7;
        font-weight: 600;
        transition: all 0.3s ease;
        display: inline-block;
      }

      .about-highlight:hover {
        transform: scale(1.05);
        text-shadow: 0 0 10px #00fff7;
      }

      .about-stats {
        display: flex;
        justify-content: space-around;
        margin-top: 40px;
        gap: 20px;
        flex-wrap: wrap;
      }

      .stat-card {
        background: linear-gradient(135deg, #1a1c2e 0%, #181825 100%);
        border: 2px solid #00fff7;
        border-radius: 15px;
        padding: 25px;
        text-align: center;
        flex: 1;
        min-width: 200px;
        transition: all 0.4s ease;
        position: relative;
        overflow: hidden;
        animation: slideInUp 0.6s ease-out backwards;
      }

      .stat-card:nth-child(1) {
        animation-delay: 0.2s;
      }
      .stat-card:nth-child(2) {
        animation-delay: 0.4s;
      }
      .stat-card:nth-child(3) {
        animation-delay: 0.6s;
      }

      @keyframes slideInUp {
        from {
          opacity: 0;
          transform: translateY(50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .stat-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, #00fff730, transparent);
        transition: left 0.6s ease;
      }

      .stat-card:hover::before {
        left: 100%;
      }

      .stat-card:hover {
        transform: translateY(-10px) scale(1.05);
        box-shadow: 0 10px 40px #00fff780;
        border-color: #00fff7;
      }

      .stat-icon {
        font-size: 2.5rem;
        color: #00fff7;
        margin-bottom: 15px;
        animation: bounce 2s ease-in-out infinite;
      }

      @keyframes bounce {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
      }

      .stat-card:hover .stat-icon {
        animation: none;
        transform: scale(1.2) rotate(360deg);
        transition: transform 0.6s ease;
      }

      .stat-number {
        font-size: 2rem;
        font-weight: 700;
        color: #00fff7;
        text-shadow: 0 0 10px #00fff7;
      }

      .stat-label {
        font-size: 0.95rem;
        color: #e0e0e0;
        margin-top: 10px;
        font-weight: 500;
      }

      @media (max-width: 768px) {
        .about-greeting {
          font-size: 1.8rem;
        }

        .about-text {
          font-size: 1rem;
          line-height: 1.8;
          text-align: left;
        }

        .about-stats {
          flex-direction: column;
        }

        .stat-card {
          min-width: 100%;
        }
      }

      /* Dynamic Why Hire Me Section Styles */
      .hire-section-card {
        background: linear-gradient(135deg, #1a1c2e 0%, #181825 100%);
        border-radius: 15px;
        padding: 45px;
        box-shadow: 0 0 50px #00fff780;
        border: 2px solid #00fff7;
        position: relative;
        overflow: hidden;
        animation: fadeInScale 1s ease-out;
      }

      @keyframes fadeInScale {
        from {
          opacity: 0;
          transform: scale(0.95);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .hire-section-card::before {
        content: "";
        position: absolute;
        top: -50%;
        right: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, #00fff715 0%, transparent 70%);
        animation: rotateGlowReverse 20s linear infinite;
      }

      @keyframes rotateGlowReverse {
        0% {
          transform: rotate(360deg);
        }
        100% {
          transform: rotate(0deg);
        }
      }

      .hire-title {
        font-size: 2.8rem;
        font-weight: 700;
        color: #00fff7;
        text-shadow: 0 0 25px #00fff7;
        margin-bottom: 30px;
        animation: pulseGlow 4s ease-in-out infinite;
        position: relative;
        z-index: 1;
      }

      @keyframes pulseGlow {
        0%,
        100% {
          text-shadow:
            0 0 15px #00fff7,
            0 0 30px #00fff7;
        }
        50% {
          text-shadow:
            0 0 30px #00fff7,
            0 0 60px #00fff7,
            0 0 90px #00fff7;
        }
      }

      .hire-content {
        position: relative;
        z-index: 1;
      }

      .hire-point {
        background: rgba(0, 255, 247, 0.08);
        border-left: 4px solid #00fff7;
        padding: 25px;
        margin-bottom: 20px;
        border-radius: 15px;
        backdrop-filter: blur(10px);
        transition: all 0.4s ease;
        animation: slideInLeft 0.8s ease-out backwards;
      }

      .hire-point:nth-child(1) {
        animation-delay: 0.1s;
      }
      .hire-point:nth-child(2) {
        animation-delay: 0.2s;
      }
      .hire-point:nth-child(3) {
        animation-delay: 0.3s;
      }
      .hire-point:nth-child(4) {
        animation-delay: 0.4s;
      }
      .hire-point:nth-child(5) {
        animation-delay: 0.5s;
      }

      @keyframes slideInLeft {
        from {
          opacity: 0;
          transform: translateX(-50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .hire-point:hover {
        background: rgba(0, 255, 247, 0.15);
        transform: translateX(10px);
        box-shadow: 0 5px 30px rgba(0, 255, 247, 0.3);
        border-left-width: 6px;
      }

      .hire-point-icon {
        font-size: 1.8rem;
        color: #00fff7;
        margin-right: 15px;
        display: inline-block;
        animation: floatIcon 3s ease-in-out infinite;
      }

      @keyframes floatIcon {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-8px);
        }
      }

      .hire-point:hover .hire-point-icon {
        animation: spinIcon 0.6s ease-in-out;
      }

      @keyframes spinIcon {
        0% {
          transform: rotate(0deg) scale(1);
        }
        50% {
          transform: rotate(180deg) scale(1.2);
        }
        100% {
          transform: rotate(360deg) scale(1);
        }
      }

      .hire-point-title {
        font-size: 1.3rem;
        font-weight: 700;
        color: #00fff7;
        margin-bottom: 10px;
        display: flex;
        align-items: center;
      }

      .hire-point-text {
        font-size: 1.05rem;
        line-height: 1.8;
        color: #e0e0e0;
        margin-left: 50px;
      }

      .hire-highlight {
        color: #00fff7;
        font-weight: 600;
        text-shadow: 0 0 5px rgba(0, 255, 247, 0.5);
        transition: all 0.3s ease;
      }

      .hire-highlight:hover {
        text-shadow: 0 0 15px rgba(0, 255, 247, 0.8);
      }

      @media (max-width: 768px) {
        .hire-title {
          font-size: 2rem;
        }

        .hire-point-title {
          font-size: 1.1rem;
        }

        .hire-point-text {
          font-size: 0.95rem;
          margin-left: 0;
        }

        .hire-point {
          padding: 20px;
        }

        .hire-point-icon {
          display: block;
          margin-bottom: 10px;
        }
      }

      /* Gallery Modal Customization */
      #galleryModal .modal-dialog {
        max-width: 85vw;
        width: 900px;
        margin: 1.75rem auto;
        max-height: calc(100vh - 3.5rem);
      }

      #galleryModal .modal-content {
        background: linear-gradient(135deg, #1a1d2e 0%, #0f1117 100%);
        border: 2px solid #00fff7;
        border-radius: 15px;
        box-shadow: 0 0 40px rgba(0, 255, 247, 0.3);
        max-height: calc(100vh - 3.5rem);
        display: flex;
        flex-direction: column;
      }

      #galleryModal .modal-header {
        border-bottom: 1px solid rgba(0, 255, 247, 0.3);
        padding: 15px 25px;
        flex-shrink: 0;
      }

      #galleryModal .modal-body {
        padding: 20px 25px;
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }

      #galleryModal .modal-title {
        font-size: 1.3rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 2px;
      }

      .gallery-image-container {
        display: flex;
        align-items: center;
        justify-content: center;
        height: calc(100vh - 250px);
        max-height: 550px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 15px;
        padding: 15px;
        position: relative;
      }

      #galleryMainImage {
        max-width: 100%;
        max-height: 100%;
        width: auto;
        height: auto;
        object-fit: contain;
        border: 3px solid #00fff7;
        border-radius: 15px;
        box-shadow: 0 0 30px rgba(0, 255, 247, 0.4);
      }

      .gallery-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        gap: 20px;
        margin-bottom: 15px;
        flex-shrink: 0;
      }

      .gallery-controls button {
        background: rgba(0, 255, 247, 0.1);
        border: 2px solid #00fff7;
        color: #00fff7;
        padding: 10px 20px;
        border-radius: 15px;
        transition: all 0.3s ease;
      }

      .gallery-controls button:hover {
        background: rgba(0, 255, 247, 0.2);
        box-shadow: 0 0 20px rgba(0, 255, 247, 0.5);
        transform: scale(1.05);
      }

      #galleryCounter {
        font-size: 1.1rem;
        font-weight: 600;
      }

      @media (max-width: 768px) {
        #galleryModal .modal-dialog {
          max-width: 95vw;
          margin: 10px auto;
          max-height: none;
        }

        #galleryModal .modal-content {
          max-height: none;
        }

        .gallery-image-container {
          min-height: 300px;
          height: auto;
          max-height: none;
        }

        #galleryMainImage {
          max-height: 300px;
        }

        #galleryModal .modal-body {
          padding: 15px;
          overflow: auto;
        }

        #galleryModal .modal-header {
          padding: 15px;
        }

        #galleryModal .modal-title {
          font-size: 1.1rem;
        }

        .gallery-controls {
          margin-bottom: 15px;
        }
      }

      /* ============================================
           COMPREHENSIVE DEVICE COMPATIBILITY FIXES
           Covers all Chrome DevTools device presets
           ============================================ */

      /* Global: Prevent horizontal overflow on all devices */
      html {
        overflow-x: hidden;
      }

      /* Contact Section - Responsive Container */
      #contact .social-links {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        gap: 15px;
        max-width: 100%;
        padding: 0 15px;
      }

      #contact .social-links a {
        flex: 0 1 auto;
        white-space: nowrap;
      }

      /* === LARGE TABLET / SMALL DESKTOP (992px - 1199px) === */
      /* Nest Hub Max (1280x800), Asus Zenbook Fold, Surface Pro 7 */
      @media (max-width: 1199px) and (min-width: 992px) {
        .hero-profile-picture {
          width: 320px;
          height: 400px;
        }
        .hero-profile-container {
          gap: 30px;
        }
      }

      /* === TABLET PORTRAIT (769px - 991px) === */
      /* iPad Mini (768px), iPad Air (820px), Surface Pro 7 portrait */
      /* Navbar collapses at <992px (navbar-expand-lg) but hero was still desktop — fix here */
      @media (max-width: 991px) and (min-width: 769px) {
        /* Show mobile navbar text since navbar is collapsed in this range */
        .navbar-text-mobile {
          display: inline !important;
        }
        .navbar-text-desktop {
          display: none !important;
        }
        .navbar-brand img {
          display: inline-block !important;
        }

        /* Stack hero layout vertically like mobile */
        .hero-profile-container {
          flex-direction: column;
          align-items: center;
          gap: 30px;
        }
        .hero-profile-picture {
          display: none;
        }
        .hero-mobile-profile {
          display: block !important;
          width: 170px;
          height: 170px;
        }
        .hero-content {
          text-align: center;
          margin-top: 20px;
        }
        .hero-section h1 {
          font-size: 2.5rem !important;
        }
        .badge-custom {
          font-size: 0.85rem;
          padding: 7px 14px;
        }

        .about-intro-card {
          padding: 30px;
        }

        .stat-card {
          min-width: 45%;
        }

        section {
          min-height: auto;
        }
      }

      /* === MOBILE ENHANCEMENTS (≤768px) — additions to existing rules === */
      @media (max-width: 768px) {
        /* Contact section - stack vertically on mobile */
        #contact .social-links {
          flex-direction: column;
          gap: 12px;
          padding: 0 20px;
        }
        #contact .social-links a {
          width: 100%;
          max-width: 350px;
          text-align: center;
        }

        /* Navbar improvements */
        .navbar .container {
          padding-left: 10px;
          padding-right: 10px;
        }
        .navbar-brand {
          max-width: 65%;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }

        /* Collapsed navbar dropdown styling */
        .navbar-collapse {
          background: #000000;
          border-radius: 0 0 15px 15px;
          padding: 10px 0;
          margin-top: 5px;
          border-bottom: 1px solid #00fff730;
          border-left: 1px solid #00fff730;
          border-right: 1px solid #00fff730;
        }
        .navbar-nav .nav-link {
          padding: 12px 20px !important;
          font-family: "Orbitron", sans-serif !important;
          font-weight: 700 !important;
          letter-spacing: 2px !important;
          text-transform: uppercase !important;
          font-size: 0.7rem !important;
          border-bottom: 1px solid #ffffff08;
        }
        .navbar-nav .nav-item:last-child .nav-link {
          border-bottom: none;
        }

        /* Hero section spacing */
        .hero-section {
          padding-top: 80px;
        }

        /* Badge buttons — better flex wrapping */
        .hero-content .mt-4,
        .hero-content .mt-3 {
          display: flex;
          flex-wrap: wrap;
          justify-content: center;
          gap: 6px;
        }
        .badge-custom {
          margin: 0 !important;
        }

        /* Sections — allow natural height on mobile */
        section {
          min-height: auto;
        }

        /* Contact section mobile */
        #contact {
          padding: 60px 0 !important;
        }

        #contact h2 {
          margin-bottom: 2rem !important;
          white-space: nowrap !important;
        }

        #contact .social-links a {
          padding: 12px 24px !important;
          font-size: 0.9rem !important;
        }

        /* Card text overflow prevention */
        .project-card .card-body {
          overflow-wrap: break-word;
          word-wrap: break-word;
        }

        /* Edit toolbar full-width on mobile */
        .edit-mode-toolbar {
          left: 10px;
          right: 10px;
          bottom: 10px;
          padding: 15px 20px;
        }

        /* Upload modal scrollable on mobile */
        .upload-content {
          max-height: 90vh;
          overflow-y: auto;
        }

        /* Notification centered on mobile */
        .toggle-notification {
          right: 10px;
          left: 10px;
          text-align: center;
        }

        /* Footer text sizing */
        footer p {
          font-size: 0.85rem;
        }
      }

      /* === SURFACE DUO & PHABLETS (541px - 767px) === */
      @media (max-width: 767px) and (min-width: 541px) {
        .hero-section h1 {
          font-size: 2rem !important;
        }
        .display-4 {
          font-size: 2rem !important;
        }
        .hero-mobile-profile {
          width: 160px;
          height: 160px;
        }
        .about-greeting {
          font-size: 1.6rem;
        }
      }

      /* === iPhone SE / iPhone 12 Mini / Small phones (361px - 375px) === */
      @media (max-width: 375px) {
        .hero-section h1 {
          font-size: 1.4rem !important;
        }
        .display-4 {
          font-size: 1.4rem !important;
        }
        .typing-animation {
          font-size: 0.85rem;
        }
        .lead {
          font-size: 0.85rem !important;
        }
        .badge-custom {
          font-size: 0.68rem;
          padding: 5px 9px;
        }
        .hero-mobile-profile {
          width: 120px;
          height: 120px;
          margin: -15px auto 35px;
        }
        .navbar-brand {
          font-size: 0.95rem;
        }
        .about-greeting {
          font-size: 1.4rem;
        }
        .about-text {
          font-size: 0.9rem;
          padding: 15px;
        }
        .about-intro-card {
          padding: 20px;
        }
        .display-6 {
          font-size: 1.2rem !important;
        }
        h2 {
          font-size: 1.3rem !important;
        }
        .tech-icon {
          height: 45px !important;
          width: 45px !important;
        }
        .tech-icon img {
          height: 40px !important;
          width: 40px !important;
        }
        .hire-title {
          font-size: 1.7rem;
        }
        .hire-point {
          padding: 18px;
        }
        .hire-point-text {
          font-size: 0.9rem;
        }
      }

      /* === Samsung Galaxy S8+ (360px) and similar === */
      @media (max-width: 360px) {
        #contact .social-links a {
          max-width: 100%;
          font-size: 0.85rem;
          padding: 10px 16px;
        }

        body {
          font-size: 13px;
        }
        .hero-section {
          padding-top: 70px;
          padding-bottom: 30px;
        }
        .hero-section h1 {
          font-size: 1.25rem !important;
        }
        .display-4 {
          font-size: 1.3rem !important;
        }
        .typing-animation {
          font-size: 0.8rem;
          min-width: 120px;
        }
        .lead {
          font-size: 0.8rem !important;
        }
        .badge-custom {
          font-size: 0.65rem;
          padding: 4px 8px;
        }
        .hero-mobile-profile {
          width: 110px;
          height: 110px;
          margin: -10px auto 30px;
        }
        .navbar-brand {
          font-size: 0.85rem;
        }
        .nav-link {
          font-size: 0.8rem !important;
        }
        .display-6 {
          font-size: 1.1rem !important;
        }
        h2 {
          font-size: 1.15rem !important;
        }
        .about-greeting {
          font-size: 1.3rem;
        }
        .about-text {
          font-size: 0.85rem;
          padding: 12px;
        }
        .about-intro-card {
          padding: 15px;
        }
        .hire-title {
          font-size: 1.5rem;
        }
        .hire-point {
          padding: 15px;
        }
        .hire-point-title {
          font-size: 1rem;
        }
        .hire-point-text {
          font-size: 0.85rem;
          margin-left: 0;
        }
        .project-card .card-body {
          padding: 12px;
        }
        .card-title {
          font-size: 0.85rem !important;
        }
        .card-text {
          font-size: 0.78rem !important;
        }
        .badge {
          font-size: 0.6rem !important;
          padding: 3px 6px !important;
        }
        .tech-icon {
          height: 40px !important;
          width: 40px !important;
        }
        .tech-icon img {
          height: 35px !important;
          width: 35px !important;
        }
        section {
          padding: 25px 0 !important;
        }
        .py-5 {
          padding-top: 1.5rem !important;
          padding-bottom: 1.5rem !important;
        }
        footer p {
          font-size: 0.75rem;
        }
        #galleryModal .modal-dialog {
          max-width: 98vw;
          margin: 5px auto;
        }
        .gallery-image-container {
          min-height: 200px;
        }
        #galleryMainImage {
          max-height: 200px;
        }
        .stat-card {
          padding: 18px;
        }
        .stat-number {
          font-size: 1.5rem;
        }
        .stat-icon {
          font-size: 2rem;
        }
      }

      /* === Galaxy Z Fold 5 (344px) and ultra-narrow screens === */
      @media (max-width: 344px) {
        .hero-section h1 {
          font-size: 1.1rem !important;
        }
        .display-4 {
          font-size: 1.15rem !important;
        }
        .typing-animation {
          font-size: 0.7rem;
          min-width: 100px;
        }
        .lead {
          font-size: 0.75rem !important;
        }
        .badge-custom {
          font-size: 0.6rem;
          padding: 3px 6px;
        }
        .hero-mobile-profile {
          width: 90px;
          height: 90px;
          margin: -5px auto 25px;
        }
        .navbar-brand {
          font-size: 0.75rem;
        }
        .about-greeting {
          font-size: 1.1rem;
        }
        .container {
          padding-left: 8px;
          padding-right: 8px;
        }
        .hire-title {
          font-size: 1.2rem;
        }
        .stat-card {
          padding: 15px;
        }
      }

      /* === LANDSCAPE ON PHONES (short viewport) === */
      @media (max-height: 500px) and (orientation: landscape) {
        .hero-section {
          padding: 70px 0 20px;
          min-height: auto;
        }
        section {
          min-height: auto;
        }
        .hero-mobile-profile {
          width: 80px !important;
          height: 80px !important;
          margin: -5px auto 15px !important;
        }
        .hero-section h1 {
          font-size: 1.3rem !important;
        }
        .typing-animation {
          font-size: 0.8rem;
          min-height: 1.5em;
        }
        .badge-custom {
          padding: 4px 8px;
          font-size: 0.7rem;
        }
      }

      /* === NEST HUB (1024x600) — landscape hub/kiosk === */
      @media (min-width: 1024px) and (max-height: 650px) {
        .hero-section {
          min-height: auto;
          padding: 80px 0 40px;
        }
        section {
          min-height: auto;
        }
        .hero-profile-picture {
          width: 280px;
          height: 350px;
        }
      }

      /* === NEST HUB MAX (1280x800) === */
      @media (min-width: 1200px) and (max-height: 800px) {
        .hero-section {
          min-height: auto;
        }
        section {
          min-height: auto;
        }
        .hero-profile-picture {
          width: 350px;
          height: 430px;
        }
      }

      /* === SCROLL ANIMATIONS === */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes slideInLeft {
        from {
          opacity: 0;
          transform: translateX(-50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .scroll-animate {
        opacity: 0;
      }

      .scroll-animate.animate {
        animation: fadeInUp 0.8s ease-out forwards;
      }

      .scroll-animate.animate-left {
        animation: slideInLeft 0.8s ease-out forwards;
      }

      .scroll-animate.animate-right {
        animation: slideInRight 0.8s ease-out forwards;
      }

      .scroll-animate.animate-fade {
        animation: fadeIn 0.8s ease-out forwards;
      }

      /* Stagger animation for multiple elements */
      .scroll-animate:nth-child(1) {
        animation-delay: 0s;
      }
      .scroll-animate:nth-child(2) {
        animation-delay: 0.1s;
      }
      .scroll-animate:nth-child(3) {
        animation-delay: 0.2s;
      }
      .scroll-animate:nth-child(4) {
        animation-delay: 0.3s;
      }
      .scroll-animate:nth-child(5) {
        animation-delay: 0.4s;
      }

      /* ===== DARK/LIGHT MODE THEME ===== */
      /* Smooth transition for theme switching */
      body.theme-transition,
      body.theme-transition *,
      body.theme-transition *::before,
      body.theme-transition *::after {
        transition:
          background-color 0.35s ease,
          color 0.35s ease,
          border-color 0.35s ease,
          box-shadow 0.35s ease,
          fill 0.35s ease !important;
      }

      /* Theme Toggle Button - Facebook style */
      .theme-toggle-btn {
        background: none;
        border: 2px solid #00fff7;
        border-radius: 50%;
        width: 38px;
        height: 38px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        color: #00fff7;
        font-size: 1.1rem;
        padding: 0;
        margin-left: 12px;
        position: relative;
        overflow: hidden;
      }

      /* Mobile Floating Theme Toggle */
      #mobileThemeToggle {
        position: fixed;
        right: 12px;
        bottom: 68px;
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background: linear-gradient(135deg, #0a0a0f 0%, #1a1c25 100%);
        border: 2px solid #00fff7;
        color: #00fff7;
        font-size: 1.1rem;
        cursor: pointer;
        z-index: 9999;
        display: none;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        overflow: hidden;
        box-shadow: 0 0 14px #00fff730;
      }
      #mobileThemeToggle:hover {
        transform: scale(1.1);
        box-shadow: 0 0 22px #00fff760;
      }
      #mobileThemeToggle .icon-sun,
      #mobileThemeToggle .icon-moon {
        position: absolute;
        transition: all 0.3s ease;
      }
      #mobileThemeToggle .icon-sun {
        opacity: 0;
        transform: rotate(-90deg) scale(0);
      }
      #mobileThemeToggle .icon-moon {
        opacity: 1;
        transform: rotate(0deg) scale(1);
      }
      body.light-mode #mobileThemeToggle {
        background: #ffffff;
        border-color: #1c1e21;
        color: #1c1e21;
        box-shadow: 0 2px 10px rgba(28, 30, 33, 0.2);
      }
      body.light-mode #mobileThemeToggle .icon-sun {
        opacity: 1;
        transform: rotate(0deg) scale(1);
      }
      body.light-mode #mobileThemeToggle .icon-moon {
        opacity: 0;
        transform: rotate(90deg) scale(0);
      }
      @media (max-width: 991.98px) {
        #mobileThemeToggle {
          display: flex;
        }
        .theme-toggle-btn {
          display: none !important;
        }
      }
      .theme-toggle-btn:hover {
        background: #00fff720;
        transform: rotate(30deg) scale(1.1);
        box-shadow: 0 0 16px #00fff760;
      }
      .theme-toggle-btn .icon-sun,
      .theme-toggle-btn .icon-moon {
        position: absolute;
        transition:
          transform 0.4s ease,
          opacity 0.4s ease;
      }
      .theme-toggle-btn .icon-sun {
        opacity: 0;
        transform: rotate(-90deg) scale(0);
      }
      .theme-toggle-btn .icon-moon {
        opacity: 1;
        transform: rotate(0deg) scale(1);
      }

      /* ===== LIGHT MODE ===== */
      body.light-mode {
        background: #f0f2f5 !important;
        color: #1c1e21 !important;
      }

      body.light-mode .hero-section {
        background: #ffffff !important;
        color: #1c1e21 !important;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08) inset !important;
      }

      body.light-mode .hero-section h1,
      body.light-mode .hero-section .display-4 {
        color: #1c1e21 !important;
      }

      body.light-mode .typing-animation,
      body.light-mode #typing-text {
        color: #1c1e21 !important;
      }

      body.light-mode .badge-custom {
        background: linear-gradient(
          135deg,
          #1c1e21 0%,
          #2a2d33 100%
        ) !important;
        color: #00fff7 !important;
        border-color: #00fff7 !important;
        box-shadow:
          0 0 8px #00fff750,
          0 0 16px #00fff730,
          inset 0 0 8px #00fff720 !important;
      }
      body.light-mode .badge-custom:hover {
        background: linear-gradient(
          135deg,
          #2a2d33 0%,
          #1c1e21 100%
        ) !important;
        color: #ffffff !important;
        box-shadow:
          0 0 12px #00fff780,
          0 0 24px #00fff750,
          inset 0 0 12px #00fff730 !important;
      }

      body.light-mode .section-card {
        background: #ffffff !important;
        border-color: #dddfe2 !important;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1) !important;
        color: #1c1e21 !important;
      }
      body.light-mode .section-card:hover {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12) !important;
      }

      body.light-mode .project-card {
        background: #ffffff !important;
        border-color: #dddfe2 !important;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1) !important;
      }
      body.light-mode .project-card:hover {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15) !important;
      }
      body.light-mode .project-card .card-body {
        color: #1c1e21 !important;
      }
      body.light-mode .project-card .card-title {
        color: #1c1e21 !important;
      }
      body.light-mode .project-card .card-text {
        color: #1c1e21 !important;
      }

      body.light-mode .highlight-box {
        background: #f0f2f5 !important;
        color: #1c1e21 !important;
        border-color: #1c1e21 !important;
        box-shadow: none !important;
      }

      body.light-mode .quote-box {
        background: #f0f2f5 !important;
        border-left-color: #1c1e21 !important;
        color: #1c1e21 !important;
        box-shadow: none !important;
      }

      body.light-mode .journey-timeline::before {
        background: #1c1e21 !important;
      }
      body.light-mode .timeline-item::before {
        background: #1c1e21 !important;
        box-shadow: none !important;
      }
      body.light-mode .timeline-item {
        color: #1c1e21 !important;
      }

      body.light-mode .navbar {
        background: #ffffff !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
      }
      body.light-mode .navbar-brand {
        color: #1c1e21 !important;
        text-shadow: none !important;
      }
      body.light-mode .nav-link {
        color: #1c1e21 !important;
        text-shadow: none !important;
      }
      body.light-mode .nav-link:hover {
        color: #1c1e21 !important;
        opacity: 0.7;
      }
      body.light-mode .navbar-toggler {
        border-color: #1c1e21 !important;
      }
      body.light-mode .navbar-toggler-icon {
        filter: invert(1) !important;
      }
      /* Mobile nav dropdown in light mode */
      body.light-mode .navbar-collapse {
        background: #ffffff !important;
        border-bottom: 1px solid #dddfe2 !important;
        border-left: 1px solid #dddfe2 !important;
        border-right: 1px solid #dddfe2 !important;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08) !important;
      }
      /* Desktop: remove the rectangle container from navbar-collapse */
      @media (min-width: 992px) {
        body.light-mode .navbar-collapse {
          background: transparent !important;
          border: none !important;
          box-shadow: none !important;
        }
      }
      body.light-mode .navbar-nav .nav-link {
        color: #1c1e21 !important;
        border-bottom: 1px solid #f0f2f5 !important;
      }
      body.light-mode .navbar-nav .nav-item:last-child .nav-link {
        border-bottom: none !important;
      }
      body.light-mode .navbar-nav .nav-link:hover {
        background: #f0f2f5 !important;
        color: #1c1e21 !important;
      }

      body.light-mode section {
        background: #f0f2f5 !important;
      }

      body.light-mode #contact {
        background: #ffffff !important;
      }
      body.light-mode #contact h2 {
        color: #1c1e21 !important;
        text-shadow: none !important;
      }

      body.light-mode .social-links a {
        background: #1c1e21 !important;
        color: #ffffff !important;
        box-shadow: 0 2px 8px rgba(28, 30, 33, 0.2) !important;
      }
      body.light-mode .social-links a:hover {
        background: #333333 !important;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2) !important;
      }

      body.light-mode footer {
        background: #ffffff !important;
        color: #1c1e21 !important;
      }
      body.light-mode footer p {
        color: #1c1e21 !important;
      }

      body.light-mode .text-primary {
        color: #1c1e21 !important;
        text-shadow: none !important;
      }
      body.light-mode .text-success,
      body.light-mode .text-info,
      body.light-mode .text-warning,
      body.light-mode .text-danger {
        color: #1c1e21 !important;
        text-shadow: none !important;
      }

      body.light-mode h2,
      body.light-mode h3,
      body.light-mode h4,
      body.light-mode h5,
      body.light-mode h6 {
        color: #1c1e21 !important;
      }

      body.light-mode .bg-light {
        background: #f0f2f5 !important;
      }

      body.light-mode .btn-primary {
        background: #1c1e21 !important;
        color: #ffffff !important;
        box-shadow: 0 2px 8px rgba(28, 30, 33, 0.3) !important;
      }
      body.light-mode .btn-primary:hover {
        background: #333333 !important;
        box-shadow: 0 4px 12px rgba(28, 30, 33, 0.4) !important;
      }
      body.light-mode .btn-success {
        background: #42b72a !important;
        color: #ffffff !important;
        border: none !important;
        box-shadow: 0 2px 8px rgba(66, 183, 42, 0.3) !important;
      }
      body.light-mode .btn-success:hover {
        background: #36a420 !important;
        box-shadow: 0 4px 12px rgba(66, 183, 42, 0.4) !important;
      }
      body.light-mode .btn-danger {
        background: #1c1e21 !important;
        color: #ffffff !important;
        box-shadow: 0 2px 8px rgba(28, 30, 33, 0.3) !important;
      }

      body.light-mode .about-greeting {
        color: #1c1e21 !important;
        text-shadow: none !important;
      }
      body.light-mode .about-text {
        color: #1c1e21 !important;
        background: rgba(255, 255, 255, 0.8) !important;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08) !important;
      }
      body.light-mode .about-highlight {
        color: #1c1e21 !important;
        font-weight: 700 !important;
      }
      body.light-mode .stat-card {
        background: linear-gradient(
          135deg,
          #ffffff 0%,
          #f0f2f5 100%
        ) !important;
        border-color: #dddfe2 !important;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1) !important;
      }
      body.light-mode .stat-card:hover {
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15) !important;
        border-color: #1c1e21 !important;
      }
      body.light-mode .stat-icon {
        color: #1c1e21 !important;
      }
      body.light-mode .stat-number {
        color: #1c1e21 !important;
        text-shadow: none !important;
      }
      body.light-mode .stat-label {
        color: #1c1e21 !important;
      }

      body.light-mode .stat-card::before {
        background: linear-gradient(
          90deg,
          transparent,
          rgba(28, 30, 33, 0.08),
          transparent
        ) !important;
      }

      /* Light mode hero profile adjustments */
      body.light-mode .hero-profile-picture::before {
        border-color: rgba(28, 30, 33, 0.45) !important;
        box-shadow:
          inset 0 0 20px rgba(28, 30, 33, 0.12),
          0 0 14px rgba(28, 30, 33, 0.12) !important;
      }
      body.light-mode .hero-profile-picture::after,
      body.light-mode .hero-profile-picture .hero-orbit {
        border-color: rgba(28, 30, 33, 0.38) !important;
        box-shadow: none !important;
      }
      body.light-mode .hero-mobile-profile::after {
        border-color: #1c1e21 !important;
      }

      /* Light mode upload/editor components */
      body.light-mode .upload-content {
        background: #ffffff !important;
        border-color: #dddfe2 !important;
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15) !important;
      }
      body.light-mode .upload-zone {
        border-color: #dddfe2 !important;
        background: #f0f2f5 !important;
      }
      body.light-mode .upload-close {
        color: #1c1e21 !important;
      }

      body.light-mode .toggle-notification {
        background: #ffffff !important;
        border-color: #dddfe2 !important;
      }
      body.light-mode .toggle-notification p {
        color: #1c1e21 !important;
      }

      /* Light mode tech icons */
      body.light-mode .tech-icon {
        border-color: #dddfe2 !important;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08) !important;
      }

      /* Light mode scrollbar */
      body.light-mode::-webkit-scrollbar-track {
        background: #f0f2f5;
      }
      body.light-mode::-webkit-scrollbar-thumb {
        background: #bec3c9;
      }
      body.light-mode::-webkit-scrollbar-thumb:hover {
        background: #8a8d91;
      }

      body.light-mode ::selection {
        background: #1c1e21;
        color: #ffffff;
      }

      /* Light mode for viewer counter */
      body.light-mode #viewerCounter {
        background: #ffffff !important;
        color: #1c1e21 !important;
        border-color: #dddfe2 !important;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1) !important;
      }

      /* Light mode toggle button style */
      body.light-mode .theme-toggle-btn {
        border-color: #1c1e21 !important;
        color: #1c1e21 !important;
      }
      body.light-mode .theme-toggle-btn:hover {
        background: rgba(28, 30, 33, 0.1) !important;
        box-shadow: 0 0 16px rgba(28, 30, 33, 0.2) !important;
      }
      body.light-mode .theme-toggle-btn .icon-sun {
        opacity: 1;
        transform: rotate(0deg) scale(1);
      }
      body.light-mode .theme-toggle-btn .icon-moon {
        opacity: 0;
        transform: rotate(90deg) scale(0);
      }

      /* ===== LIGHT MODE: ALL FONTS BLACK ===== */
      body.light-mode,
      body.light-mode p,
      body.light-mode span,
      body.light-mode div,
      body.light-mode li,
      body.light-mode td,
      body.light-mode th,
      body.light-mode label,
      body.light-mode
        a:not(.btn):not(.badge-custom):not(.social-links a):not(.nav-link),
      body.light-mode strong,
      body.light-mode em,
      body.light-mode small,
      body.light-mode .lead,
      body.light-mode .fw-bold,
      body.light-mode .text-white,
      body.light-mode .text-muted {
        color: #1c1e21 !important;
      }

      /* Exclude chatbot UI from ALL light mode color overrides */
      body.light-mode #chatbotToggle,
      body.light-mode #chatbotToggle * {
        color: #00fff7 !important;
      }
      body.light-mode .chat-header-name {
        color: #00fff7 !important;
      }
      body.light-mode .chat-header-status,
      body.light-mode .chat-header-status span,
      body.light-mode #chatModelStatus {
        color: #00ff88 !important;
      }
      body.light-mode .chat-close-btn {
        color: #00fff780 !important;
      }
      body.light-mode .chat-close-btn:hover {
        color: #ff4757 !important;
      }
      body.light-mode .chat-msg.bot,
      body.light-mode .chat-msg.bot p,
      body.light-mode .chat-msg.bot span,
      body.light-mode .chat-msg.bot li,
      body.light-mode .chat-msg.bot strong,
      body.light-mode .chat-msg.bot em,
      body.light-mode .chat-msg.bot small,
      body.light-mode .chat-msg.bot div {
        color: #e0e0e0 !important;
      }
      body.light-mode .chat-msg.user {
        color: #00fff7 !important;
      }
      body.light-mode .chat-input {
        color: #e0e0e0 !important;
      }
      body.light-mode .chat-input::placeholder {
        color: #ffffff40 !important;
      }
      body.light-mode .chat-send-btn {
        color: #0a0a0f !important;
      }
      body.light-mode .chat-chip {
        color: #00fff7 !important;
      }
      body.light-mode .chat-powered,
      body.light-mode .chat-powered span,
      body.light-mode #chatPoweredModel {
        color: #00fff7 !important;
      }
      body.light-mode .chat-typing span {
        background: #00fff7 !important;
      }
      body.light-mode .prompt-limit-counter,
      body.light-mode .prompt-limit-counter span {
        color: #ffffffcc !important;
      }
      body.light-mode .tts-toggle {
        color: #00fff7 !important;
      }
      body.light-mode .chat-msg code:not(pre code) {
        color: #00fff7 !important;
      }
      body.light-mode .code-language {
        color: #00fff7 !important;
      }
      body.light-mode .code-copy-btn {
        color: #00fff7 !important;
      }

      /* Ensure headings are black */
      body.light-mode h1,
      body.light-mode h2,
      body.light-mode h3,
      body.light-mode h4,
      body.light-mode h5,
      body.light-mode h6,
      body.light-mode .display-1,
      body.light-mode .display-2,
      body.light-mode .display-3,
      body.light-mode .display-4,
      body.light-mode .display-5,
      body.light-mode .display-6 {
        color: #1c1e21 !important;
        text-shadow: none !important;
      }

      /* Override inline style="color: #00fff7" elements */
      body.light-mode [style*="color: #00fff7"],
      body.light-mode [style*="color:#00fff7"] {
        color: #1c1e21 !important;
      }
      body.light-mode [style*="color: #e0e0e0"],
      body.light-mode [style*="color:#e0e0e0"] {
        color: #1c1e21 !important;
      }

      /* Footer - all black text */
      body.light-mode footer,
      body.light-mode footer * {
        color: #1c1e21 !important;
      }
      body.light-mode footer .text-primary,
      body.light-mode footer i.text-primary,
      body.light-mode footer .fa-heart {
        color: #e74c3c !important;
      }

      /* Contact section - black text */
      body.light-mode #contact h2 {
        color: #1c1e21 !important;
        text-shadow: none !important;
      }
      body.light-mode #contact p,
      body.light-mode #contact span {
        color: #1c1e21 !important;
      }

      /* Social link buttons keep white text */
      body.light-mode .social-links a,
      body.light-mode .social-links a * {
        color: #ffffff !important;
      }

      /* Badge-custom keep white text on blue bg */
      body.light-mode .badge-custom,
      body.light-mode .badge-custom * {
        color: #ffffff !important;
      }

      /* nav-link override - black text in light mode */
      body.light-mode .nav-link {
        color: #1c1e21 !important;
        text-shadow: none !important;
      }
      body.light-mode .nav-link:hover,
      body.light-mode .nav-link.active {
        color: #1c1e21 !important;
        opacity: 0.7;
      }

      /* About section overrides */
      body.light-mode .about-greeting {
        color: #1c1e21 !important;
        text-shadow: none !important;
      }
      body.light-mode .about-highlight {
        color: #1c1e21 !important;
        font-weight: 700 !important;
        text-shadow: none !important;
      }
      body.light-mode .about-text {
        color: #1c1e21 !important;
        background: rgba(255, 255, 255, 0.9) !important;
      }
      body.light-mode .about-intro-card {
        background: #ffffff !important;
        border-color: #dddfe2 !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
      }
      body.light-mode .about-intro-card::before {
        background: none !important;
      }

      /* Hire Me / Journey section overrides */
      body.light-mode .hire-section-card {
        background: #ffffff !important;
        border-color: #dddfe2 !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
      }
      body.light-mode .hire-section-card::before {
        background: none !important;
      }
      body.light-mode .hire-title {
        color: #1c1e21 !important;
        text-shadow: none !important;
      }
      body.light-mode .hire-point {
        background: #f0f2f5 !important;
        border-left-color: #1c1e21 !important;
      }
      body.light-mode .hire-point:hover {
        background: #e4e6eb !important;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1) !important;
      }
      body.light-mode .hire-point-icon {
        color: #1c1e21 !important;
      }
      body.light-mode .hire-point-title {
        color: #1c1e21 !important;
      }
      body.light-mode .hire-point-text {
        color: #1c1e21 !important;
      }
      body.light-mode .hire-highlight {
        color: #1c1e21 !important;
        font-weight: 700 !important;
        text-shadow: none !important;
      }
      body.light-mode .hire-content {
        color: #1c1e21 !important;
      }

      /* Stat cards black text */
      body.light-mode .stat-number {
        color: #1c1e21 !important;
        text-shadow: none !important;
      }
      body.light-mode .stat-label {
        color: #1c1e21 !important;
      }
      body.light-mode .stat-icon {
        color: #1c1e21 !important;
      }

      /* Typing animation in hero */
      body.light-mode .typing-animation,
      body.light-mode #typing-text {
        color: #1c1e21 !important;
      }

      /* Buttons keep white text */
      body.light-mode .btn-primary,
      body.light-mode .btn-success,
      body.light-mode .btn-danger,
      body.light-mode .btn-lg.btn-primary,
      body.light-mode .btn-lg.btn-success {
        color: #ffffff !important;
      }

      /* text-primary in light = black */
      body.light-mode .text-primary {
        color: #1c1e21 !important;
        text-shadow: none !important;
      }

      /* Viewer counter */
      body.light-mode #viewerCounter {
        background: #ffffff !important;
        color: #1c1e21 !important;
        border-color: #dddfe2 !important;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1) !important;
      }

      /* Upload modals */
      body.light-mode .upload-content {
        background: #ffffff !important;
        border-color: #dddfe2 !important;
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15) !important;
      }
      body.light-mode .upload-content h3,
      body.light-mode .upload-content h4,
      body.light-mode .upload-content h5,
      body.light-mode .upload-content p,
      body.light-mode .upload-content label,
      body.light-mode .upload-content span {
        color: #1c1e21 !important;
      }
      body.light-mode .upload-zone {
        border-color: #dddfe2 !important;
        background: #f0f2f5 !important;
      }
      body.light-mode .upload-zone p {
        color: #1c1e21 !important;
      }
      body.light-mode .upload-close {
        color: #1c1e21 !important;
      }

      body.light-mode .toggle-notification {
        background: #ffffff !important;
        border-color: #dddfe2 !important;
      }
      body.light-mode .toggle-notification p {
        color: #1c1e21 !important;
      }

      /* Tech icons */
      body.light-mode .tech-icon {
        border-color: #dddfe2 !important;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08) !important;
      }

      /* Scrollbar */
      body.light-mode::-webkit-scrollbar-track {
        background: #f0f2f5;
      }
      body.light-mode::-webkit-scrollbar-thumb {
        background: #bec3c9;
      }
      body.light-mode::-webkit-scrollbar-thumb:hover {
        background: #8a8d91;
      }

      body.light-mode ::selection {
        background: #1c1e21;
        color: #ffffff;
      }

      /* Light mode inline cards / forms */
      body.light-mode .upload-btn-card,
      body.light-mode .delete-btn-card,
      body.light-mode .add-new-card-btn {
        border-color: #dddfe2 !important;
        color: #1c1e21 !important;
      }
      body.light-mode .upload-btn-card.enabled,
      body.light-mode .delete-btn-card.enabled,
      body.light-mode .add-new-card-btn.enabled {
        border-color: #1c1e21 !important;
        color: #1c1e21 !important;
      }

      body.light-mode .add-card-form input,
      body.light-mode .add-card-form textarea,
      body.light-mode .inline-add-card-container input,
      body.light-mode .inline-add-card-container textarea {
        background: #f0f2f5 !important;
        color: #1c1e21 !important;
        border-color: #dddfe2 !important;
      }

      /* Light mode project image link */
      body.light-mode .project-image-link:hover {
        box-shadow: 0 0 20px rgba(28, 30, 33, 0.2) !important;
      }
      body.light-mode .project-image-link:hover::before {
        background: rgba(28, 30, 33, 0.05) !important;
      }

      /* Editable card content in light mode */
      body.light-mode .project-card .card-title.edit-mode-active,
      body.light-mode .project-card .card-text.edit-mode-active,
      body.light-mode .project-card .badge.edit-mode-active {
        border-color: #1c1e21 !important;
        background: #f0f2f5 !important;
        color: #1c1e21 !important;
      }

      /* Chatbot link color in light mode */
      body.light-mode .chat-msg a {
        color: #1c1e21 !important;
      }

      /* Energy rings and hero decorative elements */
      body.light-mode .energy-ring {
        border-color: rgba(28, 30, 33, 0.15) !important;
      }
      body.light-mode .hex-particle {
        background: rgba(28, 30, 33, 0.15) !important;
      }

      /* ===== Light Mode: Project Gallery Modal ===== */
      body.light-mode #galleryModal .modal-content {
        background: #ffffff !important;
        border: 2px solid #dddfe2 !important;
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15) !important;
        color: #1c1e21 !important;
      }
      body.light-mode #galleryModal .modal-content.text-white {
        color: #1c1e21 !important;
      }
      body.light-mode #galleryModal .modal-header {
        border-bottom: 1px solid #dddfe2 !important;
        background: #f0f2f5 !important;
      }
      body.light-mode #galleryModal .modal-title {
        color: #1c1e21 !important;
      }
      body.light-mode #galleryModal .btn-close {
        filter: none !important;
        opacity: 0.6;
      }
      body.light-mode #galleryModal .btn-close:hover {
        opacity: 1;
      }
      body.light-mode #galleryModal .modal-body {
        background: #ffffff !important;
      }
      body.light-mode .gallery-image-container {
        background: #f0f2f5 !important;
        border: 1px solid #dddfe2 !important;
      }
      body.light-mode #galleryMainImage {
        border: 3px solid #1c1e21 !important;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12) !important;
      }
      body.light-mode .gallery-controls button {
        background: #f0f2f5 !important;
        border: 2px solid #1c1e21 !important;
        color: #1c1e21 !important;
      }
      body.light-mode .gallery-controls button:hover {
        background: #1c1e21 !important;
        color: #ffffff !important;
        box-shadow: 0 4px 12px rgba(28, 30, 33, 0.25) !important;
      }
      body.light-mode #galleryCounter {
        color: #1c1e21 !important;
      }
      body.light-mode #galleryLoadingSpinner .spinner-border {
        color: #1c1e21 !important;
      }
      body.light-mode .modal-backdrop {
        background: rgba(0, 0, 0, 0.5) !important;
      }

      /* ===== ROADMAP SECTION ===== */
      .roadmap-section-title {
        font-size: 2rem;
        font-weight: 700;
        color: #00fff7;
        text-shadow: 0 0 20px #00fff7;
        margin-bottom: 0.5rem;
      }
      .roadmap-timeline {
        position: relative;
        padding: 10px 0;
      }
      .roadmap-timeline::before {
        content: "";
        position: absolute;
        left: 50%;
        top: 0;
        bottom: 0;
        width: 2px;
        background: linear-gradient(
          to bottom,
          transparent,
          #00fff7,
          #00fff7,
          transparent
        );
        transform: translateX(-50%);
        box-shadow: 0 0 8px #00fff7;
      }
      .roadmap-item {
        display: flex;
        justify-content: flex-end;
        padding-right: calc(50% + 40px);
        margin-bottom: 40px;
        position: relative;
      }
      .roadmap-item.right {
        justify-content: flex-start;
        padding-right: 0;
        padding-left: calc(50% + 40px);
      }
      .roadmap-node {
        position: absolute;
        left: 50%;
        top: 18px;
        transform: translateX(-50%);
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: #00fff7;
        box-shadow:
          0 0 12px #00fff7,
          0 0 24px #00fff740;
        z-index: 2;
        border: 2px solid #181825;
      }
      .roadmap-card {
        background: linear-gradient(135deg, #181825 0%, #1a1c2e 100%);
        border: 1.5px solid #00fff750;
        border-radius: 12px;
        padding: 20px 22px;
        max-width: 360px;
        min-width: 220px;
        position: relative;
        transition: all 0.3s ease;
      }
      .roadmap-card:hover {
        border-color: #00fff7;
        box-shadow: 0 0 20px #00fff740;
        transform: translateY(-3px);
      }
      .roadmap-year {
        font-size: 0.75rem;
        font-weight: 700;
        color: #00fff7;
        letter-spacing: 2px;
        text-transform: uppercase;
        margin-bottom: 6px;
        opacity: 0.85;
      }
      .roadmap-stage {
        font-size: 1.05rem;
        font-weight: 700;
        color: #ffffff;
        margin-bottom: 8px;
      }
      .roadmap-desc {
        font-size: 0.88rem;
        color: #b0b8c8;
        line-height: 1.6;
        margin-bottom: 10px;
      }
      .roadmap-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }
      .roadmap-tag {
        background: rgba(0, 255, 247, 0.1);
        border: 1px solid #00fff740;
        color: #00fff7;
        font-size: 0.82rem;
        padding: 1px 8px;
        border-radius: 4px;
        font-weight: 600;
        display: inline;
        white-space: nowrap;
      }
      .roadmap-current .roadmap-card {
        border-color: #00fff7;
        box-shadow: 0 0 24px #00fff750;
      }
      .roadmap-current .roadmap-node {
        width: 22px;
        height: 22px;
        box-shadow:
          0 0 18px #00fff7,
          0 0 36px #00fff780;
        animation: nodePulse 2s ease-in-out infinite;
      }
      @keyframes nodePulse {
        0%,
        100% {
          box-shadow:
            0 0 12px #00fff7,
            0 0 24px #00fff740;
        }
        50% {
          box-shadow:
            0 0 20px #00fff7,
            0 0 40px #00fff7;
        }
      }
      .roadmap-current-badge {
        display: inline-block;
        background: #00fff7;
        color: #0a0a0f;
        font-size: 0.7rem;
        font-weight: 700;
        padding: 2px 8px;
        border-radius: 20px;
        margin-bottom: 6px;
        letter-spacing: 1px;
        text-transform: uppercase;
      }

      /* Roadmap divider */
      .about-section-divider {
        border: none;
        border-top: 1.5px solid #00fff740;
        margin: 36px 0;
      }
      .hire-me-sub-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: #00fff7;
        text-shadow: 0 0 14px #00fff7;
        margin-bottom: 20px;
        text-align: center;
      }

      /* Roadmap responsive */
      @media (max-width: 768px) {
        .roadmap-timeline::before {
          left: 18px;
        }
        .roadmap-item,
        .roadmap-item.right {
          justify-content: flex-start;
          padding-right: 0;
          padding-left: 50px;
        }
        .roadmap-node {
          left: 18px;
        }
        .roadmap-card {
          max-width: 100%;
        }
      }

      /* Light mode roadmap */
      body.light-mode .roadmap-card {
        background: #ffffff !important;
        border-color: #dddfe2 !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08) !important;
      }
      body.light-mode .roadmap-card:hover {
        border-color: #1c1e21 !important;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12) !important;
      }
      body.light-mode .roadmap-stage {
        color: #1c1e21 !important;
      }
      body.light-mode .roadmap-desc {
        color: #444 !important;
      }
      body.light-mode .roadmap-tag {
        background: #f0f2f5 !important;
        border-color: #dddfe2 !important;
        color: #1c1e21 !important;
      }
      body.light-mode .roadmap-year {
        color: #555 !important;
      }
      body.light-mode .roadmap-section-title {
        color: #1c1e21 !important;
        text-shadow: none !important;
      }
      body.light-mode .hire-me-sub-title {
        color: #1c1e21 !important;
        text-shadow: none !important;
      }
      body.light-mode .roadmap-current-badge {
        background: #1c1e21 !important;
        color: #ffffff !important;
      }
      body.light-mode .roadmap-timeline::before {
        background: linear-gradient(
          to bottom,
          transparent,
          #1c1e21,
          #1c1e21,
          transparent
        ) !important;
        box-shadow: none !important;
      }
      body.light-mode .roadmap-node {
        background: #1c1e21 !important;
        box-shadow: none !important;
      }

      /* Match About + Featured Projects text UI with Roadmap content styles */
      #about .about-text {
        font-size: 0.88rem;
        line-height: 1.6;
        color: #b0b8c8;
      }
      #about .about-intro-card {
        background: linear-gradient(135deg, #181825 0%, #1a1c2e 100%);
        border: 1.5px solid #00fff750;
        border-radius: 12px;
        padding: 20px 22px;
        box-shadow: none;
        transition: all 0.3s ease;
        overflow: visible;
        animation: none;
      }
      #about .about-intro-card:hover {
        border-color: #00fff7;
        box-shadow: 0 0 20px #00fff740;
        transform: translateY(-3px);
      }
      #about .about-intro-card::before {
        display: none;
        animation: none;
      }
      #about .about-text {
        padding: 0;
        background: transparent;
        border-radius: 0;
        backdrop-filter: none;
        box-shadow: none;
      }
      #about .about-text p,
      #about .text-center p,
      #projects .text-center p,
      #projects .project-card .card-text {
        font-size: 0.88rem;
        line-height: 1.6;
        color: #b0b8c8;
      }
      #projects .project-card .card-text {
        text-align: justify !important;
        text-justify: inter-word;
      }
      #about .about-highlight {
        background: rgba(0, 255, 247, 0.1);
        border: 1px solid #00fff740;
        color: #00fff7;
        font-size: 0.82rem;
        padding: 1px 8px;
        border-radius: 4px;
        font-weight: 600;
        display: inline;
        white-space: nowrap;
      }
      #projects .project-card .card-title {
        font-size: 1.05rem;
        font-weight: 700;
        color: #ffffff !important;
        margin-bottom: 8px;
      }
      body.light-mode #about .about-text,
      body.light-mode #about .about-text p,
      body.light-mode #about .text-center p,
      body.light-mode #projects .text-center p,
      body.light-mode #projects .project-card .card-text {
        color: #444 !important;
      }
      body.light-mode #projects .project-card .card-title {
        color: #1c1e21 !important;
      }
      body.light-mode #about .about-intro-card {
        background: #ffffff !important;
        border-color: #dddfe2 !important;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08) !important;
      }
      body.light-mode #about .about-intro-card:hover {
        border-color: #1c1e21 !important;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12) !important;
      }
      body.light-mode #about .about-highlight {
        background: #f0f2f5 !important;
        border-color: #dddfe2 !important;
        color: #1c1e21 !important;
      }
    </style>
  </head>
  <body>
    <!-- Main Menu Modal -->
    <div id="mainMenuModal" class="upload-modal">
      <div class="upload-content">
        <button class="upload-close" onclick="closeMainMenu()">&times;</button>
        <h3 class="text-center mb-3" style="color: #00fff7">
          Portfolio Manager
        </h3>
        <p class="text-center" style="color: #e0e0e0">
          Upload and manage portfolio images
        </p>
        <p class="text-center text-muted" style="font-size: 0.85rem">
          Press <kbd>Ctrl+Alt+E</kbd> to toggle
        </p>

        <div class="row mt-4">
          <div class="col-12 mb-3">
            <button
              class="btn btn-primary w-100 btn-lg"
              onclick="showUploadModal()"
            >
              <i class="fas fa-camera me-2"></i>Toggle Upload Buttons
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Upload Modal -->
    <div id="uploadModal" class="upload-modal" style="display: none">
      <div class="upload-content" style="max-width: 900px">
        <button class="upload-close" onclick="closeUploadModal()">
          &times;
        </button>
        <h3 class="text-center mb-4" style="color: #00fff7">Upload Images</h3>

        <div class="row">
          <!-- Project Image Upload -->
          <div class="col-md-6 mb-3">
            <h5 class="text-center mb-3" style="color: #00fff7">
              Project Image
            </h5>
            <p class="text-center" style="color: #e0e0e0; font-size: 0.85rem">
              Update project card image
            </p>
            <p class="text-center text-muted" style="font-size: 0.75rem">
              Press <kbd>Ctrl+Alt+E</kbd> to toggle upload buttons
            </p>

            <div
              class="upload-zone"
              id="uploadZone"
              onclick="document.getElementById('fileInput').click()"
              style="min-height: 150px"
            >
              <div class="upload-icon"></div>
              <p style="color: #00fff7; font-weight: 600; font-size: 0.9rem">
                Click to upload or drag & drop
              </p>
              <p style="color: #e0e0e0; font-size: 0.8rem">
                JPG, PNG, GIF, WebP (Max 5MB each) • Multiple files supported
              </p>
            </div>

            <input
              type="file"
              id="fileInput"
              accept="image/*"
              multiple
              style="display: none"
              onchange="handleFileSelect(event)"
            />

            <img
              id="uploadPreview"
              class="upload-preview"
              alt="Preview"
              style="max-height: 120px"
            />

            <div class="text-center mt-3">
              <button
                id="uploadBtn"
                class="btn btn-primary btn-sm"
                onclick="uploadImage()"
                style="display: none"
              >
                <i class="fas fa-cloud-upload-alt me-1"></i>Upload Project Image
              </button>
            </div>

            <div
              id="uploadStatus"
              class="text-center mt-2"
              style="color: #00fff7; font-size: 0.85rem"
            ></div>
          </div>

          <!-- Profile Picture Upload -->
          <div class="col-md-6 mb-3">
            <h5 class="text-center mb-3" style="color: #00fff7">
              Profile Picture
            </h5>
            <p class="text-center" style="color: #e0e0e0; font-size: 0.85rem">
              Update your profile picture across the site
            </p>
            <p
              class="text-center text-muted"
              style="font-size: 0.75rem; opacity: 0"
            >
              Spacing
            </p>

            <div
              class="upload-zone"
              id="profileUploadZone"
              onclick="document.getElementById('profileFileInput').click()"
              style="min-height: 150px"
            >
              <div class="upload-icon"></div>
              <p style="color: #00fff7; font-weight: 600; font-size: 0.9rem">
                Click to upload or drag & drop
              </p>
              <p style="color: #e0e0e0; font-size: 0.8rem">
                JPG, PNG, GIF, WebP (Max 5MB)
              </p>
            </div>

            <input
              type="file"
              id="profileFileInput"
              accept="image/*"
              style="display: none"
              onchange="handleProfileFileSelect(event)"
            />

            <img
              id="profileUploadPreview"
              class="upload-preview"
              alt="Preview"
              style="max-height: 120px"
            />

            <div class="text-center mt-3">
              <button
                id="profileUploadBtn"
                class="btn btn-primary btn-sm"
                onclick="uploadProfilePicture()"
                style="display: none"
              >
                <i class="fas fa-cloud-upload-alt me-1"></i>Upload Profile
                Picture
              </button>
            </div>

            <div
              id="profileUploadStatus"
              class="text-center mt-2"
              style="color: #00fff7; font-size: 0.85rem"
            ></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Gallery Modal (manual viewer, no slideshow) -->
    <div class="modal fade" id="galleryModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-white">
          <div class="modal-header">
            <h5 class="modal-title" style="color: #00fff7">PROJECT GALLERY</h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="gallery-controls">
              <button id="galleryPrevBtn">
                <i class="fas fa-chevron-left"></i>
              </button>
              <div
                id="galleryCounter"
                class="text-center"
                style="flex: 1; color: #00fff7"
              ></div>
              <button id="galleryNextBtn">
                <i class="fas fa-chevron-right"></i>
              </button>
            </div>
            <div class="gallery-image-container">
              <div
                id="galleryLoadingSpinner"
                style="
                  position: absolute;
                  top: 50%;
                  left: 50%;
                  transform: translate(-50%, -50%);
                  display: none;
                "
              >
                <div
                  class="spinner-border"
                  role="status"
                  style="width: 3rem; height: 3rem; color: #00fff7"
                >
                  <span class="visually-hidden">Loading...</span>
                </div>
              </div>
              <img
                id="galleryMainImage"
                src=""
                alt="Gallery"
                style="display: none"
              />
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Toggle Notification -->
    <div id="toggleNotification" class="toggle-notification">
      <p class="mb-0" style="color: #00fff7; font-weight: 600">
        <i class="fas fa-camera me-2"></i
        ><span id="notificationText">Upload buttons enabled!</span>
      </p>
    </div>

    <!-- Navigation -->
    <nav
      class="navbar navbar-expand-lg navbar-dark fixed-top"
      style="background: #000000"
    >
      <div class="container">
        <a class="navbar-brand" href="#home">
          <input
            type="file"
            id="profileFileInput"
            accept="image/*"
            style="display: none"
            onchange="handleProfileFileSelect(event)"
          />
          <span class="navbar-text-desktop">Welcome to my Portfolio!</span>
          <span class="navbar-text-mobile">Explore My Work!</span>
        </a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse text-center" id="navbarNav">
          <ul class="navbar-nav mx-auto">
            <li class="nav-item">
              <a class="nav-link text-center text-lg-start" href="#home"
                >Home</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link text-center text-lg-start" href="#about"
                >About</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link text-center text-lg-start" href="#roadmap"
                >Roadmap</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link text-center text-lg-start" href="#tech"
                >Tech Stack</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link text-center text-lg-start" href="#projects"
                >Projects</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link text-center text-lg-start" href="#contact"
                >Contact</a
              >
            </li>
          </ul>
          <!-- Dark/Light Mode Toggle -->
          <button
            class="theme-toggle-btn"
            id="themeToggleBtn"
            onclick="toggleTheme()"
            title="Switch theme"
          >
            <i class="fas fa-moon icon-moon"></i>
            <i class="fas fa-sun icon-sun"></i>
          </button>
        </div>
      </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
      <div class="container">
        <div class="hero-profile-container">
          <div class="hero-content">
            <!-- Mobile Profile Picture (circular) - Advanced Cybertron UI -->
            <div class="hero-mobile-profile" style="display: none">
              <!-- Energy Rings (expanding waves) -->
              <div class="energy-ring"></div>
              <div class="energy-ring"></div>
              <div class="energy-ring"></div>

              <!-- Profile Image -->
              <img
                src="./RUSSEL.png"
                alt="Jan Russel E. Peñafiel - Profile Picture"
              />
            </div>

            <h1 class="display-4 fw-bold">Jan Russel E. Peñafiel</h1>
            <p
              class="lead mt-3 text-center"
              style="font-size: 1.3rem; font-weight: 600; color: #00fff7"
            >
              Open for Commissions | Freelance Web Developer
            </p>

            <div class="hero-actions">
              <a
                href="https://github.com/Jan-Russel-Penafiel"
                class="badge-custom"
                target="_blank"
              >
                <i class="fab fa-github me-2"></i>GitHub - View My Projects
              </a>
              <a
                href="https://www.linkedin.com/in/jan-russel-peñafiel-a1799036b"
                class="badge-custom"
                target="_blank"
              >
                <i class="fab fa-linkedin me-2"></i>LinkedIn - Connect With Me
              </a>
              <a href="./resume.pdf" class="badge-custom" download>
                <i class="fas fa-file-pdf me-2"></i>Resume - View Complete PDF
              </a>
              <a
                href="https://www.facebook.com/share/1DmXaiWrjm/"
                target="_blank"
                rel="noopener noreferrer"
                class="badge-custom"
              >
                <i class="fas fa-building me-2"></i>Development Team: Team
                AsyncX
              </a>
              <a
                href="https://maps.app.goo.gl/A7iNi3GtkMFKG2co6"
                target="_blank"
                rel="noopener noreferrer"
                class="badge-custom"
              >
                <i class="fas fa-map-marker-alt me-2"></i>Location: Panay, Santo
                Niño, South Cotabato
              </a>
            </div>
          </div>

          <div class="hero-profile-picture">
            <div class="hero-orbit orbit-outer"></div>
            <div class="hero-orbit orbit-inner"></div>
            <img
              id="heroProfilePicture"
              src="./RUSSEL.png"
              alt="Jan Russel E. Peñafiel - Profile Picture"
              title="Profile picture"
            />
            <button
              id="profileUploadToggleBtn"
              class="upload-btn-card"
              onclick="triggerProfilePictureSelection()"
              title="Upload Profile Picture (Ctrl+Alt+E)"
            >
              <i class="fas fa-camera"></i>
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Tech Stack Section -->
    <section id="tech" class="py-5" style="background: #000000">
      <div class="container">
        <div class="text-center mb-4">
          <h2 class="display-6 fw-bold roadmap-section-title">TECH STACK</h2>
          <p style="color: #b0b8c8; margin-top: 0.5rem">
            The tools I use to build fast, clean, and scalable web systems
          </p>
        </div>

        <div class="row">
          <div class="col-12 mb-3">
            <div class="project-card card h-100">
              <div class="card-body p-3">
                <div class="text-center mb-3">
                  <h6 class="fw-bold mb-2">Languages & Frameworks</h6>
                  <div
                    class="d-flex justify-content-center align-items-start flex-wrap"
                    style="gap: 20px"
                  >
                    <div style="text-align: center">
                      <img
                        src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/php/php-original.svg"
                        alt="PHP"
                        class="tech-icon"
                        style="height: 80px; width: 80px"
                      />
                      <div style="font-size: 0.55rem; margin-top: 4px">PHP</div>
                    </div>
                    <div style="text-align: center">
                      <img
                        src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/codeigniter/codeigniter-plain.svg"
                        alt="CodeIgniter"
                        class="tech-icon"
                        style="height: 80px; width: 80px"
                      />
                      <div style="font-size: 0.55rem; margin-top: 4px">
                        CodeIgniter 4
                      </div>
                    </div>
                    <div style="text-align: center">
                      <img
                        src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg"
                        alt="JavaScript"
                        class="tech-icon"
                        style="height: 80px; width: 80px"
                      />
                      <div style="font-size: 0.55rem; margin-top: 4px">
                        JavaScript
                      </div>
                    </div>
                    <div style="text-align: center">
                      <img
                        src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/tailwindcss/tailwindcss-original.svg"
                        alt="Tailwind CSS"
                        class="tech-icon"
                        style="height: 80px; width: 80px"
                      />
                      <div style="font-size: 0.55rem; margin-top: 4px">
                        Tailwind CSS
                      </div>
                    </div>
                    <div style="text-align: center">
                      <img
                        src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/bootstrap/bootstrap-original.svg"
                        alt="Bootstrap"
                        class="tech-icon"
                        style="height: 80px; width: 80px"
                      />
                      <div style="font-size: 0.55rem; margin-top: 4px">
                        Bootstrap
                      </div>
                    </div>
                  </div>
                </div>
                <div class="text-center mb-3">
                  <h6 class="fw-bold mb-2">Database & Tools</h6>
                  <div
                    class="d-flex justify-content-center align-items-start flex-wrap"
                    style="gap: 20px"
                  >
                    <div style="text-align: center">
                      <img
                        src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mysql/mysql-original.svg"
                        alt="MySQL"
                        class="tech-icon"
                        style="height: 80px; width: 80px"
                      />
                      <div style="font-size: 0.55rem; margin-top: 4px">
                        MySQL
                      </div>
                    </div>
                    <div style="text-align: center">
                      <img
                        src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/apache/apache-original.svg"
                        alt="Apache"
                        class="tech-icon"
                        style="height: 80px; width: 80px"
                      />
                      <div style="font-size: 0.55rem; margin-top: 4px">
                        Apache
                      </div>
                    </div>
                    <div style="text-align: center">
                      <img
                        src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/git/git-original.svg"
                        alt="Git"
                        class="tech-icon"
                        style="height: 80px; width: 80px"
                      />
                      <div style="font-size: 0.55rem; margin-top: 4px">Git</div>
                    </div>
                    <div style="text-align: center">
                      <span
                        class="tech-icon"
                        style="
                          display: inline-flex;
                          align-items: center;
                          justify-content: center;
                          background: #fff;
                          border-radius: 50%;
                          padding: 4px;
                          height: 80px;
                          width: 80px;
                        "
                      >
                        <img
                          src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original.svg"
                          alt="GitHub"
                          style="height: 72px; width: 72px"
                        />
                      </span>
                      <div style="font-size: 0.55rem; margin-top: 4px">
                        GitHub
                      </div>
                    </div>
                  </div>
                </div>
                <div class="text-center">
                  <h6 class="fw-bold mb-2">IDEs & AI Tools</h6>
                  <div
                    class="d-flex justify-content-center align-items-start flex-wrap"
                    style="gap: 20px"
                  >
                    <div style="text-align: center">
                      <img
                        src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/vscode/vscode-original.svg"
                        alt="VSCode"
                        class="tech-icon"
                        style="height: 80px; width: 80px"
                      />
                      <div style="font-size: 0.55rem; margin-top: 4px">
                        VSCode
                      </div>
                    </div>
                    <div style="text-align: center">
                      <img
                        src="https://upload.wikimedia.org/wikipedia/commons/0/04/ChatGPT_logo.svg"
                        alt="ChatGPT"
                        class="tech-icon"
                        style="height: 80px; width: 80px"
                      />
                      <div style="font-size: 0.55rem; margin-top: 4px">
                        ChatGPT
                      </div>
                    </div>

                    <div style="text-align: center">
                      <img
                        src="https://github.githubassets.com/images/modules/site/copilot/copilot.png"
                        alt="GitHub Copilot"
                        class="tech-icon"
                        style="height: 80px; width: 80px"
                      />
                      <div style="font-size: 0.55rem; margin-top: 4px">
                        Copilot
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- About Section (combined: About Me + Why Hire Me) -->
    <section id="about" class="py-5">
      <div class="container">
        <div class="text-center mb-5">
          <h2 class="display-6 fw-bold roadmap-section-title">ABOUT ME</h2>
          <p class="roadmap-desc" style="margin-top: 0.5rem">
            Who I am, what I build, and why you should work with me
          </p>
        </div>

        <div class="about-intro-card">
          <div class="about-content-wrapper">
            <h3
              class="roadmap-section-title text-center"
              style="font-size: 1.8rem; margin-bottom: 1.5rem"
            >
              Hey, I'm Jan Russel! <i class="fas fa-hand-wave"></i>
            </h3>

            <div class="about-text">
              <p class="roadmap-desc" style="margin-bottom: 1.5rem">
                I am a Bachelor of Science in Information Technology student at
                Sultan Kudarat State University – Isulan Campus, specializing in
                web technologies. I build clean, functional, and user-focused
                web applications, including government systems, POS systems,
                healthcare systems, and custom solutions.
              </p>
              <p class="roadmap-desc" style="margin-bottom: 1.5rem">
                I turn ideas into production-ready systems fast while keeping
                code quality high. I use AI-assisted development to speed up
                work without lowering standards. I solve problems by breaking
                them down, exploring practical options, and writing maintainable
                code even under pressure.
              </p>
              <p class="roadmap-desc" style="margin-bottom: 1.5rem">
                I work well with others, welcome feedback, and share knowledge openly. I stay focused until tasks are completed and delivered on time. You can expect consistent progress, strong ownership of responsibilities, and reliable results. I continuously improve my skills to keep up with modern tools and industry practices. I adapt quickly to new technologies and workflows to deliver better solutions. I take pride in creating systems that are intuitive and easy to use for end users. I aim to make every project not just functional, but efficient and scalable for future growth.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Web Development Roadmap Section -->
    <section id="roadmap" class="py-5">
      <div class="container">
        <div class="text-center mb-5">
          <h2 class="display-6 fw-bold roadmap-section-title">
            MY WEB DEVELOPMENT ROADMAP
          </h2>
          <p style="color: #b0b8c8; margin-top: 0.5rem">
            The path I walked — from first line of code to full-stack systems
          </p>
        </div>

        <div class="roadmap-timeline">
          <!-- Stage 1 -->
          <div class="roadmap-item">
            <div class="roadmap-node"></div>
            <div class="roadmap-card">
              <div class="roadmap-year">2023 — Early</div>
              <div class="roadmap-stage">The Foundation</div>
              <div class="roadmap-desc">
                Started the journey with web fundamentals using
                <span class="roadmap-tag">HTML5</span>,
                <span class="roadmap-tag">CSS3</span>, and
                <span class="roadmap-tag">JavaScript</span>. Learned how
                browsers work, how pages are structured.
              </div>
            </div>
          </div>

          <!-- Stage 2 -->
          <div class="roadmap-item right">
            <div class="roadmap-node"></div>
            <div class="roadmap-card">
              <div class="roadmap-year">2023 — Late</div>
              <div class="roadmap-stage">Backend Basics</div>
              <div class="roadmap-desc">
                Dove into server-side programming with
                <span class="roadmap-tag">PHP</span> and
                <span class="roadmap-tag">MySQL</span>, running a local
                environment on <span class="roadmap-tag">XAMPP</span>. Learned
                how to connect web pages to databases and handle
                <span class="roadmap-tag">CRUD Operations</span>, user accounts,
                and file uploads.
              </div>
            </div>
          </div>

          <!-- Stage 3 -->
          <div class="roadmap-item">
            <div class="roadmap-node"></div>
            <div class="roadmap-card">
              <div class="roadmap-year">2024 - 2025</div>
              <div class="roadmap-stage">First Real Systems</div>
              <div class="roadmap-desc">
                Built actual systems deployed in real environments —
                <span class="roadmap-tag">Healthcare Systems</span> and
                <span class="roadmap-tag">POS Systems</span> with full
                <span class="roadmap-tag">Authentication</span>,
                <span class="roadmap-tag">Role Management</span>, and build
                <span class="roadmap-tag">Responsive Design</span> web applications.
              </div>
            </div>
          </div>

          <!-- Stage 4 -->
          <div class="roadmap-item right">
            <div class="roadmap-node"></div>
            <div class="roadmap-card">
              <div class="roadmap-year">2025 - 2026</div>
              <div class="roadmap-stage">Frameworks & Structure</div>
              <div class="roadmap-desc">
                Adopted <span class="roadmap-tag">Bootstrap 5</span> for rapid
                responsive styling and
                <span class="roadmap-tag">CodeIgniter 4</span> for structured
                backend development. Shifted to a proper
                <span class="roadmap-tag">MVC Pattern</span> workflow with
                clean, organized code.
              </div>
            </div>
          </div>

          <!-- Stage 5 -->
          <div class="roadmap-item">
            <div class="roadmap-node"></div>
            <div class="roadmap-card">
              <div class="roadmap-year">2025 - 2026</div>
              <div class="roadmap-stage">Full-Stack Mastery</div>
              <div class="roadmap-desc">
                Leveled up with <span class="roadmap-tag">REST APIs</span> and
                <span class="roadmap-tag">AJAX</span> for real-time features,
                building complex
                <span class="roadmap-tag">Government Systems</span>. I have built so many projects, including 5 commissioned capstone projects.
              </div>
            </div>
          </div>

          <!-- Stage 6 — Current -->
          <div class="roadmap-item right roadmap-current">
            <div class="roadmap-node"></div>
            <div class="roadmap-card">
              <div class="roadmap-current-badge">Now</div>
              <div class="roadmap-year">2026</div>
              <div class="roadmap-stage">AI-Assisted Development & Beyond</div>
              <div class="roadmap-desc">
                Integrating
                <span class="roadmap-tag">AI Integration</span> tools like the
                <span class="roadmap-tag">Gemini API</span> into the workflow
                for faster, smarter delivery. Focused on
                <span class="roadmap-tag">UI/UX Design</span> polish and
                <span class="roadmap-tag">Clean Backend Architecture</span> — currently
                open for <span class="roadmap-tag">Freelance</span> commissions.
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="py-5">
      <div class="container">
        <div class="text-center mb-5">
          <h2 class="roadmap-section-title">FEATURED PROJECTS</h2>
          <p class="roadmap-desc" style="margin-top: 0.5rem">
            Real-world systems built with purpose, precision, and clean code
          </p>
        </div>

        <!-- All Projects -->
        <div class="row mb-5" id="flagshipMainRow">
          <div class="col-lg-6 mb-3">
            <div
              class="project-card card h-100"
              data-project-id="sksu-monitoring"
            >
              <button
                class="upload-btn-card"
                onclick="openUploadModal('sksu-monitoring')"
                title="Upload Image (Ctrl+Alt+E)"
              >
                <i class="fas fa-camera"></i>
              </button>
              <div class="card-body p-3">
                <div class="project-meta-row">
                  <span class="badge border border-info text-info"
                    >Capstone Project</span
                  >
                  <span class="badge border border-warning text-warning"
                    >Ongoing</span
                  >
                </div>
                <div
                  class="text-center project-gallery"
                  data-images='[".\/uploads\/project_69638f1d566493.07417156.png",".\/uploads\/project_69638f1d573987.48846785.png",".\/uploads\/project_69638f1d57b731.29356287.png",".\/uploads\/project_69638f1d584cd8.34586166.png",".\/uploads\/project_69638f1d58bf59.63664796.png",".\/uploads\/project_69638f1d5937e4.06616341.png",".\/uploads\/project_69638f1d59bbc0.52050644.png",".\/uploads\/project_69638f1d5a6642.83108723.png",".\/uploads\/project_69638f1d5b01c5.98161662.png",".\/uploads\/project_69638f1d5b8c32.66865133.png",".\/uploads\/project_69638f1d603760.79090788.png",".\/uploads\/project_69638f1d60a156.53370856.png",".\/uploads\/project_69638f1d6105d9.77494389.png",".\/uploads\/project_69638f1d616ca2.63867739.png",".\/uploads\/project_69638f1d620591.91616121.png",".\/uploads\/project_69638f1d62bf09.94020648.png",".\/uploads\/project_69638f1d632d85.32564269.png",".\/uploads\/project_69638f1d639106.05786579.png",".\/uploads\/project_69638f1d63f689.56496410.png",".\/uploads\/project_69638f1d6461e9.01763903.png",".\/uploads\/project_69638f1d64c494.70304339.png",".\/uploads\/project_69638f1d6526b3.59984604.png",".\/uploads\/project_69638f1d659829.20339282.png"]'
                >
                  <a
                    href="./uploads/project_69638f1d566493.07417156.png"
                    target="_blank"
                    class="project-image-link"
                    data-images='[".\/uploads\/project_69638f1d566493.07417156.png",".\/uploads\/project_69638f1d573987.48846785.png",".\/uploads\/project_69638f1d57b731.29356287.png",".\/uploads\/project_69638f1d584cd8.34586166.png",".\/uploads\/project_69638f1d58bf59.63664796.png",".\/uploads\/project_69638f1d5937e4.06616341.png",".\/uploads\/project_69638f1d59bbc0.52050644.png",".\/uploads\/project_69638f1d5a6642.83108723.png",".\/uploads\/project_69638f1d5b01c5.98161662.png",".\/uploads\/project_69638f1d5b8c32.66865133.png",".\/uploads\/project_69638f1d603760.79090788.png",".\/uploads\/project_69638f1d60a156.53370856.png",".\/uploads\/project_69638f1d6105d9.77494389.png",".\/uploads\/project_69638f1d616ca2.63867739.png",".\/uploads\/project_69638f1d620591.91616121.png",".\/uploads\/project_69638f1d62bf09.94020648.png",".\/uploads\/project_69638f1d632d85.32564269.png",".\/uploads\/project_69638f1d639106.05786579.png",".\/uploads\/project_69638f1d63f689.56496410.png",".\/uploads\/project_69638f1d6461e9.01763903.png",".\/uploads\/project_69638f1d64c494.70304339.png",".\/uploads\/project_69638f1d6526b3.59984604.png",".\/uploads\/project_69638f1d659829.20339282.png"]'
                  >
                    <img
                      src="./uploads/project_69638f1d566493.07417156.png"
                      alt="SKSU Scholarship Monitoring System"
                      class="img-fluid rounded mb-2"
                      loading="eager"
                      style="max-height: 150px"
                      data-images='[".\/uploads\/project_69638f1d566493.07417156.png",".\/uploads\/project_69638f1d573987.48846785.png",".\/uploads\/project_69638f1d57b731.29356287.png",".\/uploads\/project_69638f1d584cd8.34586166.png",".\/uploads\/project_69638f1d58bf59.63664796.png",".\/uploads\/project_69638f1d5937e4.06616341.png",".\/uploads\/project_69638f1d59bbc0.52050644.png",".\/uploads\/project_69638f1d5a6642.83108723.png",".\/uploads\/project_69638f1d5b01c5.98161662.png",".\/uploads\/project_69638f1d5b8c32.66865133.png",".\/uploads\/project_69638f1d603760.79090788.png",".\/uploads\/project_69638f1d60a156.53370856.png",".\/uploads\/project_69638f1d6105d9.77494389.png",".\/uploads\/project_69638f1d616ca2.63867739.png",".\/uploads\/project_69638f1d620591.91616121.png",".\/uploads\/project_69638f1d62bf09.94020648.png",".\/uploads\/project_69638f1d632d85.32564269.png",".\/uploads\/project_69638f1d639106.05786579.png",".\/uploads\/project_69638f1d63f689.56496410.png",".\/uploads\/project_69638f1d6461e9.01763903.png",".\/uploads\/project_69638f1d64c494.70304339.png",".\/uploads\/project_69638f1d6526b3.59984604.png",".\/uploads\/project_69638f1d659829.20339282.png"]'
                    />
                  </a>
                </div>
                <h5 class="card-title fw-bold text-center text-primary">
                  SKSU Scholarship Management System
                </h5>
                <p class="card-text text-center">
                  The general objective of the study is to design and develop an
                  Integrated Scholarship Management System that centralizes
                  scholarship processing from application validation to
                  disbursement and liquidation. The system aims to allow the
                  Scholarship Chairman and Campus Registrar to upload CHED and
                  enrollment masterlists for automated comparison to validate
                  enrolled students, support Scholarship Coordinators in
                  verifying eligibility, and generate payroll and billing forms
                  for qualified scholars. It will provide a dislisting module
                  for unenrolled students, manage disbursement and liquidation
                  through manual and file-based data entry, support ATM-based
                  liquidation with verified proof display, and implement an
                  automated approval workflow that routes liquidation documents
                  from the Scholarship Chairman to the Accounting Officer for
                  final processing.
                </p>
              </div>
            </div>
          </div>
          <div class="col-lg-6 mb-3">
            <div class="project-card card h-100" data-project-id="russels-hr">
              <button
                class="upload-btn-card"
                onclick="openUploadModal('russels-hr')"
                title="Upload Image (Ctrl+Alt+E)"
              >
                <i class="fas fa-camera"></i>
              </button>
              <div class="card-body p-3">
                <div class="project-meta-row">
                  <span class="badge border border-info text-info"
                    >Personal Project</span
                  >
                  <span class="badge border border-success text-success"
                    >Completed</span
                  >
                </div>
                <div
                  class="text-center project-gallery"
                  data-images='[".\/uploads\/project_6963916d3b9920.93664082.png",".\/uploads\/project_6963916d3c6017.82995384.png",".\/uploads\/project_6963916d3cf4a3.15158706.png",".\/uploads\/project_6963916d3d9031.44243014.png",".\/uploads\/project_6963916d3e2fb4.58110586.png",".\/uploads\/project_6963916d3f1893.25639704.png",".\/uploads\/project_6963916d3fb204.45595364.png",".\/uploads\/project_6963916d406198.72110914.png",".\/uploads\/project_6963916d40f5c6.38629662.png",".\/uploads\/project_6963916d418728.95907557.png",".\/uploads\/project_6963916d421c33.59780744.png"]'
                >
                  <a
                    href="./uploads/project_6963916d3b9920.93664082.png"
                    target="_blank"
                    class="project-image-link"
                    data-images='[".\/uploads\/project_6963916d3b9920.93664082.png",".\/uploads\/project_6963916d3c6017.82995384.png",".\/uploads\/project_6963916d3cf4a3.15158706.png",".\/uploads\/project_6963916d3d9031.44243014.png",".\/uploads\/project_6963916d3e2fb4.58110586.png",".\/uploads\/project_6963916d3f1893.25639704.png",".\/uploads\/project_6963916d3fb204.45595364.png",".\/uploads\/project_6963916d406198.72110914.png",".\/uploads\/project_6963916d40f5c6.38629662.png",".\/uploads\/project_6963916d418728.95907557.png",".\/uploads\/project_6963916d421c33.59780744.png"]'
                  >
                    <img
                      src="./uploads/project_6963916d3b9920.93664082.png"
                      alt="Russel's Chicken Delights HR System"
                      class="img-fluid rounded mb-2"
                      loading="eager"
                      style="max-height: 150px"
                      data-images='[".\/uploads\/project_6963916d3b9920.93664082.png",".\/uploads\/project_6963916d3c6017.82995384.png",".\/uploads\/project_6963916d3cf4a3.15158706.png",".\/uploads\/project_6963916d3d9031.44243014.png",".\/uploads\/project_6963916d3e2fb4.58110586.png",".\/uploads\/project_6963916d3f1893.25639704.png",".\/uploads\/project_6963916d3fb204.45595364.png",".\/uploads\/project_6963916d406198.72110914.png",".\/uploads\/project_6963916d40f5c6.38629662.png",".\/uploads\/project_6963916d418728.95907557.png",".\/uploads\/project_6963916d421c33.59780744.png"]'
                    />
                  </a>
                </div>
                <h5 class="card-title fw-bold text-center text-primary">
                  Russel's Chicken Delights HR System
                </h5>
                <p class="card-text text-center">
                  The general objective of the study is to design and develop
                  Russel's Chicken Delights HR System, a comprehensive human
                  resource management platform for the restaurant chain that
                  centralizes employee data management, payroll processing,
                  recruitment activities, task tracking, scheduling, and
                  performance evaluation. The system aims to allow HR personnel
                  and branch managers to maintain accurate employee records,
                  automate payroll processing, and manage recruitment. It will
                  include a QR code-based recruitment feature that, when
                  scanned, provides applicants with an online recruitment form,
                  streamlining the hiring process, support task assignment and
                  performance monitoring, and implement an automated approval
                  workflow that routes requests from branch managers to central
                  HR for final processing to improve overall efficiency.
                </p>
              </div>
            </div>
          </div>

          <div class="col-lg-6 mb-3">
            <div class="project-card card h-100" data-project-id="kes-smart">
              <button
                class="upload-btn-card"
                onclick="openUploadModal('kes-smart')"
                title="Upload Image (Ctrl+Alt+E)"
              >
                <i class="fas fa-camera"></i>
              </button>
              <div class="card-body p-3">
                <div class="project-meta-row">
                  <span class="badge border border-info text-info"
                    >Capstone Project</span
                  >
                  <span class="badge border border-success text-success"
                    >Completed</span
                  >
                </div>
                <div
                  class="text-center project-gallery"
                  data-images='[".\/uploads\/project_6963928871e9b9.45211521.png",".\/uploads\/project_6963928872a256.64735234.png",".\/uploads\/project_6963928873a0c8.59184306.png",".\/uploads\/project_69639288746ab8.51726085.png",".\/uploads\/project_69639288753443.17118809.png",".\/uploads\/project_6963928875bab0.97167972.png",".\/uploads\/project_69639288762597.55350350.png",".\/uploads\/project_69639288768655.51179090.png",".\/uploads\/project_69639288771bc0.61842292.png",".\/uploads\/project_6963928877aca9.34054507.png",".\/uploads\/project_696392887882c2.74247703.png",".\/uploads\/project_6963928878e8e4.31742161.png",".\/uploads\/project_69639288794108.95083133.png",".\/uploads\/project_696392887991b8.03357643.png",".\/uploads\/project_6963928879e208.62982145.png",".\/uploads\/project_696392887a3312.63000056.png",".\/uploads\/project_696392887a83b0.40566005.png"]'
                >
                  <a
                    href="./uploads/project_6963928871e9b9.45211521.png"
                    target="_blank"
                    class="project-image-link"
                    data-images='[".\/uploads\/project_6963928871e9b9.45211521.png",".\/uploads\/project_6963928872a256.64735234.png",".\/uploads\/project_6963928873a0c8.59184306.png",".\/uploads\/project_69639288746ab8.51726085.png",".\/uploads\/project_69639288753443.17118809.png",".\/uploads\/project_6963928875bab0.97167972.png",".\/uploads\/project_69639288762597.55350350.png",".\/uploads\/project_69639288768655.51179090.png",".\/uploads\/project_69639288771bc0.61842292.png",".\/uploads\/project_6963928877aca9.34054507.png",".\/uploads\/project_696392887882c2.74247703.png",".\/uploads\/project_6963928878e8e4.31742161.png",".\/uploads\/project_69639288794108.95083133.png",".\/uploads\/project_696392887991b8.03357643.png",".\/uploads\/project_6963928879e208.62982145.png",".\/uploads\/project_696392887a3312.63000056.png",".\/uploads\/project_696392887a83b0.40566005.png"]'
                  >
                    <img
                      src="./uploads/project_6963928871e9b9.45211521.png"
                      alt="KES-SMART"
                      class="img-fluid rounded mb-2"
                      loading="eager"
                      style="max-height: 150px"
                      data-images='[".\/uploads\/project_6963928871e9b9.45211521.png",".\/uploads\/project_6963928872a256.64735234.png",".\/uploads\/project_6963928873a0c8.59184306.png",".\/uploads\/project_69639288746ab8.51726085.png",".\/uploads\/project_69639288753443.17118809.png",".\/uploads\/project_6963928875bab0.97167972.png",".\/uploads\/project_69639288762597.55350350.png",".\/uploads\/project_69639288768655.51179090.png",".\/uploads\/project_69639288771bc0.61842292.png",".\/uploads\/project_6963928877aca9.34054507.png",".\/uploads\/project_696392887882c2.74247703.png",".\/uploads\/project_6963928878e8e4.31742161.png",".\/uploads\/project_69639288794108.95083133.png",".\/uploads\/project_696392887991b8.03357643.png",".\/uploads\/project_6963928879e208.62982145.png",".\/uploads\/project_696392887a3312.63000056.png",".\/uploads\/project_696392887a83b0.40566005.png"]'
                    />
                  </a>
                </div>
                <h5 class="card-title fw-bold text-center text-primary">
                  KES-SMART
                </h5>
                <p class="card-text text-center">
                  The general objective of the study is to design and develop a
                  mobile-based attendance monitoring system that manages user
                  information and accounts and provides role-based interfaces
                  for administrators, teachers, students, and parents. The
                  system aims to support efficient attendance tracking through
                  QR code scanning, allow parents to view attendance records
                  automatically, apply automated evaluation features, and send
                  SMS notifications to parents in real time. It also seeks to
                  generate structured reports, including student lists by
                  section, student information sheets, QR codes, and detailed
                  attendance records per section and per student, to support
                  monitoring and record management. The system will also improve
                  data accuracy by reducing manual input errors and speeding up
                  attendance recording in classrooms. It will provide secure
                  data storage with controlled access to protect user
                  information and maintain data integrity.
                </p>
              </div>
            </div>
          </div>

          <div class="col-lg-6 mb-3">
            <div class="project-card card h-100" data-project-id="bhc-connect">
              <button
                class="upload-btn-card"
                onclick="openUploadModal('bhc-connect')"
                title="Upload Image (Ctrl+Alt+E)"
              >
                <i class="fas fa-camera"></i>
              </button>
              <div class="card-body p-3">
                <div class="project-meta-row">
                  <span class="badge border border-info text-info"
                    >Capstone Project</span
                  >
                  <span class="badge border border-success text-success"
                    >Completed</span
                  >
                </div>
                <div
                  class="text-center project-gallery"
                  data-images='[".\/uploads\/project_69639455d37210.98618894.png",".\/uploads\/project_69639455d44b95.47363570.png",".\/uploads\/project_69639455d4f9a8.44792674.png",".\/uploads\/project_69639455d5a4e2.03873693.png",".\/uploads\/project_69639455d64dc4.90351643.png",".\/uploads\/project_69639455d6fb34.79227403.png",".\/uploads\/project_69639455d7cb36.29953024.png",".\/uploads\/project_69639455d8a6d4.93119391.png",".\/uploads\/project_69639455d96567.16491329.png",".\/uploads\/project_69639455d9f495.77196481.png",".\/uploads\/project_69639455da8122.19553864.png",".\/uploads\/project_69639455db1a61.66636192.png",".\/uploads\/project_69639455dbafa9.56685417.png",".\/uploads\/project_69639455dc79e0.40866983.png",".\/uploads\/project_69639455dd3336.20215240.png",".\/uploads\/project_69639455ddbec8.15392502.png",".\/uploads\/project_69639455de3085.88362304.png",".\/uploads\/project_69639455deb7e9.82782712.png",".\/uploads\/project_69639455df4c43.34350655.png",".\/uploads\/project_69639455dfc6f3.71219670.png",".\/uploads\/project_69639455e061f7.45118771.png",".\/uploads\/project_69639455e106f6.67444603.png",".\/uploads\/project_69639455e19e08.60045063.png",".\/uploads\/project_69639455e21728.23544986.png",".\/uploads\/project_69639455e2a0b5.83853003.png",".\/uploads\/project_69639455e30667.06973943.png",".\/uploads\/project_69639455e3a085.21937140.png",".\/uploads\/project_69639455e43041.74638899.png",".\/uploads\/project_69639455e497b1.13613672.png"]'
                >
                  <a
                    href="./uploads/project_69639455d37210.98618894.png"
                    target="_blank"
                    class="project-image-link"
                    data-images='[".\/uploads\/project_69639455d37210.98618894.png",".\/uploads\/project_69639455d44b95.47363570.png",".\/uploads\/project_69639455d4f9a8.44792674.png",".\/uploads\/project_69639455d5a4e2.03873693.png",".\/uploads\/project_69639455d64dc4.90351643.png",".\/uploads\/project_69639455d6fb34.79227403.png",".\/uploads\/project_69639455d7cb36.29953024.png",".\/uploads\/project_69639455d8a6d4.93119391.png",".\/uploads\/project_69639455d96567.16491329.png",".\/uploads\/project_69639455d9f495.77196481.png",".\/uploads\/project_69639455da8122.19553864.png",".\/uploads\/project_69639455db1a61.66636192.png",".\/uploads\/project_69639455dbafa9.56685417.png",".\/uploads\/project_69639455dc79e0.40866983.png",".\/uploads\/project_69639455dd3336.20215240.png",".\/uploads\/project_69639455ddbec8.15392502.png",".\/uploads\/project_69639455de3085.88362304.png",".\/uploads\/project_69639455deb7e9.82782712.png",".\/uploads\/project_69639455df4c43.34350655.png",".\/uploads\/project_69639455dfc6f3.71219670.png",".\/uploads\/project_69639455e061f7.45118771.png",".\/uploads\/project_69639455e106f6.67444603.png",".\/uploads\/project_69639455e19e08.60045063.png",".\/uploads\/project_69639455e21728.23544986.png",".\/uploads\/project_69639455e2a0b5.83853003.png",".\/uploads\/project_69639455e30667.06973943.png",".\/uploads\/project_69639455e3a085.21937140.png",".\/uploads\/project_69639455e43041.74638899.png",".\/uploads\/project_69639455e497b1.13613672.png"]'
                  >
                    <img
                      src="./uploads/project_69639455d37210.98618894.png"
                      alt="BHC CONNECT"
                      class="img-fluid rounded mb-2"
                      loading="eager"
                      style="max-height: 150px"
                      data-images='[".\/uploads\/project_69639455d37210.98618894.png",".\/uploads\/project_69639455d44b95.47363570.png",".\/uploads\/project_69639455d4f9a8.44792674.png",".\/uploads\/project_69639455d5a4e2.03873693.png",".\/uploads\/project_69639455d64dc4.90351643.png",".\/uploads\/project_69639455d6fb34.79227403.png",".\/uploads\/project_69639455d7cb36.29953024.png",".\/uploads\/project_69639455d8a6d4.93119391.png",".\/uploads\/project_69639455d96567.16491329.png",".\/uploads\/project_69639455d9f495.77196481.png",".\/uploads\/project_69639455da8122.19553864.png",".\/uploads\/project_69639455db1a61.66636192.png",".\/uploads\/project_69639455dbafa9.56685417.png",".\/uploads\/project_69639455dc79e0.40866983.png",".\/uploads\/project_69639455dd3336.20215240.png",".\/uploads\/project_69639455ddbec8.15392502.png",".\/uploads\/project_69639455de3085.88362304.png",".\/uploads\/project_69639455deb7e9.82782712.png",".\/uploads\/project_69639455df4c43.34350655.png",".\/uploads\/project_69639455dfc6f3.71219670.png",".\/uploads\/project_69639455e061f7.45118771.png",".\/uploads\/project_69639455e106f6.67444603.png",".\/uploads\/project_69639455e19e08.60045063.png",".\/uploads\/project_69639455e21728.23544986.png",".\/uploads\/project_69639455e2a0b5.83853003.png",".\/uploads\/project_69639455e30667.06973943.png",".\/uploads\/project_69639455e3a085.21937140.png",".\/uploads\/project_69639455e43041.74638899.png",".\/uploads\/project_69639455e497b1.13613672.png"]'
                    />
                  </a>
                </div>
                <h5 class="card-title fw-bold text-center text-primary">
                  BHC CONNECT
                </h5>
                <p class="card-text text-center">
                  The general objective of the study is to design and develop a
                  barangay health information system that manages barangay
                  health worker accounts and supports comprehensive patient
                  record management, including personal data, medical history,
                  treatments, and immunization schedules for children and
                  adults. The system aims to allow patients to schedule
                  appointments, receive automated email reminders, and obtain
                  printed appointment slips. It also seeks to track and manage
                  dispensed medicines with dosage and frequency records, support
                  real-time chat and patient feedback, and provide a dashboard
                  with graphical summaries of appointments and patients. The
                  system will generate structured reports such as appointment
                  lists, patient lists, individual medical records, and medicine
                  inventory, while reducing paperwork and improving coordination
                  by centralizing health data for faster service delivery.
                </p>
              </div>
            </div>
          </div>

          <div class="col-lg-6 mb-3">
            <div
              class="project-card card h-100"
              data-project-id="healthconnect"
            >
              <button
                class="upload-btn-card"
                onclick="openUploadModal('healthconnect')"
                title="Upload Image (Ctrl+Alt+E)"
              >
                <i class="fas fa-camera"></i>
              </button>
              <div class="card-body p-3">
                <div class="project-meta-row">
                  <span class="badge border border-info text-info"
                    >Capstone Project</span
                  >
                  <span class="badge border border-success text-success"
                    >Completed</span
                  >
                </div>
                <div
                  class="text-center project-gallery"
                  data-images='[".\/uploads\/project_69639707b0b757.70388841.png",".\/uploads\/project_69639707b15179.96811650.png",".\/uploads\/project_69639707b22f06.67914456.png",".\/uploads\/project_69639707b31f66.16342841.png",".\/uploads\/project_69639707b3a108.70303587.png",".\/uploads\/project_69639707b41dd6.16674785.png",".\/uploads\/project_69639707b4a1e1.92582850.png",".\/uploads\/project_69639707b51050.06633055.png",".\/uploads\/project_69639707b57952.61839433.png",".\/uploads\/project_69639707b5fb89.73307302.png",".\/uploads\/project_69639707b6c865.47329970.png",".\/uploads\/project_69639707b72d02.89002142.png",".\/uploads\/project_69639707b78861.36199374.png",".\/uploads\/project_69639707b7d871.08209961.png",".\/uploads\/project_69639707b829d6.55235047.png",".\/uploads\/project_69639707b87b11.09652625.png",".\/uploads\/project_69639707b8d085.19198441.png",".\/uploads\/project_69639707b924e3.24006135.png",".\/uploads\/project_69639707b97945.99402547.png",".\/uploads\/project_69639707ba1124.64735726.png",".\/uploads\/project_69639707ba9880.79047219.png",".\/uploads\/project_69639707bb1079.25553939.png",".\/uploads\/project_69639707bb7875.01867882.png",".\/uploads\/project_69639707bbcde6.50350905.png",".\/uploads\/project_69639707bc2830.85459499.png",".\/uploads\/project_69639707bc7985.51829774.png"]'
                >
                  <a
                    href="./uploads/project_69639707b0b757.70388841.png"
                    target="_blank"
                    class="project-image-link"
                    data-images='[".\/uploads\/project_69639707b0b757.70388841.png",".\/uploads\/project_69639707b15179.96811650.png",".\/uploads\/project_69639707b22f06.67914456.png",".\/uploads\/project_69639707b31f66.16342841.png",".\/uploads\/project_69639707b3a108.70303587.png",".\/uploads\/project_69639707b41dd6.16674785.png",".\/uploads\/project_69639707b4a1e1.92582850.png",".\/uploads\/project_69639707b51050.06633055.png",".\/uploads\/project_69639707b57952.61839433.png",".\/uploads\/project_69639707b5fb89.73307302.png",".\/uploads\/project_69639707b6c865.47329970.png",".\/uploads\/project_69639707b72d02.89002142.png",".\/uploads\/project_69639707b78861.36199374.png",".\/uploads\/project_69639707b7d871.08209961.png",".\/uploads\/project_69639707b829d6.55235047.png",".\/uploads\/project_69639707b87b11.09652625.png",".\/uploads\/project_69639707b8d085.19198441.png",".\/uploads\/project_69639707b924e3.24006135.png",".\/uploads\/project_69639707b97945.99402547.png",".\/uploads\/project_69639707ba1124.64735726.png",".\/uploads\/project_69639707ba9880.79047219.png",".\/uploads\/project_69639707bb1079.25553939.png",".\/uploads\/project_69639707bb7875.01867882.png",".\/uploads\/project_69639707bbcde6.50350905.png",".\/uploads\/project_69639707bc2830.85459499.png",".\/uploads\/project_69639707bc7985.51829774.png"]'
                  >
                    <img
                      src="./uploads/project_69639707b0b757.70388841.png"
                      alt="HealthConnect"
                      class="img-fluid rounded mb-2"
                      loading="eager"
                      style="max-height: 150px"
                      data-images='[".\/uploads\/project_69639707b0b757.70388841.png",".\/uploads\/project_69639707b15179.96811650.png",".\/uploads\/project_69639707b22f06.67914456.png",".\/uploads\/project_69639707b31f66.16342841.png",".\/uploads\/project_69639707b3a108.70303587.png",".\/uploads\/project_69639707b41dd6.16674785.png",".\/uploads\/project_69639707b4a1e1.92582850.png",".\/uploads\/project_69639707b51050.06633055.png",".\/uploads\/project_69639707b57952.61839433.png",".\/uploads\/project_69639707b5fb89.73307302.png",".\/uploads\/project_69639707b6c865.47329970.png",".\/uploads\/project_69639707b72d02.89002142.png",".\/uploads\/project_69639707b78861.36199374.png",".\/uploads\/project_69639707b7d871.08209961.png",".\/uploads\/project_69639707b829d6.55235047.png",".\/uploads\/project_69639707b87b11.09652625.png",".\/uploads\/project_69639707b8d085.19198441.png",".\/uploads\/project_69639707b924e3.24006135.png",".\/uploads\/project_69639707b97945.99402547.png",".\/uploads\/project_69639707ba1124.64735726.png",".\/uploads\/project_69639707ba9880.79047219.png",".\/uploads\/project_69639707bb1079.25553939.png",".\/uploads\/project_69639707bb7875.01867882.png",".\/uploads\/project_69639707bbcde6.50350905.png",".\/uploads\/project_69639707bc2830.85459499.png",".\/uploads\/project_69639707bc7985.51829774.png"]'
                    />
                  </a>
                </div>
                <h5 class="card-title fw-bold text-center text-primary">
                  HealthConnect
                </h5>
                <p class="card-text text-center">
                  The general objective of the study is to develop a web-based
                  Health Monitoring Services system that manages barangay health
                  worker accounts and supports nurses and midwives in
                  maintaining comprehensive patient records, including personal
                  information, medical history, and treatments. The system aims
                  to enable patients to schedule appointments and receive
                  automated SMS reminders, track and manage immunization
                  schedules for children and adults, and provide a graphical
                  dashboard to monitor daily, weekly, and monthly appointments
                  and patient counts. It will also generate detailed reports,
                  including appointment lists, patient lists, medical records,
                  and appointment slips, and will be evaluated based on
                  accuracy, security, functionality, and overall effectiveness.
                </p>
              </div>
            </div>
          </div>

          <div class="col-lg-6 mb-3">
            <div class="project-card card h-100" data-project-id="immucare">
              <button
                class="upload-btn-card"
                onclick="openUploadModal('immucare')"
                title="Upload Image (Ctrl+Alt+E)"
              >
                <i class="fas fa-camera"></i>
              </button>
              <div class="card-body p-3">
                <div class="project-meta-row">
                  <span class="badge border border-info text-info"
                    >Capstone Project</span
                  >
                  <span class="badge border border-success text-success"
                    >Completed</span
                  >
                </div>
                <div
                  class="text-center project-gallery"
                  data-images='[".\/uploads\/project_69639821e64744.39550796.png",".\/uploads\/project_69639821e75a53.37575442.png",".\/uploads\/project_69639821e803c8.05347197.png",".\/uploads\/project_69639821e8b0d5.91939213.png",".\/uploads\/project_69639821e94386.07580957.png",".\/uploads\/project_69639821e9d999.33568483.png",".\/uploads\/project_69639821ea5ae3.21257790.png",".\/uploads\/project_69639821eaeda4.60450596.png",".\/uploads\/project_69639821eb98d4.03367024.png",".\/uploads\/project_69639821ec1568.35050599.png",".\/uploads\/project_69639821ec7702.99772977.png",".\/uploads\/project_69639821ecd251.98588307.png",".\/uploads\/project_69639821ed2a95.81052583.png",".\/uploads\/project_69639821ed8ed7.35576741.png",".\/uploads\/project_69639821edf427.06434253.png",".\/uploads\/project_69639821ee4f53.29543841.png",".\/uploads\/project_69639821eea137.79871175.png",".\/uploads\/project_69639821ef15a0.15869381.png",".\/uploads\/project_69639821ef9a61.47082514.png",".\/uploads\/project_69639821f02cf4.72620058.png",".\/uploads\/project_69639821f097c9.81928213.png",".\/uploads\/project_69639821f0ff03.39460812.png",".\/uploads\/project_69639821f18b52.59494109.png",".\/uploads\/project_69639821f1faf7.05488808.png",".\/uploads\/project_69639821f25af7.93084456.png",".\/uploads\/project_69639821f2b360.59621949.png",".\/uploads\/project_69639821f32b87.36710557.png",".\/uploads\/project_69639821f3bd26.30122354.png",".\/uploads\/project_696398220003b7.62479875.png",".\/uploads\/project_69639822005cf7.21373359.png",".\/uploads\/project_6963982200b236.27512670.png",".\/uploads\/project_696398220107b7.20628225.png",".\/uploads\/project_69639822016564.62244036.png"]'
                >
                  <a
                    href="./uploads/project_69639821e64744.39550796.png"
                    target="_blank"
                    class="project-image-link"
                    data-images='[".\/uploads\/project_69639821e64744.39550796.png",".\/uploads\/project_69639821e75a53.37575442.png",".\/uploads\/project_69639821e803c8.05347197.png",".\/uploads\/project_69639821e8b0d5.91939213.png",".\/uploads\/project_69639821e94386.07580957.png",".\/uploads\/project_69639821e9d999.33568483.png",".\/uploads\/project_69639821ea5ae3.21257790.png",".\/uploads\/project_69639821eaeda4.60450596.png",".\/uploads\/project_69639821eb98d4.03367024.png",".\/uploads\/project_69639821ec1568.35050599.png",".\/uploads\/project_69639821ec7702.99772977.png",".\/uploads\/project_69639821ecd251.98588307.png",".\/uploads\/project_69639821ed2a95.81052583.png",".\/uploads\/project_69639821ed8ed7.35576741.png",".\/uploads\/project_69639821edf427.06434253.png",".\/uploads\/project_69639821ee4f53.29543841.png",".\/uploads\/project_69639821eea137.79871175.png",".\/uploads\/project_69639821ef15a0.15869381.png",".\/uploads\/project_69639821ef9a61.47082514.png",".\/uploads\/project_69639821f02cf4.72620058.png",".\/uploads\/project_69639821f097c9.81928213.png",".\/uploads\/project_69639821f0ff03.39460812.png",".\/uploads\/project_69639821f18b52.59494109.png",".\/uploads\/project_69639821f1faf7.05488808.png",".\/uploads\/project_69639821f25af7.93084456.png",".\/uploads\/project_69639821f2b360.59621949.png",".\/uploads\/project_69639821f32b87.36710557.png",".\/uploads\/project_69639821f3bd26.30122354.png",".\/uploads\/project_696398220003b7.62479875.png",".\/uploads\/project_69639822005cf7.21373359.png",".\/uploads\/project_6963982200b236.27512670.png",".\/uploads\/project_696398220107b7.20628225.png",".\/uploads\/project_69639822016564.62244036.png"]'
                  >
                    <img
                      src="./uploads/project_69639821e64744.39550796.png"
                      alt="ImmuCare"
                      class="img-fluid rounded mb-2"
                      loading="eager"
                      style="max-height: 150px"
                      data-images='[".\/uploads\/project_69639821e64744.39550796.png",".\/uploads\/project_69639821e75a53.37575442.png",".\/uploads\/project_69639821e803c8.05347197.png",".\/uploads\/project_69639821e8b0d5.91939213.png",".\/uploads\/project_69639821e94386.07580957.png",".\/uploads\/project_69639821e9d999.33568483.png",".\/uploads\/project_69639821ea5ae3.21257790.png",".\/uploads\/project_69639821eaeda4.60450596.png",".\/uploads\/project_69639821eb98d4.03367024.png",".\/uploads\/project_69639821ec1568.35050599.png",".\/uploads\/project_69639821ec7702.99772977.png",".\/uploads\/project_69639821ecd251.98588307.png",".\/uploads\/project_69639821ed2a95.81052583.png",".\/uploads\/project_69639821ed8ed7.35576741.png",".\/uploads\/project_69639821edf427.06434253.png",".\/uploads\/project_69639821ee4f53.29543841.png",".\/uploads\/project_69639821eea137.79871175.png",".\/uploads\/project_69639821ef15a0.15869381.png",".\/uploads\/project_69639821ef9a61.47082514.png",".\/uploads\/project_69639821f02cf4.72620058.png",".\/uploads\/project_69639821f097c9.81928213.png",".\/uploads\/project_69639821f0ff03.39460812.png",".\/uploads\/project_69639821f18b52.59494109.png",".\/uploads\/project_69639821f1faf7.05488808.png",".\/uploads\/project_69639821f25af7.93084456.png",".\/uploads\/project_69639821f2b360.59621949.png",".\/uploads\/project_69639821f32b87.36710557.png",".\/uploads\/project_69639821f3bd26.30122354.png",".\/uploads\/project_696398220003b7.62479875.png",".\/uploads\/project_69639822005cf7.21373359.png",".\/uploads\/project_6963982200b236.27512670.png",".\/uploads\/project_696398220107b7.20628225.png",".\/uploads\/project_69639822016564.62244036.png"]'
                    />
                  </a>
                </div>
                <h5 class="card-title fw-bold text-center text-primary">
                  ImmuCare
                </h5>
                <p class="card-text text-center">
                  The general objective of the study is to design and develop a
                  web-based immunization management system that manages accounts
                  for administrators, midwives, and nurses, and records and
                  stores patient immunization data. The system will allow
                  clients to schedule appointments, provide SMS and email
                  notifications to patients, and enable administrators to
                  transfer files and data to the municipal health center. It
                  will include search and filtering features by gender, purok,
                  diagnosis, and patient information, and generate reports such
                  as patient lists, appointments, personal information, and
                  diagnoses. The system will be evaluated based on
                  functionality, accuracy, effectiveness, and security.The
                  system will also help improve monitoring and decision-making
                  through organized immunization records.
                </p>
              </div>
            </div>
          </div>

          <div class="col-lg-6 mb-3">
            <div class="project-card card h-100" data-project-id="aidtrack">
              <button
                class="upload-btn-card"
                onclick="openUploadModal('aidtrack')"
                title="Upload Image (Ctrl+Alt+E)"
              >
                <i class="fas fa-camera"></i>
              </button>
              <div class="card-body p-3">
                <div class="project-meta-row">
                  <span class="badge border border-info text-info"
                    >Capstone Project</span
                  >
                  <span class="badge border border-success text-success"
                    >Completed</span
                  >
                </div>
                <div
                  class="text-center project-gallery"
                  data-images='[".\/uploads\/project_69639d814ea988.02413401.png",".\/uploads\/project_69639d814f7017.30665404.png",".\/uploads\/project_69639d81504981.81272745.png",".\/uploads\/project_69639d8150fcb6.85850267.png",".\/uploads\/project_69639d81518d73.52196446.png",".\/uploads\/project_69639d815218a1.18064152.png",".\/uploads\/project_69639d815298d8.16890806.png",".\/uploads\/project_69639d81531002.27110035.png",".\/uploads\/project_69639d81539796.00695266.png",".\/uploads\/project_69639d81545bc9.74640247.png",".\/uploads\/project_69639d8154f907.43179462.png",".\/uploads\/project_69639d81556809.83449039.png",".\/uploads\/project_69639d8155e466.69009534.png",".\/uploads\/project_69639d81564172.58948552.png",".\/uploads\/project_69639d81569d62.14747172.png",".\/uploads\/project_69639d8156fb82.67901942.png",".\/uploads\/project_69639d815754d5.50183477.png",".\/uploads\/project_69639d8157dff0.82990185.png",".\/uploads\/project_69639d81586e70.10002466.png",".\/uploads\/project_69639d8158f819.64301875.png",".\/uploads\/project_69639d81595680.67728802.png",".\/uploads\/project_69639d8159c809.34922148.png",".\/uploads\/project_69639d815a25a6.24482877.png",".\/uploads\/project_69639d815a8090.52043412.png",".\/uploads\/project_69639d815ad894.40336700.png",".\/uploads\/project_69639d815b5759.42843518.png",".\/uploads\/project_69639d815bd3e9.99948536.png"]'
                >
                  <a
                    href="./uploads/project_69639d814ea988.02413401.png"
                    target="_blank"
                    class="project-image-link"
                    data-images='[".\/uploads\/project_69639d814ea988.02413401.png",".\/uploads\/project_69639d814f7017.30665404.png",".\/uploads\/project_69639d81504981.81272745.png",".\/uploads\/project_69639d8150fcb6.85850267.png",".\/uploads\/project_69639d81518d73.52196446.png",".\/uploads\/project_69639d815218a1.18064152.png",".\/uploads\/project_69639d815298d8.16890806.png",".\/uploads\/project_69639d81531002.27110035.png",".\/uploads\/project_69639d81539796.00695266.png",".\/uploads\/project_69639d81545bc9.74640247.png",".\/uploads\/project_69639d8154f907.43179462.png",".\/uploads\/project_69639d81556809.83449039.png",".\/uploads\/project_69639d8155e466.69009534.png",".\/uploads\/project_69639d81564172.58948552.png",".\/uploads\/project_69639d81569d62.14747172.png",".\/uploads\/project_69639d8156fb82.67901942.png",".\/uploads\/project_69639d815754d5.50183477.png",".\/uploads\/project_69639d8157dff0.82990185.png",".\/uploads\/project_69639d81586e70.10002466.png",".\/uploads\/project_69639d8158f819.64301875.png",".\/uploads\/project_69639d81595680.67728802.png",".\/uploads\/project_69639d8159c809.34922148.png",".\/uploads\/project_69639d815a25a6.24482877.png",".\/uploads\/project_69639d815a8090.52043412.png",".\/uploads\/project_69639d815ad894.40336700.png",".\/uploads\/project_69639d815b5759.42843518.png",".\/uploads\/project_69639d815bd3e9.99948536.png"]'
                  >
                    <img
                      src="./uploads/project_69639d814ea988.02413401.png"
                      alt="AidTrack"
                      class="img-fluid rounded mb-2"
                      loading="eager"
                      style="max-height: 150px"
                      data-images='[".\/uploads\/project_69639d814ea988.02413401.png",".\/uploads\/project_69639d814f7017.30665404.png",".\/uploads\/project_69639d81504981.81272745.png",".\/uploads\/project_69639d8150fcb6.85850267.png",".\/uploads\/project_69639d81518d73.52196446.png",".\/uploads\/project_69639d815218a1.18064152.png",".\/uploads\/project_69639d815298d8.16890806.png",".\/uploads\/project_69639d81531002.27110035.png",".\/uploads\/project_69639d81539796.00695266.png",".\/uploads\/project_69639d81545bc9.74640247.png",".\/uploads\/project_69639d8154f907.43179462.png",".\/uploads\/project_69639d81556809.83449039.png",".\/uploads\/project_69639d8155e466.69009534.png",".\/uploads\/project_69639d81564172.58948552.png",".\/uploads\/project_69639d81569d62.14747172.png",".\/uploads\/project_69639d8156fb82.67901942.png",".\/uploads\/project_69639d815754d5.50183477.png",".\/uploads\/project_69639d8157dff0.82990185.png",".\/uploads\/project_69639d81586e70.10002466.png",".\/uploads\/project_69639d8158f819.64301875.png",".\/uploads\/project_69639d81595680.67728802.png",".\/uploads\/project_69639d8159c809.34922148.png",".\/uploads\/project_69639d815a25a6.24482877.png",".\/uploads\/project_69639d815a8090.52043412.png",".\/uploads\/project_69639d815ad894.40336700.png",".\/uploads\/project_69639d815b5759.42843518.png",".\/uploads\/project_69639d815bd3e9.99948536.png"]'
                    />
                  </a>
                </div>
                <h5 class="card-title fw-bold text-center text-primary">
                  AidTrack
                </h5>
                <p class="card-text text-center">
                  The general objective of the study is to develop a digital
                  Barangay Aid Management System that manages user accounts for
                  residents and administrators, provides secure authentication,
                  and ensures accurate registration and verification of
                  qualified beneficiaries. The system aims to track distributed
                  and dismissed benefits, provide real-time monitoring of aid
                  delivery, support analytics and reporting on aid impact and
                  distribution progress, integrate SMS notifications, digital
                  receipts, acknowledgments, and a beneficiary feedback system,
                  generate reports on residents and beneficiaries by category,
                  and reduce manual processing while improving transparency in
                  barangay aid distribution; it will be evaluated based on
                  functionality, accessibility, security, acceptability, and
                  overall efficacy.
                </p>
              </div>
            </div>
          </div>

          <div class="col-lg-6 mb-3">
            <div class="project-card card h-100" data-project-id="bm-scapis">
              <button
                class="upload-btn-card"
                onclick="openUploadModal('bm-scapis')"
                title="Upload Image (Ctrl+Alt+E)"
              >
                <i class="fas fa-camera"></i>
              </button>
              <div class="card-body p-3">
                <div class="project-meta-row">
                  <span class="badge border border-info text-info"
                    >Capstone Project</span
                  >
                  <span class="badge border border-success text-success"
                    >Completed</span
                  >
                </div>
                <div
                  class="text-center project-gallery"
                  data-images='[".\/uploads\/project_69639ed8285fd4.96193276.png",".\/uploads\/project_69639ed829fb33.30794419.png",".\/uploads\/project_69639ed82aaf79.59264453.png",".\/uploads\/project_69639ed82b42f5.03539161.png",".\/uploads\/project_69639ed82bc2b0.68984356.png",".\/uploads\/project_69639ed82c4dc6.73228718.png",".\/uploads\/project_69639ed82cee89.36551427.png",".\/uploads\/project_69639ed82dd385.29669374.png",".\/uploads\/project_69639ed82e71f6.37886227.png",".\/uploads\/project_69639ed82eeab6.47544326.png",".\/uploads\/project_69639ed82f5bd9.99625759.png",".\/uploads\/project_69639ed82fc4a9.30942826.png",".\/uploads\/project_69639ed8304050.12551838.png",".\/uploads\/project_69639ed830a3e0.58351435.png",".\/uploads\/project_69639ed83162a9.53810732.png",".\/uploads\/project_69639ed831fb64.81758720.png",".\/uploads\/project_69639ed832a622.17009172.png",".\/uploads\/project_69639ed8332399.87833096.png",".\/uploads\/project_69639ed8338db6.21420693.png",".\/uploads\/project_69639ed833ef22.85009377.png",".\/uploads\/project_69639ed8344714.01556379.png",".\/uploads\/project_69639ed8349cb6.33988215.png",".\/uploads\/project_69639ed8351f74.55560669.png",".\/uploads\/project_69639ed835ca75.46299040.png",".\/uploads\/project_69639ed8365f95.56104891.png",".\/uploads\/project_69639ed836da51.07007423.png",".\/uploads\/project_69639ed8374476.85554534.png",".\/uploads\/project_69639ed837a825.86127844.png",".\/uploads\/project_69639ed8380032.76456095.png",".\/uploads\/project_69639ed8385763.97852155.png",".\/uploads\/project_69639ed838a8b9.52241103.png",".\/uploads\/project_69639ed8390fc3.44057505.png"]'
                >
                  <a
                    href="./uploads/project_69639ed8285fd4.96193276.png"
                    target="_blank"
                    class="project-image-link"
                    data-images='[".\/uploads\/project_69639ed8285fd4.96193276.png",".\/uploads\/project_69639ed829fb33.30794419.png",".\/uploads\/project_69639ed82aaf79.59264453.png",".\/uploads\/project_69639ed82b42f5.03539161.png",".\/uploads\/project_69639ed82bc2b0.68984356.png",".\/uploads\/project_69639ed82c4dc6.73228718.png",".\/uploads\/project_69639ed82cee89.36551427.png",".\/uploads\/project_69639ed82dd385.29669374.png",".\/uploads\/project_69639ed82e71f6.37886227.png",".\/uploads\/project_69639ed82eeab6.47544326.png",".\/uploads\/project_69639ed82f5bd9.99625759.png",".\/uploads\/project_69639ed82fc4a9.30942826.png",".\/uploads\/project_69639ed8304050.12551838.png",".\/uploads\/project_69639ed830a3e0.58351435.png",".\/uploads\/project_69639ed83162a9.53810732.png",".\/uploads\/project_69639ed831fb64.81758720.png",".\/uploads\/project_69639ed832a622.17009172.png",".\/uploads\/project_69639ed8332399.87833096.png",".\/uploads\/project_69639ed8338db6.21420693.png",".\/uploads\/project_69639ed833ef22.85009377.png",".\/uploads\/project_69639ed8344714.01556379.png",".\/uploads\/project_69639ed8349cb6.33988215.png",".\/uploads\/project_69639ed8351f74.55560669.png",".\/uploads\/project_69639ed835ca75.46299040.png",".\/uploads\/project_69639ed8365f95.56104891.png",".\/uploads\/project_69639ed836da51.07007423.png",".\/uploads\/project_69639ed8374476.85554534.png",".\/uploads\/project_69639ed837a825.86127844.png",".\/uploads\/project_69639ed8380032.76456095.png",".\/uploads\/project_69639ed8385763.97852155.png",".\/uploads\/project_69639ed838a8b9.52241103.png",".\/uploads\/project_69639ed8390fc3.44057505.png"]'
                  >
                    <img
                      src="./uploads/project_69639ed8285fd4.96193276.png"
                      alt="BM-SCaPIS"
                      class="img-fluid rounded mb-2"
                      loading="eager"
                      style="max-height: 150px"
                      data-images='[".\/uploads\/project_69639ed8285fd4.96193276.png",".\/uploads\/project_69639ed829fb33.30794419.png",".\/uploads\/project_69639ed82aaf79.59264453.png",".\/uploads\/project_69639ed82b42f5.03539161.png",".\/uploads\/project_69639ed82bc2b0.68984356.png",".\/uploads\/project_69639ed82c4dc6.73228718.png",".\/uploads\/project_69639ed82cee89.36551427.png",".\/uploads\/project_69639ed82dd385.29669374.png",".\/uploads\/project_69639ed82e71f6.37886227.png",".\/uploads\/project_69639ed82eeab6.47544326.png",".\/uploads\/project_69639ed82f5bd9.99625759.png",".\/uploads\/project_69639ed82fc4a9.30942826.png",".\/uploads\/project_69639ed8304050.12551838.png",".\/uploads\/project_69639ed830a3e0.58351435.png",".\/uploads\/project_69639ed83162a9.53810732.png",".\/uploads\/project_69639ed831fb64.81758720.png",".\/uploads\/project_69639ed832a622.17009172.png",".\/uploads\/project_69639ed8332399.87833096.png",".\/uploads\/project_69639ed8338db6.21420693.png",".\/uploads\/project_69639ed833ef22.85009377.png",".\/uploads\/project_69639ed8344714.01556379.png",".\/uploads\/project_69639ed8349cb6.33988215.png",".\/uploads\/project_69639ed8351f74.55560669.png",".\/uploads\/project_69639ed835ca75.46299040.png",".\/uploads\/project_69639ed8365f95.56104891.png",".\/uploads\/project_69639ed836da51.07007423.png",".\/uploads\/project_69639ed8374476.85554534.png",".\/uploads\/project_69639ed837a825.86127844.png",".\/uploads\/project_69639ed8380032.76456095.png",".\/uploads\/project_69639ed8385763.97852155.png",".\/uploads\/project_69639ed838a8b9.52241103.png",".\/uploads\/project_69639ed8390fc3.44057505.png"]'
                    />
                  </a>
                </div>
                <h5 class="card-title fw-bold text-center text-primary">
                  BM-SCaPIS
                </h5>
                <p class="card-text text-center">
                  The general objective of the study is to design and develop an
                  online barangay clearance and permit management system that
                  allows residents to register, apply, and track applications
                  digitally while receiving real-time status updates. The system
                  aims to support administrators in managing resident profiles,
                  reviewing and approving applications, scheduling verification
                  or document pickup, and monitoring approved and pending
                  documents. It will integrate SMS and ringtone notifications
                  for updates and reminders, generate comprehensive reports and
                  statistical summaries on applications, issued clearances and
                  permits, residents by category, and transaction logs, and will
                  be evaluated based on functionality, usability, accuracy,
                  acceptability, and security.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Contact Section -->
    <section id="contact">
      <div class="container">
        <div class="text-center">
          <h2 class="roadmap-section-title">CONNECT WITH ME</h2>
        </div>

        <div class="text-center social-links">
          <a
            href="https://www.facebook.com/russelicioush"
            class="btn btn-lg"
            target="_blank"
          >
            <i class="fab fa-facebook me-2"></i>Facebook
          </a>
          <a
            href="mailto:janrusselpenafiel01172005@gmail.com"
            class="btn btn-lg"
          >
            <i class="fas fa-envelope me-2"></i>Email
          </a>
          <a href="tel:+639677726912" class="btn btn-lg">
            <i class="fas fa-phone me-2"></i>Call: +63 967 772 6912
          </a>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="text-white text-center py-4" style="background: #000000">
      <div class="container">
        <p class="mb-2">Date Created: 2024-03-19</p>
        <p class="mb-0">
          Made with <i class="fas fa-heart text-primary"></i
          ><span style="color: #00fff7"></span> by Jan Russel
        </p>
      </div>
    </footer>

    <!-- Dark/Light Mode Toggle Script -->
    <script>
      (function () {
        // Apply saved theme IMMEDIATELY to prevent flash
        var saved = localStorage.getItem("portfolio-theme");
        if (saved === "light") {
          document.body.classList.add("light-mode");
        }

        // Expose toggle function globally
        window.toggleTheme = function () {
          document.body.classList.add("theme-transition");
          document.body.classList.toggle("light-mode");
          var isLight = document.body.classList.contains("light-mode");
          localStorage.setItem("portfolio-theme", isLight ? "light" : "dark");

          // Update meta theme-color for mobile browsers
          var metaTheme = document.querySelector('meta[name="theme-color"]');
          if (!metaTheme) {
            metaTheme = document.createElement("meta");
            metaTheme.name = "theme-color";
            document.head.appendChild(metaTheme);
          }
          metaTheme.content = isLight ? "#ffffff" : "#000000";

          // Remove transition class after animation completes
          setTimeout(function () {
            document.body.classList.remove("theme-transition");
          }, 400);
        };
      })();
    </script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Typing Animation Script -->
    <script>
      const texts = [
        "Freelance Student Web Developer",
        "Information Technology Student",
        "Building Solutions that Matter",
        "I'm Open for Freelancing",
      ];

      let textIndex = 0;
      let charIndex = 0;
      let isDeleting = false;
      const typingElement = document.getElementById("typing-text");

      function typeText() {
        if (!typingElement) return; // Exit if element doesn't exist

        const currentText = texts[textIndex];

        if (isDeleting) {
          typingElement.textContent = currentText.substring(0, charIndex - 1);
          charIndex--;
        } else {
          typingElement.textContent = currentText.substring(0, charIndex + 1);
          charIndex++;
        }

        let typeSpeed = isDeleting ? 50 : 100;

        if (!isDeleting && charIndex === currentText.length) {
          typeSpeed = 2000; // Pause at end
          isDeleting = true;
        } else if (isDeleting && charIndex === 0) {
          isDeleting = false;
          textIndex = (textIndex + 1) % texts.length;
          typeSpeed = 500; // Pause before next word
        }

        setTimeout(typeText, typeSpeed);
      }

      // Start typing animation when page loads
      window.addEventListener("load", typeText);

      // Smooth scrolling for navigation links
      document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
        anchor.addEventListener("click", function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute("href"));
          if (target) {
            target.scrollIntoView({
              behavior: "smooth",
              block: "start",
            });
          }
          // Auto-close navbar on mobile after click
          const navbarToggler = document.querySelector(".navbar-toggler");
          const navbarCollapse = document.getElementById("navbarNav");
          if (navbarToggler && navbarCollapse.classList.contains("show")) {
            navbarToggler.click();
          }
        });
      });

      // Scroll Animation - Intersection Observer
      const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -100px 0px",
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const element = entry.target;

            // Determine which animation class to add
            if (element.classList.contains("scroll-animate-left")) {
              element.classList.add("animate-left");
            } else if (element.classList.contains("scroll-animate-right")) {
              element.classList.add("animate-right");
            } else if (element.classList.contains("scroll-animate-fade")) {
              element.classList.add("animate-fade");
            } else {
              element.classList.add("animate");
            }

            // Stop observing this element
            observer.unobserve(element);
          }
        });
      }, observerOptions);

      // Apply scroll animations to all visible elements when page loads
      window.addEventListener("load", function () {
        // Animate section headings
        document
          .querySelectorAll("section h2, section h3, section h4, section h1")
          .forEach((el) => {
            if (!el.classList.contains("scroll-animate")) {
              el.classList.add("scroll-animate", "scroll-animate-fade");
              observer.observe(el);
            }
          });

        // Animate cards and content blocks
        document
          .querySelectorAll(".section-card, .project-card, .highlight-box")
          .forEach((el) => {
            if (!el.classList.contains("scroll-animate")) {
              el.classList.add("scroll-animate");
              observer.observe(el);
            }
          });

        // Animate badge/button elements
        document
          .querySelectorAll(".badge-custom, .btn-primary, .btn-secondary")
          .forEach((el, idx) => {
            if (!el.classList.contains("scroll-animate")) {
              if (idx % 2 === 0) {
                el.classList.add("scroll-animate", "scroll-animate-left");
              } else {
                el.classList.add("scroll-animate", "scroll-animate-right");
              }
              observer.observe(el);
            }
          });

        // Animate timeline items
        document.querySelectorAll(".timeline-item").forEach((el) => {
          if (!el.classList.contains("scroll-animate")) {
            el.classList.add("scroll-animate", "scroll-animate-fade");
            observer.observe(el);
          }
        });

        // Animate roadmap section subtitle
        document.querySelectorAll("#roadmap .text-center p").forEach((el) => {
          if (!el.classList.contains("scroll-animate")) {
            el.classList.add("scroll-animate", "scroll-animate-fade");
            observer.observe(el);
          }
        });

        // Animate roadmap items — left items slide from left, right items slide from right
        document.querySelectorAll(".roadmap-item").forEach((el, idx) => {
          if (!el.classList.contains("scroll-animate")) {
            if (el.classList.contains("right")) {
              el.classList.add("scroll-animate", "scroll-animate-right");
            } else {
              el.classList.add("scroll-animate", "scroll-animate-left");
            }
            el.style.animationDelay = idx * 0.12 + "s";
            observer.observe(el);
          }
        });

        // Animate social links
        document.querySelectorAll(".social-links a").forEach((el, idx) => {
          if (!el.classList.contains("scroll-animate")) {
            el.classList.add("scroll-animate");
            el.style.animationDelay = idx * 0.1 + "s";
            observer.observe(el);
          }
        });
      });

      // Upload Modal Functions
      let currentProjectId = null;
      let selectedFiles = [];
      let uploadButtonsEnabled = false;
      let galleryModalInstance = null;
      let currentGalleryImages = [];
      let currentGalleryIndex = 0;
      let galleryClosedByBackButton = false;

      // Keyboard shortcut: Ctrl+Alt+E to toggle upload buttons
      document.addEventListener("keydown", function (e) {
        if (e.ctrlKey && e.altKey && e.key === "e") {
          e.preventDefault();
          toggleUploadButtons();
        }
        // Ctrl + Alt + X to delete current gallery image
        if (e.ctrlKey && e.altKey && e.key.toLowerCase() === "x") {
          e.preventDefault();
          deleteCurrentGalleryImage();
        }
      });

      // Main Menu Functions
      function openMainMenu() {
        document.getElementById("mainMenuModal").classList.add("active");
      }

      function closeMainMenu() {
        document.getElementById("mainMenuModal").classList.remove("active");
      }

      function showUploadModal() {
        closeMainMenu();
        toggleUploadButtons();
      }

      function toggleUploadButtons() {
        uploadButtonsEnabled = !uploadButtonsEnabled;
        const uploadButtons = document.querySelectorAll(".upload-btn-card");

        uploadButtons.forEach((button) => {
          if (uploadButtonsEnabled) {
            button.classList.add("enabled");
          } else {
            button.classList.remove("enabled");
          }
        });

        showToggleNotification(uploadButtonsEnabled);
      }

      function triggerProfilePictureSelection() {
        const fileInput = document.createElement("input");
        fileInput.type = "file";
        fileInput.accept = "image/*";
        fileInput.onchange = function (e) {
          const file = e.target.files && e.target.files[0];
          if (file) {
            uploadProfilePictureDirectly(file);
          }
        };
        fileInput.click();
      }

      function showToggleNotification(state) {
        const notification = document.getElementById("toggleNotification");
        const notificationText = document.getElementById("notificationText");

        if (typeof state === "boolean") {
          notificationText.innerHTML = state
            ? '<i class="fas fa-check-circle me-2"></i>Upload buttons enabled!'
            : '<i class="fas fa-times-circle me-2"></i>Upload buttons disabled!';
        } else {
          notificationText.innerHTML =
            '<i class="fas fa-info-circle me-2"></i>' + state;
        }

        notification.classList.add("show");

        // Auto hide after 2 seconds
        setTimeout(() => {
          notification.style.animation = "slideOutRight 0.3s ease";
          setTimeout(() => {
            notification.classList.remove("show");
            notification.style.animation = "";
          }, 300);
        }, 2000);
      }

      function openUploadModal(projectId) {
        // Direct file selection without modal
        currentProjectId = projectId;
        // Create a temporary file input
        const fileInput = document.createElement("input");
        fileInput.type = "file";
        fileInput.accept = "image/*";
        fileInput.multiple = true;
        fileInput.onchange = function (e) {
          const files = Array.from(e.target.files || []);
          if (files.length > 0) {
            selectedFiles = files;
            uploadImageDirectly();
          }
        };
        fileInput.click();
      }

      function uploadImageDirectly() {
        if (!selectedFiles.length || !currentProjectId) {
          return;
        }

        // Upload in batches to avoid server-side limits (e.g. PHP's max_file_uploads)
        showToggleNotification("Uploading image...");
        uploadFilesInBatches(selectedFiles, currentProjectId)
          .then((paths) => {
            showToggleNotification("Image uploaded! Reloading...");
            setTimeout(() => window.location.reload(), 1000);
          })
          .catch((err) => {
            showToggleNotification("Upload failed: " + err.message);
          });
      }

      function closeUploadModal() {
        const modal = document.getElementById("uploadModal");
        modal.classList.remove("active");
        resetUploadForm();
        resetProfileUploadForm();
      }

      function resetUploadForm() {
        document.getElementById("fileInput").value = "";
        document.getElementById("uploadPreview").classList.remove("show");
        document.getElementById("uploadBtn").style.display = "none";
        document.getElementById("uploadStatus").innerHTML = "";
        selectedFiles = [];
      }

      // Drag and drop functionality
      const uploadZone = document.getElementById("uploadZone");

      uploadZone.addEventListener("dragover", function (e) {
        e.preventDefault();
        uploadZone.classList.add("dragover");
      });

      uploadZone.addEventListener("dragleave", function (e) {
        e.preventDefault();
        uploadZone.classList.remove("dragover");
      });

      uploadZone.addEventListener("drop", function (e) {
        e.preventDefault();
        uploadZone.classList.remove("dragover");
        const files = e.dataTransfer.files;
        if (files.length > 0) {
          handleFiles(Array.from(files));
        }
      });

      function handleFileSelect(event) {
        const files = Array.from(event.target.files || []);
        if (files.length) {
          handleFiles(files);
        }
      }

      function handleFiles(files) {
        const validTypes = [
          "image/jpeg",
          "image/png",
          "image/gif",
          "image/webp",
        ];
        const validFiles = [];

        files.forEach((file) => {
          if (!validTypes.includes(file.type)) {
            return;
          }
          if (file.size > 5 * 1024 * 1024) {
            return;
          }
          validFiles.push(file);
        });

        if (!validFiles.length) {
          showStatus(
            "Invalid files selected. Please choose images under 5MB.",
            "error",
          );
          return;
        }

        selectedFiles = validFiles;

        const reader = new FileReader();
        reader.onload = function (e) {
          const preview = document.getElementById("uploadPreview");
          preview.src = e.target.result;
          preview.classList.add("show");
          document.getElementById("uploadBtn").style.display = "inline-block";
        };
        reader.readAsDataURL(validFiles[0]);

        const statusMessage =
          validFiles.length === 1
            ? "1 image ready to upload."
            : `${validFiles.length} images ready. First image will be used as the display image.`;
        showStatus(statusMessage, "info");
      }

      function uploadImage() {
        if (!selectedFiles.length || !currentProjectId) {
          showStatus("Please select at least one image first.", "error");
          return;
        }

        showStatus("Uploading and updating HTML...", "info");
        document.getElementById("uploadBtn").disabled = true;

        uploadFilesInBatches(selectedFiles, currentProjectId)
          .then((paths) => {
            showStatus(
              "? Upload successful! Reloading page to apply changes...",
              "success",
            );
            setTimeout(() => window.location.reload(), 1500);
          })
          .catch((err) => {
            showStatus("? Upload failed: " + err.message, "error");
          })
          .finally(() => {
            document.getElementById("uploadBtn").disabled = false;
          });
      }

      // Upload helper: sends files in batches to avoid server upload limits
      async function uploadFilesInBatches(files, projectId) {
        const batchSize = 40; // safe default; adjust if your server supports more
        const savedPaths = [];
        for (let i = 0; i < files.length; i += batchSize) {
          const batch = files.slice(i, i + batchSize);
          const formData = new FormData();
          batch.forEach((f) => formData.append("images[]", f));
          formData.append("project_id", projectId);
          formData.append("action", "upload");

          const resp = await fetch("upload.php", {
            method: "POST",
            body: formData,
          });
          const data = await resp.json();
          if (!data.success) {
            throw new Error(data.message || "Upload failed for a batch");
          }
          if (data.data && Array.isArray(data.data.paths)) {
            savedPaths.push(...data.data.paths);
          } else if (data.data && data.data.paths) {
            savedPaths.push(data.data.paths);
          }
          // If server updated HTML and intends a reload, we still continue uploading remaining batches
        }
        return savedPaths;
      }

      function updateProjectImage(projectId, imagePaths) {
        const paths = Array.isArray(imagePaths) ? imagePaths : [imagePaths];
        if (!paths.length) return;
        const projectCard = document.querySelector(
          `[data-project-id="${projectId}"]`,
        );
        if (projectCard) {
          const img = projectCard.querySelector("img");
          const link = img ? img.parentElement : null;
          if (img) {
            img.src = paths[0];
            img.setAttribute("data-images", JSON.stringify(paths));
            img.setAttribute("loading", "eager"); // Ensure immediate loading
          }
          if (link) {
            link.href = paths[0];
            link.setAttribute("data-images", JSON.stringify(paths));
            link.classList.add("project-image-link");
          }
          projectCard.setAttribute("data-images", JSON.stringify(paths));
        }
      }

      function showStatus(message, type) {
        const statusDiv = document.getElementById("uploadStatus");
        statusDiv.innerHTML = message;
        statusDiv.style.color =
          type === "error"
            ? "#ff4444"
            : type === "success"
              ? "#00ff00"
              : "#00fff7";
      }

      // Gallery modal helpers
      function prepareGalleryLinks() {
        const cards = document.querySelectorAll(".project-card");
        cards.forEach((card) => {
          const link = card.querySelector(".card-body .text-center a");
          const img = link ? link.querySelector("img") : null;
          if (!link || !img) return;

          let images = [];
          const data =
            link.getAttribute("data-images") ||
            img.getAttribute("data-images") ||
            card.getAttribute("data-images");
          if (data) {
            try {
              images = JSON.parse(data);
            } catch (err) {
              images = [];
            }
          }
          if (!images.length) {
            const src = img.getAttribute("src");
            if (src) images = [src];
          }
          const json = JSON.stringify(images);
          link.setAttribute("data-images", json);
          img.setAttribute("data-images", json);
          card.setAttribute("data-images", json);
          link.classList.add("project-image-link");
        });
      }

      function renderGalleryViewer() {
        const mainImg = document.getElementById("galleryMainImage");
        const counter = document.getElementById("galleryCounter");
        const spinner = document.getElementById("galleryLoadingSpinner");
        if (!mainImg || !counter || !currentGalleryImages.length) return;
        currentGalleryIndex = Math.max(
          0,
          Math.min(currentGalleryIndex, currentGalleryImages.length - 1),
        );

        // Show spinner, hide image
        if (spinner) spinner.style.display = "block";
        mainImg.style.display = "none";

        // Preload current image
        const img = new Image();
        img.onload = function () {
          mainImg.src = currentGalleryImages[currentGalleryIndex];
          mainImg.style.display = "block";
          if (spinner) spinner.style.display = "none";

          // Preload adjacent images for smooth navigation
          preloadAdjacentImages();
        };
        img.onerror = function () {
          mainImg.src = currentGalleryImages[currentGalleryIndex];
          mainImg.style.display = "block";
          if (spinner) spinner.style.display = "none";
        };
        img.src = currentGalleryImages[currentGalleryIndex];

        counter.textContent = `Image ${currentGalleryIndex + 1} of ${currentGalleryImages.length}`;
      }

      function preloadAdjacentImages() {
        if (!currentGalleryImages.length) return;

        // Preload next image
        const nextIndex =
          (currentGalleryIndex + 1) % currentGalleryImages.length;
        if (nextIndex !== currentGalleryIndex) {
          const nextImg = new Image();
          nextImg.src = currentGalleryImages[nextIndex];
        }

        // Preload previous image
        const prevIndex =
          (currentGalleryIndex - 1 + currentGalleryImages.length) %
          currentGalleryImages.length;
        if (prevIndex !== currentGalleryIndex) {
          const prevImg = new Image();
          prevImg.src = currentGalleryImages[prevIndex];
        }
      }

      function openGalleryModal(images, startIndex = 0) {
        if (!Array.isArray(images) || !images.length) {
          return;
        }
        const modalEl = document.getElementById("galleryModal");
        if (!modalEl) return;

        currentGalleryImages = images;
        currentGalleryIndex = startIndex;
        renderGalleryViewer();

        if (!galleryModalInstance) {
          galleryModalInstance = new bootstrap.Modal(modalEl);
        }

        // Push history state when opening gallery
        history.pushState({ galleryOpen: true }, "");
        galleryModalInstance.show();
      }

      function showGalleryNext() {
        if (!currentGalleryImages.length) return;
        currentGalleryIndex =
          (currentGalleryIndex + 1) % currentGalleryImages.length;
        renderGalleryViewer();
      }

      function showGalleryPrev() {
        if (!currentGalleryImages.length) return;
        currentGalleryIndex =
          (currentGalleryIndex - 1 + currentGalleryImages.length) %
          currentGalleryImages.length;
        renderGalleryViewer();
      }

      function syncCardGalleryState(projectId, images) {
        const card = document.querySelector(`[data-project-id="${projectId}"]`);
        if (!card) return;
        const json = JSON.stringify(
          images.length ? images : ["./placeholder.png"],
        );
        const link = card.querySelector(".project-image-link");
        const img = link
          ? link.querySelector("img")
          : card.querySelector("img");
        const counterEl = card.querySelector(
          ".project-gallery .small.text-muted",
        );
        const mainSrc = images.length ? images[0] : "./placeholder.png";
        card.setAttribute("data-images", json);
        if (link) {
          link.href = mainSrc;
          link.setAttribute("data-images", json);
        }
        if (img) {
          img.src = mainSrc;
          img.setAttribute("data-images", json);
        }
        // Counter label removed - only shown in PROJECT GALLERY modal
      }

      function deleteCurrentGalleryImage() {
        if (!currentProjectId || !currentGalleryImages.length) return;
        const imagePath = currentGalleryImages[currentGalleryIndex];
        const formData = new FormData();
        formData.append("action", "delete_image");
        formData.append("project_id", currentProjectId);
        formData.append("image_path", imagePath);

        fetch("upload.php", { method: "POST", body: formData })
          .then((resp) => resp.json())
          .then((data) => {
            if (data.success) {
              currentGalleryImages.splice(currentGalleryIndex, 1);
              if (!currentGalleryImages.length) {
                if (galleryModalInstance) galleryModalInstance.hide();
                window.location.reload();
                return;
              }
              if (currentGalleryIndex >= currentGalleryImages.length) {
                currentGalleryIndex = currentGalleryImages.length - 1;
              }
              syncCardGalleryState(currentProjectId, currentGalleryImages);
              renderGalleryViewer();
            } else {
              alert("Delete failed: " + data.message);
            }
          })
          .catch((err) => alert("Delete error: " + err.message));
      }

      const nextBtn = document.getElementById("galleryNextBtn");
      const prevBtn = document.getElementById("galleryPrevBtn");
      if (nextBtn) nextBtn.addEventListener("click", showGalleryNext);
      if (prevBtn) prevBtn.addEventListener("click", showGalleryPrev);

      // Handle gallery modal close to manage history
      const galleryModalEl = document.getElementById("galleryModal");
      if (galleryModalEl) {
        galleryModalEl.addEventListener("hidden.bs.modal", function () {
          // Only go back in history if modal wasn't closed by back button
          if (
            !galleryClosedByBackButton &&
            window.history.state &&
            window.history.state.galleryOpen
          ) {
            window.history.back();
          }
          // Reset the flag
          galleryClosedByBackButton = false;
        });
      }

      document.addEventListener("click", function (e) {
        const link = e.target.closest(".project-image-link");
        if (!link) return;
        e.preventDefault();
        let images = [];
        try {
          images = JSON.parse(link.getAttribute("data-images") || "[]");
        } catch (err) {
          images = [];
        }
        if (!images.length && link.href) {
          images = [link.href];
        }
        const card = link.closest(".project-card");
        currentProjectId = card ? card.getAttribute("data-project-id") : null;
        openGalleryModal(images, 0);
      });

      document.addEventListener("DOMContentLoaded", prepareGalleryLinks);
      // Ensure gallery links are prepared even if DOMContentLoaded has already fired
      prepareGalleryLinks();

      // Close modal when clicking outside
      document
        .getElementById("uploadModal")
        .addEventListener("click", function (e) {
          if (e.target === this) {
            closeUploadModal();
          }
        });

      // Profile Picture Upload Functions
      let selectedProfileFile = null;

      function handleProfileFileSelect(event) {
        const file = event.target.files[0];
        if (!file) {
          return;
        }

        selectedProfileFile = file;

        const reader = new FileReader();
        reader.onload = function (e) {
          const preview = document.getElementById("profileUploadPreview");
          if (preview) {
            preview.src = e.target.result;
            preview.classList.add("show");
          }
        };
        reader.readAsDataURL(file);

        const uploadBtn = document.getElementById("profileUploadBtn");
        if (uploadBtn) {
          uploadBtn.style.display = "inline-block";
        }

        const profileUploadStatus = document.getElementById(
          "profileUploadStatus",
        );
        if (profileUploadStatus) {
          profileUploadStatus.innerHTML = "Profile image ready to upload.";
        }

        uploadProfilePictureDirectly(file);
      }

      function uploadProfilePicture() {
        if (!selectedProfileFile) {
          return;
        }
        uploadProfilePictureDirectly(selectedProfileFile);
      }

      function resetProfileUploadForm() {
        const profileInput = document.getElementById("profileFileInput");
        if (profileInput) {
          profileInput.value = "";
        }

        const profilePreview = document.getElementById("profileUploadPreview");
        if (profilePreview) {
          profilePreview.classList.remove("show");
          profilePreview.removeAttribute("src");
        }

        const profileUploadBtn = document.getElementById("profileUploadBtn");
        if (profileUploadBtn) {
          profileUploadBtn.style.display = "none";
        }

        const profileUploadStatus = document.getElementById(
          "profileUploadStatus",
        );
        if (profileUploadStatus) {
          profileUploadStatus.innerHTML = "";
        }

        selectedProfileFile = null;
      }

      function uploadProfilePictureDirectly(file) {
        if (!file.type.match("image.*")) {
          alert("Please select an image file");
          return;
        }

        if (file.size > 5 * 1024 * 1024) {
          alert("File size must be less than 5MB");
          return;
        }

        const formData = new FormData();
        formData.append("image", file);
        formData.append("action", "update_profile");

        showToggleNotification("Uploading profile picture...");

        fetch("upload.php", {
          method: "POST",
          body: formData,
        })
          .then((response) => response.json())
          .then((data) => {
            if (data.success) {
              showToggleNotification("Profile picture updated! Reloading...");

              // Update profile picture on page
              const profilePicture = document.getElementById("profilePicture");
              if (profilePicture) {
                profilePicture.src = data.data.path;
              }
              // Also update hero profile picture
              const heroProfilePic =
                document.getElementById("heroProfilePicture");
              if (heroProfilePic) {
                heroProfilePic.src = data.data.path;
              }

              setTimeout(() => {
                window.location.reload();
              }, 1000);
            } else {
              showToggleNotification(data.message);
            }
          })
          .catch((error) => {
            showToggleNotification("Upload failed: " + error.message);
          });
      }

      // Close modals when clicking outside
      ["mainMenuModal"].forEach((modalId) => {
        const modal = document.getElementById(modalId);
        if (modal) {
          modal.addEventListener("click", function (e) {
            if (e.target === this) {
              this.classList.remove("active");
            }
          });
        }
      });
    </script>

    <!-- AI Chatbot Styles -->
    <style>
      /* Chatbot Toggle Button - to the left of viewer counter */
      #chatbotToggle {
        position: fixed;
        right: 12px;
        bottom: 12px;
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background: linear-gradient(135deg, #0a0a0f 0%, #1a1c25 100%);
        border: 2px solid #00fff7;
        color: #00fff7;
        font-size: 1.3rem;
        cursor: pointer;
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow:
          0 0 18px #00fff740,
          0 0 6px #00fff720 inset;
        transition: all 0.3s ease;
        animation: chatBtnPulse 2.5s infinite;
      }
      #chatbotToggle:hover {
        transform: scale(1.1);
        box-shadow:
          0 0 28px #00fff770,
          0 0 12px #00fff740 inset;
      }
      #chatbotToggle.active {
        background: #00fff7;
        color: #0a0a0f;
        animation: none;
      }
      @keyframes chatBtnPulse {
        0%,
        100% {
          box-shadow:
            0 0 18px #00fff740,
            0 0 6px #00fff720 inset;
        }
        50% {
          box-shadow:
            0 0 28px #00fff760,
            0 0 10px #00fff730 inset;
        }
      }

      /* Chatbot Window */
      #chatbotWindow {
        position: fixed;
        right: 12px;
        bottom: 80px;
        width: 500px;
        height: 520px;
        background: #0d0f14;
        border: 1px solid #00fff740;
        border-radius: 15px;
        z-index: 10001;
        display: none;
        flex-direction: column;
        overflow: hidden;
        box-shadow:
          0 8px 40px #00000080,
          0 0 30px #00fff718;
        animation: chatWindowIn 0.35s ease-out;
        touch-action: none;
      }
      #chatbotWindow.open {
        display: flex;
      }
      @keyframes chatWindowIn {
        from {
          opacity: 0;
          transform: translateY(20px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      /* Chat Header */
      .chat-header {
        background: linear-gradient(135deg, #101217 0%, #1a1c25 100%);
        padding: 14px 16px;
        display: flex;
        align-items: center;
        gap: 10px;
        border-bottom: 1px solid #00fff730;
        flex-shrink: 0;
        min-height: 62px;
        touch-action: none;
      }
      .chat-header-avatar {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        border: 2px solid #00fff7;
        object-fit: cover;
      }
      .chat-header-info {
        flex: 1;
      }
      .chat-header-name {
        font-family: "Orbitron", sans-serif;
        font-size: 0.8rem;
        font-weight: 700;
        color: #00fff7;
        letter-spacing: 1px;
      }
      .chat-header-status {
        font-size: 0.65rem;
        color: #00ff88;
      }
      .chat-header-status::before {
        content: "";
        display: inline-block;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: #00ff88;
        margin-right: 5px;
        animation: statusBlink 1.5s infinite;
      }
      @keyframes statusBlink {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.3;
        }
      }
      .chat-close-btn {
        background: none;
        border: none;
        color: #00fff780;
        font-size: 1.2rem;
        cursor: pointer;
        transition: color 0.2s;
        padding: 4px;
      }
      .chat-close-btn:hover {
        color: #ff4757;
      }

      /* Chat Messages Area */
      .chat-messages {
        flex: 1;
        overflow-y: auto;
        padding: 16px;
        display: flex;
        flex-direction: column;
        gap: 12px;
        min-height: 0;
        scrollbar-width: thin;
        scrollbar-color: #00fff730 transparent;
        touch-action: pan-y;
        -webkit-overflow-scrolling: touch;
      }
      .chat-messages::-webkit-scrollbar {
        width: 4px;
      }
      .chat-messages::-webkit-scrollbar-track {
        background: transparent;
      }
      .chat-messages::-webkit-scrollbar-thumb {
        background: #00fff730;
        border-radius: 4px;
      }

      /* Message Bubbles */
      .chat-msg {
        max-width: 85%;
        padding: 10px 14px;
        border-radius: 14px;
        font-size: 0.85rem;
        line-height: 1.5;
        animation: msgFadeIn 0.3s ease-out;
        word-wrap: break-word;
      }
      @keyframes msgFadeIn {
        from {
          opacity: 0;
          transform: translateY(8px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .chat-msg.bot {
        align-self: flex-start;
        background: linear-gradient(135deg, #141720 0%, #1a1e2e 100%);
        border: 1px solid #00fff720;
        color: #e0e0e0;
        border-bottom-left-radius: 4px;
      }
      .chat-msg.bot br + .code-block-wrapper {
        margin-top: 6px;
      }
      .chat-msg.bot .code-block-wrapper:first-child {
        margin-top: 0;
      }
      .chat-msg.bot p {
        margin: 0 0 8px 0;
      }
      .chat-msg.bot p:last-child {
        margin-bottom: 0;
      }
      .chat-msg.user {
        align-self: flex-end;
        background: linear-gradient(135deg, #00fff715 0%, #00fff708 100%);
        border: 1px solid #00fff730;
        color: #00fff7;
        border-bottom-right-radius: 4px;
      }

      /* Code Block Styles for Chatbot */
      .chat-msg pre {
        background: #1e1e1e;
        border: 1px solid #00fff730;
        border-radius: 15px;
        padding: 16px;
        margin: 8px 0;
        overflow-x: auto;
        position: relative;
        line-height: 1.6;
      }
      .chat-msg code {
        font-family: "Consolas", "Monaco", "Courier New", monospace;
        font-size: 14px;
        line-height: 1.6;
        color: #abb2bf;
        white-space: pre-wrap;
        word-wrap: break-word;
        word-break: normal;
        overflow-wrap: break-word;
      }
      .chat-msg pre code {
        display: block;
        padding: 0;
        background: transparent;
        border: none;
        tab-size: 4;
        -moz-tab-size: 4;
        white-space: pre-wrap;
      }
      .chat-msg code:not(pre code) {
        background: #1e1e1e;
        padding: 3px 8px;
        border-radius: 4px;
        border: 1px solid #00fff720;
        font-size: 13px;
        color: #00fff7;
        font-weight: 500;
      }
      .code-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 8px 14px;
        background: #282c34;
        border-bottom: 1px solid #00fff730;
        border-radius: 15px 15px 0 0;
        margin: 0;
      }
      .code-language {
        color: #00fff7;
        font-size: 11px;
        font-weight: 700;
        text-transform: uppercase;
        font-family: "Orbitron", sans-serif;
        letter-spacing: 1px;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .code-copy-btn {
        background: transparent;
        border: 1px solid #00fff750;
        color: #00fff7;
        padding: 5px 12px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 11px;
        transition: all 0.2s ease;
        font-family: "Poppins", sans-serif;
        font-weight: 500;
      }
      .code-copy-btn:hover {
        background: #00fff720;
        border-color: #00fff7;
        transform: translateY(-1px);
      }
      .code-copy-btn.copied {
        background: #00fff730;
        color: #00ff00;
        border-color: #00ff00;
      }
      .code-block-wrapper {
        margin: 6px 0 8px 0;
        border-radius: 15px;
        overflow: hidden;
        border: 1px solid #00fff730;
        box-shadow: 0 2px 8px rgba(0, 255, 247, 0.1);
        display: inline-block;
        width: 100%;
        max-width: 100%;
      }
      .code-block-wrapper pre {
        margin: 0;
        border: none;
        border-radius: 0 0 8px 8px;
        max-height: 500px;
        overflow-y: auto;
      }
      .code-block-wrapper pre::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      .code-block-wrapper pre::-webkit-scrollbar-track {
        background: #1e1e1e;
      }
      .code-block-wrapper pre::-webkit-scrollbar-thumb {
        background: #00fff740;
        border-radius: 4px;
      }
      .code-block-wrapper pre::-webkit-scrollbar-thumb:hover {
        background: #00fff760;
      }

      /* Typing Indicator */
      .chat-typing {
        display: flex;
        gap: 4px;
        padding: 10px 14px;
        align-self: flex-start;
      }
      .chat-typing span {
        width: 7px;
        height: 7px;
        border-radius: 50%;
        background: #00fff7;
        animation: typingDot 1.2s infinite;
      }
      .chat-typing span:nth-child(2) {
        animation-delay: 0.2s;
      }
      .chat-typing span:nth-child(3) {
        animation-delay: 0.4s;
      }
      @keyframes typingDot {
        0%,
        60%,
        100% {
          opacity: 0.3;
          transform: scale(0.8);
        }
        30% {
          opacity: 1;
          transform: scale(1.1);
        }
      }

      /* Chat Input Area */
      .chat-input-area {
        padding: 12px;
        border-top: 1px solid #00fff720;
        display: flex;
        gap: 8px;
        background: #101217;
        flex-shrink: 0;
        touch-action: none;
      }
      .chat-input {
        flex: 1;
        background: #1a1c25;
        border: 1px solid #00fff730;
        border-radius: 15px;
        padding: 8px 16px;
        color: #e0e0e0;
        font-size: 0.85rem;
        font-family: "Poppins", sans-serif;
        outline: none;
        transition: border-color 0.2s;
        position: relative;
        will-change: auto;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-touch-callout: none;
        resize: none;
        overflow-y: hidden;
        min-height: 20px;
        max-height: 120px;
        line-height: 1.4;
      }
      .chat-input:focus {
        border-color: #00fff7;
        box-shadow: 0 0 8px #00fff720;
        scroll-margin: 0;
        scroll-snap-align: none;
      }
      .chat-input::placeholder {
        color: #ffffff40;
      }

      /* Prevent iOS/Android selection handles, magnifying glass, and clipboard menu */
      .chat-input::selection {
        background: transparent;
      }
      .chat-input::-moz-selection {
        background: transparent;
      }
      .chat-input::-webkit-selection {
        background: transparent;
      }
      .chat-input::-webkit-textfield-decoration-container {
        display: none !important;
      }
      .chat-input::-webkit-contacts-auto-fill-button {
        display: none !important;
        visibility: hidden !important;
      }
      .chat-input::-webkit-credentials-auto-fill-button {
        display: none !important;
        visibility: hidden !important;
      }

      .chat-send-btn {
        width: 38px;
        height: 38px;
        border-radius: 50%;
        background: #00fff7;
        border: none;
        color: #0a0a0f;
        font-size: 0.95rem;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
      }
      .chat-send-btn:hover {
        transform: scale(1.1);
        box-shadow: 0 0 12px #00fff750;
      }
      .chat-send-btn:disabled {
        opacity: 0.4;
        cursor: not-allowed;
        transform: none;
      }

      /* Quick Action Chips */
      .chat-chips {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
        padding: 8px 16px;
        border-top: 1px solid #00fff710;
        background: #0d0f14;
        touch-action: none;
      }
      .chat-chip {
        background: #1a1c25;
        border: 1px solid #00fff725;
        border-radius: 15px;
        padding: 4px 12px;
        font-size: 0.72rem;
        color: #00fff7;
        cursor: pointer;
        transition: all 0.2s;
        font-family: "Poppins", sans-serif;
      }
      .chat-chip:hover {
        background: #00fff715;
        border-color: #00fff7;
      }

      /* Powered By */
      .chat-powered {
        text-align: center;
        padding: 4px;
        font-size: 0.6rem;
        color: #00fff7;
        background: #0d0f14;
        font-family: "Orbitron", sans-serif;
        letter-spacing: 1px;
      }

      /* TTS Mute Toggle */
      .tts-toggle {
        background: none;
        border: 1px solid #00fff740;
        color: #00fff7;
        font-size: 1rem;
        cursor: pointer;
        padding: 4px 8px;
        border-radius: 6px;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 4px;
      }
      .tts-toggle:hover {
        background: #00fff720;
        border-color: #00fff7;
      }
      .tts-toggle.muted {
        color: #ff475790;
        border-color: #ff475740;
      }
      .tts-toggle.muted:hover {
        background: #ff475720;
        border-color: #ff4757;
      }

      /* Prompt Limit Counter in Header */
      .prompt-limit-counter {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 10px;
        color: #ffffff80;
        padding: 4px 8px;
        background: #00000040;
        border-radius: 6px;
        border: 1px solid #00fff720;
      }
      .prompt-limit-counter span {
        white-space: nowrap;
      }
      @media (max-width: 480px) {
        .prompt-limit-counter {
          font-size: 9px;
          padding: 3px 6px;
          gap: 4px;
        }
      }

      /* Backdrop overlay */
      #chatbotBackdrop {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        z-index: 10000;
        display: none;
        animation: backdropFadeIn 0.3s ease-out;
      }
      #chatbotBackdrop.show {
        display: block;
      }
      @keyframes backdropFadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      /* Prevent body scroll when chatbot is open — scroll position saved/restored via JS */
      body.chatbot-open {
        overflow: hidden !important;
        position: fixed !important;
        height: 100vh;
        height: 100dvh;
        width: 100%;
        left: 0;
        /* top is set dynamically via JS to preserve scroll position */
      }

      /* Tablet & larger phones */
      @media (max-width: 768px) {
        #chatbotToggle {
          width: 56px;
          height: 56px;
          font-size: 1.4rem;
          right: 8px;
          bottom: 8px;
        }
        #mobileThemeToggle {
          width: 56px;
          height: 56px;
          font-size: 1.2rem;
          right: 8px;
          bottom: 72px;
        }
        #chatbotWindow {
          width: calc(100vw - 16px);
          height: calc(100dvh - 16px);
          max-height: calc(100dvh - 16px);
          right: 8px;
          left: 8px;
          top: 8px;
          bottom: 8px;
          border-radius: 14px;
        }
        .chat-header {
          padding: 10px 14px;
        }
        .chat-messages {
          padding: 12px;
          gap: 10px;
        }
        .chat-msg {
          font-size: 0.82rem;
          padding: 9px 12px;
          max-width: 88%;
        }
        .chat-input-area {
          padding: 10px;
          gap: 6px;
        }
        .chat-input {
          padding: 8px 14px;
          font-size: 0.82rem;
        }
        .chat-chips {
          padding: 6px 12px;
          gap: 5px;
        }
        .chat-chip {
          padding: 3px 10px;
          font-size: 0.7rem;
        }
        .chat-send-btn {
          width: 36px;
          height: 36px;
          font-size: 0.9rem;
        }
      }

      /* Standard phones */
      @media (max-width: 480px) {
        #chatbotToggle {
          width: 52px;
          height: 52px;
          font-size: 1.3rem;
          right: 6px;
          bottom: 6px;
        }
        #mobileThemeToggle {
          width: 52px;
          height: 52px;
          font-size: 1.1rem;
          right: 6px;
          bottom: 66px;
        }
        #chatbotWindow {
          position: fixed;
          width: 100vw;
          height: 100dvh;
          max-height: 100dvh;
          right: 0;
          left: 0;
          top: 0;
          bottom: 0;
          border-radius: 0;
          border: none;
          overflow: hidden;
        }
        .chat-header {
          padding: 10px 12px;
          padding-top: max(10px, env(safe-area-inset-top));
        }
        .chat-header-avatar {
          width: 32px;
          height: 32px;
        }
        .chat-header-name {
          font-size: 0.75rem;
        }
        .chat-input-area {
          padding: 8px;
          padding-bottom: max(8px, env(safe-area-inset-bottom));
        }
        .chat-input {
          padding: 7px 12px;
          font-size: 0.8rem;
          border-radius: 18px;
        }
        .chat-send-btn {
          width: 34px;
          height: 34px;
          font-size: 0.85rem;
          min-width: 34px;
        }
        .chat-msg {
          font-size: 0.8rem;
          padding: 8px 11px;
          max-width: 90%;
        }
        .chat-messages {
          padding: 10px;
          gap: 8px;
        }
        .chat-chips {
          padding: 5px 10px;
          gap: 4px;
        }
        .chat-chip {
          padding: 3px 8px;
          font-size: 0.68rem;
        }
        .chat-powered {
          font-size: 0.55rem;
          padding: 3px;
        }
      }

      /* Very small phones (iPhone SE, Galaxy A series, etc.) */
      @media (max-width: 375px) {
        .chat-header-name {
          font-size: 0.7rem;
          letter-spacing: 0.5px;
        }
        .chat-header-status {
          font-size: 0.6rem;
        }
        .chat-msg {
          font-size: 0.78rem;
          padding: 7px 10px;
        }
        .chat-input {
          font-size: 0.78rem;
          padding: 6px 10px;
        }
        .chat-chips {
          gap: 3px;
          padding: 4px 8px;
        }
        .chat-chip {
          font-size: 0.65rem;
          padding: 2px 7px;
        }
      }

      /* Landscape mode on phones */
      @media (max-height: 500px) and (orientation: landscape) {
        #chatbotWindow {
          width: 100vw;
          height: 100dvh;
          max-height: 100dvh;
          right: 0;
          left: 0;
          top: 0;
          bottom: 0;
          border-radius: 0;
          border: none;
        }
        .chat-header {
          padding: 6px 12px;
        }
        .chat-header-avatar {
          width: 28px;
          height: 28px;
        }
        .chat-messages {
          padding: 6px 10px;
          gap: 6px;
        }
        .chat-msg {
          font-size: 0.75rem;
          padding: 6px 10px;
        }
        .chat-input-area {
          padding: 6px 8px;
        }
        .chat-input {
          padding: 5px 10px;
          font-size: 0.75rem;
        }
        .chat-send-btn {
          width: 30px;
          height: 30px;
          min-width: 30px;
          font-size: 0.8rem;
        }
        .chat-chips {
          padding: 3px 6px;
          gap: 3px;
        }
        .chat-chip {
          font-size: 0.6rem;
          padding: 2px 6px;
        }
        .chat-powered {
          display: none;
        }
      }

      /* When keyboard is open - chatbot adapts via JS class */
      #chatbotWindow.keyboard-open {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        bottom: 0 !important;
        width: 100vw !important;
        max-width: 100vw !important;
        border-radius: 0 !important;
        border: none !important;
        overflow: hidden !important;
        display: flex !important;
        flex-direction: column !important;
        transform: none !important;
      }

      /* Header always stays visible at top */
      #chatbotWindow.keyboard-open .chat-header {
        flex-shrink: 0 !important;
        position: relative;
        top: 0;
        z-index: 10;
        min-height: 62px !important;
      }

      /* Messages area shrinks to fill available space */
      #chatbotWindow.keyboard-open .chat-messages {
        flex: 1 1 auto;
        min-height: 40px;
        overflow-y: auto;
      }

      /* Input stays at bottom of visible area */
      #chatbotWindow.keyboard-open .chat-input-area {
        flex-shrink: 0;
        position: relative;
        bottom: 0;
        z-index: 10;
      }

      /* Hide non-essential elements when keyboard is open to save space */
      #chatbotWindow.keyboard-open .chat-powered {
        display: none;
      }

      /* Ensure smooth transitions and no overflow */
      #chatbotWindow {
        transition:
          height 0.2s ease-out,
          max-height 0.2s ease-out;
        overflow: hidden;
        overscroll-behavior: none;
        scroll-behavior: auto;
      }

      /* Prevent backdrop from interfering with chatbot */
      #chatbotBackdrop {
        pointer-events: auto;
        overscroll-behavior: none;
      }
      #chatbotBackdrop.show ~ #chatbotWindow {
        pointer-events: auto;
      }

      /* Lock body when chatbot is open - prevent any scrolling */
      body.chatbot-open {
        overscroll-behavior: none !important;
        -webkit-overflow-scrolling: auto !important;
      }

      /* === MOBILE LAYOUT STABILITY === */
      /* GPU-layer all fixed elements to prevent keyboard-induced jitter */
      .navbar.fixed-top,
      #chatbotToggle,
      #mobileThemeToggle,
      #viewerCounter,
      #chatbotBackdrop {
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
      }

      /* Hide viewer counter & chatbot toggle when chatbot is fullscreen on mobile */
      body.chatbot-open #viewerCounter,
      body.chatbot-open #chatbotToggle,
      body.chatbot-open #mobileThemeToggle {
        opacity: 0 !important;
        pointer-events: none !important;
        transition: opacity 0.15s ease;
      }

      /* Prevent fixed element shift on iOS when keyboard opens */
      @supports (-webkit-touch-callout: none) {
        .navbar.fixed-top {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          right: 0 !important;
          will-change: transform;
        }
        #chatbotToggle,
        #mobileThemeToggle,
        #viewerCounter {
          will-change: transform;
        }
      }

      /* Ensure chatbot window uses safe viewport on all mobile */
      @media (max-width: 768px) {
        #chatbotWindow.open {
          height: 100dvh;
          height: -webkit-fill-available;
        }
      }

      /* Global glow removal */
      *,
      *::before,
      *::after {
        text-shadow: none !important;
        box-shadow: none !important;
        filter: none !important;
      }
    </style>

    <!-- Chatbot Toggle Button -->
    <button
      id="chatbotToggle"
      onclick="toggleChatbot()"
      title="Chat with AI Assistant"
    >
      <i class="fas fa-robot"></i>
    </button>

    <!-- Mobile Floating Theme Toggle (above chatbot, mobile only) -->
    <button id="mobileThemeToggle" onclick="toggleTheme()" title="Switch theme">
      <i class="fas fa-moon icon-moon"></i>
      <i class="fas fa-sun icon-sun"></i>
    </button>

    <!-- Backdrop Overlay -->
    <div id="chatbotBackdrop" onclick="toggleChatbot()"></div>

    <!-- Chatbot Window -->
    <div id="chatbotWindow">
      <div class="chat-header">
        <img src="./RUSSEL.png" alt="Russel AI" class="chat-header-avatar" />
        <div class="chat-header-info">
          <div class="chat-header-name">Russel AI</div>
          <div class="chat-header-status">
            <span id="chatModelStatus">Online</span>
          </div>
        </div>
        <div
          class="prompt-limit-counter"
          id="promptLimitCounter"
          title="Daily prompt limit"
        >
          <span id="promptCounter">Prompts: 20/20</span>
        </div>
        <button
          class="tts-toggle"
          id="ttsToggle"
          onclick="toggleTTS()"
          title="Toggle Text-to-Speech"
        >
          <i class="fas fa-volume-up" id="ttsIcon"></i>
        </button>
        <button
          class="chat-close-btn"
          onclick="toggleChatbot()"
          title="Close chat"
        >
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="chat-messages" id="chatMessages">
        <div class="chat-msg bot">
          Hey! I'm <strong>Russel AI</strong>, Jan Russel's assistant. I can
          help build simple web apps, answer questions about his projects,
          skills, services, or personal life! Multilingual support enabled.<br /><br />
          <span style="font-size: 11px; color: #ffffff80"
            >Note: You have 20 prompts available per day. Quick action buttons
            are free!</span
          >
        </div>
      </div>
      <div class="chat-chips" id="chatChips">
        <span class="chat-chip" onclick="sendChip(this)"
          >What's his expertise?</span
        >
        <span class="chat-chip" onclick="sendChip(this)">View projects</span>
        <span class="chat-chip" onclick="sendChip(this)">How to hire him?</span>
        <span class="chat-chip" onclick="sendChip(this)">Tech stack?</span>
      </div>
      <form
        class="chat-input-area"
        autocomplete="off"
        action="javascript:void(0);"
        onsubmit="return false;"
        data-form-type="other"
        method="post"
      >
        <!-- Fake input to confuse Android Autofill Service -->
        <input
          type="text"
          style="
            position: absolute;
            left: -9999px;
            width: 1px;
            height: 1px;
            opacity: 0;
            pointer-events: none;
          "
          tabindex="-1"
          autocomplete="off"
          aria-hidden="true"
          name="fake_chat_field"
        />

        <textarea
          class="chat-input"
          id="chatInput"
          placeholder="Ask me anything..."
          rows="1"
          autocomplete="off"
          autocorrect="off"
          autocapitalize="off"
          spellcheck="false"
          aria-autocomplete="none"
          role="textbox"
          data-form-type="other"
          data-lpignore="true"
          data-1p-ignore="true"
          inputmode="text"
          enterkeyhint="send"
          name="q_chat_msg"
          readonly
          onfocus="this.removeAttribute('readonly')"
          onselect="return false;"
          ondragstart="return false;"
          ondrop="return false;"
          data-no-autofill="true"
          x-autocompletetype="off"
          autocompletetype="off"
        ></textarea>
        <button
          type="button"
          class="chat-send-btn"
          id="chatSendBtn"
          onclick="sendChatMessage()"
        >
          <i class="fas fa-paper-plane"></i>
        </button>
      </form>
      <div class="chat-powered">
        Powered by <span id="chatPoweredModel">Gemini AI</span>
      </div>
    </div>

    <!-- Chatbot Script — Gemini AI -->
    <script>
      (function () {
        // API calls now handled by PHP backend (chat.php) to keep API key secure

        // Dynamically scrape portfolio content to build system prompt
        function buildSystemPrompt() {
          let prompt = `You are "Russel AI", Jan Russel E. Peñafiel's personal AI assistant. You can answer ANY question about anything. For professional and web development topics, base your answers on the portfolio data below. For personal, casual, fun, or general topics, respond freely and creatively based on Jan Russel's personality.

IMPORTANT: You NEVER refuse to answer. You always engage with every question, demand, or topic.

FORMATTING RULES:
- For programming/code questions: Use code blocks with language specification
- Format code as: \`\`\`language\\ncode here\\n\`\`\`
- Supported languages: javascript, python, php, html, css, java, sql, bash, etc.
- For inline code: Use single backticks \`code\`
- For non-code responses: Plain text only, no markdown formatting
- NEVER use asterisks (*) for bold or italic formatting in explanations
- NO markdown emphasis: Never use **bold**, *italic*, __underline__, or any asterisk-based formatting
- When explaining code: Always mention the filename in your explanation text (e.g., "Here is the code for index.php:") instead of relying on auto-generated labels
- Provide clear comments and step-by-step explanation in plain text

Keep responses concise. Max 4 sentences for simple questions. Expand for programming tutorials and code explanations.

LANGUAGES: Auto-detect and respond PURELY in user's language (English OR Tagalog). NO MIXING.
- TAGALOG: If user message contains Tagalog words (niya, kanyang, ng, at, mga, ay, ba, ka, ako, etc.) - Respond in PURE TAGALOG ONLY
- ENGLISH: If user message is in English - Respond in PURE ENGLISH ONLY
- SWITCH: Each message is independent - detect language per message and respond accordingly
- NO TAGLISH: Never mix English and Tagalog in the same response. Pick one language and stick to it completely.

`;

          // Extract personal info from hero section
          const heroSection = document.querySelector(".hero-section");
          if (heroSection) {
            const name =
              heroSection.querySelector("h1")?.textContent.trim() ||
              "Jan Russel E. Peñafiel";
            const title =
              heroSection.querySelector(".lead")?.textContent.trim() || "";
            const location =
              Array.from(heroSection.querySelectorAll(".badge-custom"))
                .find((el) => el.textContent.includes("Location"))
                ?.textContent.replace("Location:", "")
                .trim() || "";
            const team =
              Array.from(heroSection.querySelectorAll(".badge-custom"))
                .find((el) => el.textContent.includes("Team"))
                ?.textContent.replace("Software Development Team:", "")
                .trim() || "";
            const github =
              heroSection.querySelector('a[href*="github.com"]')?.href || "";
            const linkedin =
              heroSection.querySelector('a[href*="linkedin.com"]')?.href || "";

            prompt += `ABOUT ${name.toUpperCase()}:\n`;
            prompt += `- ${title}\n`;
            if (location) prompt += `- Location: ${location}\n`;
            if (team) prompt += `- Team: ${team}\n`;
            if (github) prompt += `- GitHub: ${github}\n`;
            if (linkedin) prompt += `- LinkedIn: ${linkedin}\n`;
            prompt += `\n`;
          }

          // Personal info (fun facts)
          prompt += `PERSONAL (Be playful!):\n`;
          prompt += `- Status: Single, focused on coding\n`;
          prompt += `- Favorite: Cyan (#00fff7), Coffee, Chicken\n`;
          prompt += `- Ideal Partner: Smart, mestiza, funny, understanding, tech-appreciative lady\n`;
          prompt += `- Hobbies: Coding, gaming, UI design, tech tutorials\n`;
          prompt += `- Dream: Deployed Government system or tech startup\n`;
          prompt += `- Personality: Friendly, driven, perfectionist, eager learner\n`;
          prompt += `- Work Style: Night owl coder, loves clean code, debugging enthusiast\n`;
          prompt += `- Music: Codes better with Tagalog and English love songs, metallic love songs & tech podcasts\n`;
          prompt += `- Pet Peeve: Messy code, missing semicolons, unclear variable names, teaches but is wrong,
feeling good developer\n`;
          prompt += `- Motto: "Code with passion, debug with patience, deploy with confidence"\n`;
          prompt += `- Fun: Named profile pic "Cybertron Biometric UI", cyberpunk design fan\n`;
          prompt += `- Skills Pride: Healthcare and government systems, real-world impact projects\n`;
          prompt += `- Learning: Always exploring new frameworks and programming language\n\n`;

          // Extract tech skills from tech stack section
          const techSection = document.querySelector("#tech");
          if (techSection) {
            prompt += `TECHNICAL SKILLS:\n`;
            // Extract tech names from the divs next to tech-icon images
            const techDivs = techSection.querySelectorAll(".tech-icon");
            const skills = [];
            techDivs.forEach((icon) => {
              // Get the next sibling div that contains the tech name
              const nameDiv = icon.parentElement.querySelector(
                'div[style*="font-size"]',
              );
              if (nameDiv && nameDiv.textContent.trim()) {
                skills.push(nameDiv.textContent.trim());
              }
            });
            if (skills.length > 0) {
              prompt += `Languages & Frameworks: ${skills.slice(0, 5).join(", ")}\n`;
              prompt += `Database & Tools: ${skills.slice(5, 9).join(", ")}\n`;
              prompt += `IDEs & AI: ${skills.slice(9).join(", ")}\n`;
            } else {
              // Fallback explicit list if extraction fails
              prompt += `Languages & Frameworks: PHP, CodeIgniter 4, JavaScript, Tailwind CSS, Bootstrap\n`;
              prompt += `Database & Tools: MySQL, Apache, Git, GitHub\n`;
              prompt += `IDEs & AI: VSCode, ChatGPT, GitHub Copilot\n`;
            }
            prompt += `\n`;
          }

          // Extract projects from projects section
          const projectsSection = document.querySelector("#projects");
          if (projectsSection) {
            prompt += `FEATURED PROJECTS:\n\n`;
            const projectCards =
              projectsSection.querySelectorAll(".project-card");
            projectCards.forEach((card, index) => {
              const title =
                card.querySelector(".card-title")?.textContent.trim() || "";
              const institution =
                card.querySelector("h6")?.textContent.trim() || "";
              const description =
                card.querySelector(".card-text")?.textContent.trim() || "";
              const badges = Array.from(card.querySelectorAll(".badge"))
                .map((b) => b.textContent.trim())
                .filter((b) => b);

              if (title) {
                prompt += `${index + 1}. ${title}`;
                if (institution)
                  prompt += ` (${institution.replace(/^[^\w]+/, "")})`;
                prompt += `\n`;
                if (description) prompt += `   ${description}\n`;
                if (badges.length > 0)
                  prompt += `   Tech: ${badges.join(", ")}\n`;
                prompt += `\n`;
              }
            });
          }

          // Add services offered
          prompt += `SERVICES OFFERED:\n`;
          prompt += `- Custom web application development\n`;
          prompt += `- Healthcare and government system solutions\n`;
          prompt += `- Student and employee management systems\n`;
          prompt += `- Full-stack development (frontend + backend + database)\n`;
          prompt += `- Responsive design (mobile-first approach)\n`;
          prompt += `- E-commerce platforms & online stores\n`;
          prompt += `- API development & third-party integrations\n`;
          prompt += `- Database design & optimization\n`;
          prompt += `- Legacy system modernization & migration\n`;
          prompt += `- Real-time dashboards & data visualization\n`;
          prompt += `- Authentication systems (login, user management)\n`;
          prompt += `- File upload/management systems\n`;
          prompt += `- Report generation & PDF exports\n`;
          prompt += `- Website maintenance & bug fixes\n`;
          prompt += `- Technical consultation & code reviews\n`;
          prompt += `- Freelance commissions (currently open for new projects)\n\n`;

          // Extract contact info
          const contactSection = document.querySelector("#contact");
          if (contactSection) {
            prompt += `HOW TO HIRE:\n`;
            const github =
              document.querySelector('a[href*="github.com"]')?.href || "";
            const linkedin =
              document.querySelector('a[href*="linkedin.com"]')?.href || "";
            if (github) prompt += `- GitHub: ${github}\n`;
            if (linkedin) prompt += `- LinkedIn: ${linkedin}\n`;
            prompt += `- Resume available for download on portfolio website\n\n`;
          }

          // Add response rules
          prompt += `RULES:\n`;
          prompt += `1. NEVER REFUSE: You must ALWAYS answer every question, request, or demand. Never say you cannot answer, never decline, never redirect away. Always provide a response no matter what the topic is.\n`;
          prompt += `2. TWO MODES OF RESPONSE:\n`;
          prompt += `   A) PROFESSIONAL / WEB DEV / PORTFOLIO MODE: When the user asks about Jan Russel's tech stack, skills, projects, services, work experience, hiring, programming, web development, or anything professional - base your answers STRICTLY on the portfolio data above. Do not fabricate professional details.\n`;
          prompt += `   B) PERSONAL / CASUAL / GENERAL MODE: When the user asks about personal life, opinions, random topics, fun questions, hypothetical scenarios, advice, feelings, relationships, food, games, movies, music, life, or anything NOT directly about professional web development - answer freely and creatively. You are NOT limited to portfolio data for personal and casual conversations. Be imaginative, playful, warm, and engaging. Make up fun and fitting responses based on Jan Russel's personality traits listed above.\n`;
          prompt += `3. CRITICAL LANGUAGE DETECTION: Detect the language of EACH message separately and independently:\n`;
          prompt += `   - Analyze EACH new user message to determine its language\n`;
          prompt += `   - DO NOT assume the user will continue in the same language\n`;
          prompt += `   - Users can freely switch between English and Tagalog\n`;
          prompt += `   - TAGALOG: Look for "niya", "kanyang", "at", "ng", "ay", "mga", "ba", "ako", "ka" - respond in PURE TAGALOG\n`;
          prompt += `   - ENGLISH: Standard English words - respond in PURE ENGLISH\n`;
          prompt += `   - Match YOUR response language to THEIR current message language\n`;
          prompt += `   - NO TAGLISH: Never mix English and Tagalog in the same response\n`;
          prompt += `4. CODE FORMATTING: When answering programming questions or providing code examples:\\n`;
          prompt += `   - Use code blocks with language: \\\`\\\`\\\`javascript (or python, php, html, css, java, sql, etc.)\\n`;
          prompt += `   - Always include the language name after the opening \\\`\\\`\\\`\\n`;
          prompt += `   - ALWAYS mention the filename in your plain text explanation (e.g., "Here is the code for index.php:", "Create a file named script.js:")\\n`;
          prompt += `   - NO ASTERISKS: Never use ** or * for bold/italic/emphasis in explanations - use plain text only\\n`;
          prompt += `   - Provide a brief plain text explanation BEFORE the code block (no markdown formatting)\\n`;
          prompt += `   - Add helpful comments inside the code itself\\n`;
          prompt += `   - Keep explanations concise and clear - max 1-2 sentences\\n`;
          prompt += `   - Structure: Plain text explanation with filename → Code Block (with comments)\\n`;
          prompt += `   - For inline code references: use single backticks \\\`like this\\\`\\n`;
          prompt += `   - For non-programming responses: Plain text only, no formatting\\n`;
          prompt += `5. NO EMOJIS: Never use any emojis or emoticons in any response.\n`;
          prompt += `5a. NO ASTERISKS OR MARKDOWN FORMATTING: Never use asterisks (*) for emphasis, bold text, or any markdown formatting in explanations. Always use plain text only. This applies to ALL responses - technical explanations, step-by-step instructions, lists, and general text. NO ** for bold, NO * for italic, NO __ for underline.\n`;
          prompt += `6. Keep responses concise. Max 4 sentences for simple questions. Expand only when the question genuinely requires more detail.\n`;
          prompt += `7. Projects: When asked, name specific projects, tech used, and impact from the portfolio.\n`;
          prompt += `8. Skills: Reference the explicit tech stack above (PHP, CodeIgniter 4, JavaScript, MySQL, etc.). Connect to specific projects built with these technologies.\n`;
          prompt += `9. Hiring: GitHub, LinkedIn, Facebook, Phone number OPEN FOR COMMISSIONS, South Cotabato location.\n`;
          prompt += `10. Tech stack questions: Reference the specific technologies listed in TECHNICAL SKILLS section above. Never say programming languages are not listed.\n`;
          prompt += `11. Contact info when relevant: Facebook (facebook.com/russelicioush), Email (janrusselpenafiel01172005@gmail.com), Phone (+63 967 772 6912).\n`;
          prompt += `12. Personal questions: Be warm, funny, expressive, and open. Answer freely based on personality traits. Never refuse personal questions.\n`;
          prompt += `13. Be natural, conversational, not robotic. Match user's formality level.\n`;
          prompt += `14. Multiple questions: Answer all of them with clear separators.\n`;
          prompt += `15. Maintain context and reference earlier conversation. Avoid repetition.\n`;
          prompt += `16. Pricing/rates: "Varies by project" then suggest contact.\n`;
          prompt += `17. Comparisons: Focus on Jan Russel's unique strengths. Be confident.\n`;
          prompt += `18. Greetings: Warm welcome, brief intro as Russel AI, offer assistance.\n`;
          prompt += `19. Fun, hypothetical, or random questions: Always engage and answer creatively. Treat them as personal mode. Never say it is outside your scope.\n`;
          prompt += `20. Opinions and advice: Share thoughtful responses reflecting Jan Russel's personality and values. Be genuine.\n`;
          prompt += `21. If someone asks something you truly do not know the factual answer to, give your best creative response anyway. Never say "I cannot answer that" or "that is outside my scope."\n`;
          prompt += `22. Follow-ups: Build on previous answers naturally.\n`;
          prompt += `23. Call-to-action: End with subtle short prompts when relevant to keep conversation going.\n`;
          prompt += `24. Technical explanations: When explaining tech concepts, use simple analogies and real-world examples. Keep it accessible.\n`;
          prompt += `25. Proactive suggestions: If someone asks about one service, mention related services that might interest them.\n`;
          prompt += `26. Programming help for students: When students ask for code help:\n`;
          prompt += `   - Start with a short plain text summary (1 sentence)\n`;
          prompt += `   - Provide working code examples with inline comments\n`;
          prompt += `   - Keep explanations brief and focused\n`;
          prompt += `   - Use appropriate language: PHP for backend, JavaScript for frontend, etc.\n`;
          prompt += `27. Code examples should be practical, tested patterns that students can learn from and adapt.\n`;
          prompt += `28. Always specify the programming language in code blocks for proper syntax highlighting.\n`;
          prompt += `29. Format: Brief summary → Code with comments → Optional tip if needed (1 sentence max).\n`;
          prompt += `30. Technical Explanations Format: When explaining how technologies work together or describing technical concepts:\n`;
          prompt += `   - Use plain text only - absolutely NO asterisks, NO markdown formatting, NO special emphasis characters\n`;
          prompt += `   - Structure explanations with simple numbered lists (1. 2. 3.) or plain paragraphs\n`;
          prompt += `   - Keep it concise and summarized, not lengthy\n`;
          prompt += `   - When providing code examples, ALWAYS mention the filename in your plain text explanation\n`;
          prompt += `   - Example format: "This HTML provides the skeleton for your system. To make it functional like the SKSU Scholarship Management System or KES-SMART Jan Russel has developed, you would integrate: 1. JavaScript: To handle form submissions, dynamically update the table, and communicate with the backend without full page reloads. 2. PHP CodeIgniter 4: To process data on the server side, validate inputs, interact with the database, and serve dynamic content. 3. MySQL: To store student records, user accounts, and other related data reliably."\n`;
          prompt += `   - Mention Jan Russel's typical tech stack when relevant\n`;
          prompt += `31. Error handling: If a question is unclear, make your best interpretation and answer it. Never ask users to rephrase unless absolutely necessary.\n`;
          prompt += `31. Error handling: If a question is unclear, make your best interpretation and answer it. Never ask users to rephrase unless absolutely necessary.\n`;
          prompt += `32. Time awareness: Jan Russel is in South Cotabato, Philippines (UTC+8). Mention timezone when discussing availability or meetings.\n`;
          prompt += `33. Project inquiries: When someone expresses interest in a project, guide them toward the next steps - portfolio review, contact, or consultation.\n`;
          prompt += `34. Budget discussions: Be open about discussing project costs. Acknowledge that quality work has value. Suggest direct contact for detailed quotes.\n`;
          prompt += `35. Timeline questions: Provide realistic time estimates when possible. Mention that Jan Russel values quality over rushing. Typical small projects take 1-2 weeks, larger ones 1-3 months.\n`;
          prompt += `36. Technology recommendations: When asked about tech choices, explain why Jan Russel uses specific technologies (PHP for backend stability, CodeIgniter for rapid development, MySQL for reliable data management).\n`;
          prompt += `37. Collaboration tools: Mention that Jan Russel can work with GitHub, Discord, Zoom, Google Meet, or whatever communication platform clients prefer.\n`;
          prompt += `38. Portfolio updates: If asked about recent work, mention the latest projects shown in the portfolio and note that Jan Russel continuously adds new projects.\n`;
          prompt += `39. Learning and growth: When relevant, mention that Jan Russel stays updated with latest web development trends and actively learns new technologies.\n`;
          prompt += `40. Industry insights: Share brief thoughts on web development trends, best practices, or technology evolution when asked. Draw from Jan Russel's experience.\n`;
          prompt += `41. Client types: Mention that Jan Russel works with healthcare systems, government agencies, educational institutions, small businesses, and startups. Open to diverse projects.\n`;
          prompt += `42. Work samples: Direct users to specific portfolio projects as examples. Match their needs to relevant past work.\n`;
          prompt += `43. Revision and support: Mention that Jan Russel provides post-launch support and is open to revisions to ensure client satisfaction.\n`;
          prompt += `44. Competitive edge: Highlight Jan Russel's strengths - real-world experience with government and healthcare systems, full-stack capability, attention to detail, and dedication to clean code.\n`;
          prompt += `45. Response tone: Match the user's energy. Professional for business inquiries, casual and fun for personal chats, helpful for technical questions.\n`;
          prompt += `46. Mirror user attitude: If the user is being rude, sarcastic, or confrontational, match their energy and respond with equal wit or sass. If they are being funny or playful, be funny and playful right back. Mirror their vibe while staying true to Jan Russel's personality. Do not be overly polite if they are not. Keep it real and authentic.\n`;
          prompt += `47. Security and privacy: When relevant, mention that Jan Russel follows best practices for data security, user authentication, and secure coding standards.\n`;
          prompt += `48. Responsive design: Emphasize mobile-first approach. All projects work seamlessly on phones, tablets, and desktops.\n`;
          prompt += `49. Code quality: Mention commitment to clean, maintainable, well-documented code that other developers can easily understand and extend.\n`;
          prompt += `50. Problem-solving: When users describe challenges, acknowledge the problem and suggest how Jan Russel's skills could address it. Be solution-oriented.\n`;
          prompt += `51. Testimonials: If asked about reviews or client feedback, mention that interested parties can request references or check the portfolio for completed projects showcasing real results.\n`;
          prompt += `52. Open source: Note that Jan Russel has a GitHub profile where some projects and code samples are publicly available for review.\n`;
          prompt += `53. Continuous improvement: Convey that Jan Russel values feedback, learns from every project, and constantly refines skills and approaches.\n`;
          prompt += `54. Enthusiasm for tech: Show genuine excitement when discussing programming, new technologies, or interesting project challenges. Let Jan Russel's passion come through.\n`;
          prompt += `55. Respect boundaries: While you answer everything, maintain professionalism. If a question is inappropriate, answer briefly and steer toward more productive topics.\n`;
          prompt += `56. REMEMBER: You answer EVERYTHING. Professional questions use portfolio data. Everything else is open and free. Use code blocks with language specification for programming examples, plain text for everything else. NEVER use asterisks (*) or markdown formatting in explanations. Always mention filenames in plain text when providing code. No emojis. Be helpful, warm, knowledgeable, and engaging.\n`;

          return prompt;
        }

        // Build system prompt from page content
        const SYSTEM_PROMPT = buildSystemPrompt();

        let chatHistory = [];

        // Prompt limits (daily, server-side)
        const PROMPT_LIMIT = 20;
        let promptCount = 0;

        // Load prompt counts from server
        async function loadPromptCounts() {
          try {
            const response = await fetch("counter.php", {
              method: "POST",
              headers: { "Content-Type": "application/x-www-form-urlencoded" },
              body: "action=get_limits",
            });

            if (response.ok) {
              const data = await response.json();
              if (data.success) {
                promptCount = parseInt(data.prompt_count || 0);
                console.log(
                  `[Limit] Loaded from server: Prompts ${promptCount}/${PROMPT_LIMIT}`,
                );
                updatePromptLimitDisplay();
              }
            } else {
              console.error("[Limit] Server response error:", response.status);
            }
          } catch (e) {
            console.error("[Limit] Server error:", e);
            // Fallback to zero if server fails
            promptCount = 0;
            updatePromptLimitDisplay();
          }
        }

        // Increment prompt count on server
        async function incrementPromptCount() {
          try {
            const response = await fetch("counter.php", {
              method: "POST",
              headers: { "Content-Type": "application/x-www-form-urlencoded" },
              body: "action=increment_prompt",
            });

            if (response.ok) {
              const data = await response.json();
              if (data.success) {
                promptCount = parseInt(data.prompt_count || 0);
                updatePromptLimitDisplay();
              }
            }
          } catch (e) {
            console.error("[Limit] Increment prompt error:", e);
          }
        }

        // Initialize counts from server
        loadPromptCounts();

        const chatMessages = document.getElementById("chatMessages");
        const chatInput = document.getElementById("chatInput");
        const chatSendBtn = document.getElementById("chatSendBtn");
        const chatWindow = document.getElementById("chatbotWindow");
        const chatToggle = document.getElementById("chatbotToggle");
        const chatBackdrop = document.getElementById("chatbotBackdrop");

        // Aggressively disable autofill/autocomplete (for Android/iOS)
        if (chatInput) {
          chatInput.setAttribute("autocomplete", "off");
          chatInput.setAttribute("autocorrect", "off");
          chatInput.setAttribute("autocapitalize", "off");
          chatInput.setAttribute("spellcheck", "false");

          // Force re-apply on focus (some browsers re-enable it)
          chatInput.addEventListener(
            "focus",
            function () {
              this.setAttribute("autocomplete", "off");
              this.setAttribute("autocomplete", "disabled");
              this.setAttribute("autocomplete", "nope");
            },
            { passive: true, capture: true },
          );

          // Remove any autofill data attributes that browsers might add
          const observer = new MutationObserver(function (mutations) {
            mutations.forEach(function (mutation) {
              if (mutation.attributeName === "autocomplete") {
                if (chatInput.getAttribute("autocomplete") !== "off") {
                  chatInput.setAttribute("autocomplete", "off");
                }
              }
            });
          });
          observer.observe(chatInput, { attributes: true });
        }

        // Initialize scroll lock on page load
        window.addEventListener("load", async function () {
          // Ensure chatbot is closed and scroll is unlocked on page load
          chatWindow.classList.remove("open");
          chatWindow.classList.remove("keyboard-open");
          document.body.classList.remove("chatbot-open");
          document.body.style.top = "";
          chatWindow.scrollTop = 0;

          // Clear input field to prevent autofill pre-population
          if (chatInput) {
            chatInput.value = "";
            chatInput.style.height = "auto"; // Reset height on page load
            chatInput.setAttribute("autocomplete", "off");
            // Randomize input name to prevent autofill pattern matching
            chatInput.name = "chat_" + Math.random().toString(36).substring(2);
          }

          // Initialize prompt limit display
          await loadPromptCounts();
        });

        // Handle browser back button to close chatbot and gallery modal
        window.addEventListener("popstate", function (event) {
          // Check if gallery modal is open first
          const galleryModal = document.getElementById("galleryModal");
          if (galleryModal && galleryModal.classList.contains("show")) {
            event.preventDefault();
            // Set flag to indicate modal is being closed by back button
            galleryClosedByBackButton = true;
            // Close gallery modal
            if (galleryModalInstance) {
              galleryModalInstance.hide();
            }
            return;
          }

          // If chatbot is open, close it instead of navigating away
          if (chatWindow.classList.contains("open")) {
            event.preventDefault();
            // Close chatbot without modifying history (skipHistory = true)
            chatWindow.classList.remove("open");
            chatToggle.classList.remove("active");
            chatBackdrop.classList.remove("show");
            chatToggle.innerHTML = '<i class="fas fa-robot"></i>';
            // Clean up styles when closing
            chatWindow.classList.remove("keyboard-open");
            chatWindow.style.height = "";
            chatWindow.style.maxHeight = "";
            chatWindow.style.top = "";
            chatWindow.style.left = "";
            chatWindow.style.right = "";
            chatWindow.style.width = "";
            // Unlock body and restore scroll position
            document.body.classList.remove("chatbot-open");
            document.body.style.top = "";
            document.body.style.position = "";
            document.body.style.width = "";
            document.body.style.overflow = "";
            window.scrollTo(0, savedScrollY);
          }
        });

        // Save scroll position for body lock
        let savedScrollY = 0;

        // Toggle chatbot visibility
        window.toggleChatbot = function (skipHistory) {
          const isOpen = chatWindow.classList.toggle("open");
          chatToggle.classList.toggle("active", isOpen);
          chatBackdrop.classList.toggle("show", isOpen);

          if (isOpen) {
            // Save scroll position BEFORE locking body
            savedScrollY = window.scrollY || window.pageYOffset || 0;
            document.body.style.top = -savedScrollY + "px";
            document.body.classList.add("chatbot-open");
            chatToggle.innerHTML = '<i class="fas fa-times"></i>';
            chatWindow.scrollTop = 0;
            // Reset viewport dimensions
            if (window.visualViewport) {
              initialHeight = window.visualViewport.height;
              initialWidth = window.visualViewport.width;
            } else {
              initialHeight = window.innerHeight;
              initialWidth = window.innerWidth;
            }
            // Push a new history state when opening chatbot (unless skipHistory is true)
            if (!skipHistory) {
              history.pushState({ chatbotOpen: true }, "");
            }
            // Focus input without scrolling
            setTimeout(function () {
              chatInput.focus({ preventScroll: true });
              // Ensure modal stays in place
              chatWindow.scrollTop = 0;
              window.scrollTo(0, 0);
            }, 100);
          } else {
            chatToggle.innerHTML = '<i class="fas fa-robot"></i>';
            // Clean up styles when closing
            chatWindow.classList.remove("keyboard-open");
            chatWindow.style.height = "";
            chatWindow.style.maxHeight = "";
            chatWindow.style.top = "";
            chatWindow.style.left = "";
            chatWindow.style.right = "";
            chatWindow.style.width = "";
            // Unlock body and restore scroll position
            document.body.classList.remove("chatbot-open");
            document.body.style.top = "";
            document.body.style.position = "";
            document.body.style.width = "";
            document.body.style.overflow = "";
            window.scrollTo(0, savedScrollY);
            // Go back in history if the chatbot was opened (unless skipHistory is true)
            if (!skipHistory && history.state && history.state.chatbotOpen) {
              history.back();
            }
          }
        };

        // Send via chip (does not count toward prompt limit)
        window.sendChip = function (el) {
          const text = el.textContent.trim();

          // Get response
          const fallbackReply = getFallbackResponse(text);

          // Add user message
          appendMessage(text, "user");
          appendMessage(fallbackReply, "bot");
          speakText(fallbackReply);

          // Add to history (no counter increment - quick actions are free)
          chatHistory.push({ role: "user", content: text });
          chatHistory.push({ role: "model", content: fallbackReply });
        };

        // Send via button
        window.sendChatMessage = sendMessage;

        // Prevent modal scrolling on mobile (allow only messages area to scroll)
        chatWindow.addEventListener(
          "touchmove",
          function (e) {
            // Allow scrolling only within the messages area
            if (!e.target.closest(".chat-messages")) {
              e.preventDefault();
            }
          },
          { passive: false },
        );

        // Prevent overscroll on messages area
        chatMessages.addEventListener("touchstart", function (e) {
          const scrollTop = chatMessages.scrollTop;
          const scrollHeight = chatMessages.scrollHeight;
          const height = chatMessages.clientHeight;
          const atTop = scrollTop === 0;
          const atBottom = scrollTop + height >= scrollHeight - 1;

          // Store initial touch position
          chatMessages.dataset.startY = e.touches[0].clientY;
          chatMessages.dataset.atTop = atTop;
          chatMessages.dataset.atBottom = atBottom;
        });

        chatMessages.addEventListener(
          "touchmove",
          function (e) {
            const startY = parseFloat(chatMessages.dataset.startY);
            const currentY = e.touches[0].clientY;
            const delta = currentY - startY;
            const atTop = chatMessages.dataset.atTop === "true";
            const atBottom = chatMessages.dataset.atBottom === "true";

            // Prevent overscroll at boundaries
            if ((atTop && delta > 0) || (atBottom && delta < 0)) {
              e.preventDefault();
            }
          },
          { passive: false },
        );

        // Prevent page scroll when input is focused & auto-scroll messages
        chatInput.addEventListener("focus", function (e) {
          // Lock page scroll position
          chatWindow.scrollTop = 0;
          if (chatWindow.classList.contains("open")) {
            // Prevent body from scrolling
            window.scrollTo(0, 0);
            // Auto-scroll chat messages to bottom after keyboard opens
            setTimeout(function () {
              scrollToBottom();
            }, 300);
          }
        });

        // Override scrollIntoView for the input element to prevent any automatic scrolling
        const originalScrollIntoView = chatInput.scrollIntoView;
        chatInput.scrollIntoView = function () {
          // Do nothing - prevent scroll
          return;
        };

        // Prevent scroll when clicking input
        chatInput.addEventListener("click", function (e) {
          e.stopPropagation();
          chatWindow.scrollTop = 0;
          window.scrollTo(0, 0);
        });

        // Auto-resize textarea as user types
        function autoResizeTextarea() {
          chatInput.style.height = "auto";
          chatInput.style.height = Math.min(chatInput.scrollHeight, 120) + "px";
        }

        chatInput.addEventListener("input", autoResizeTextarea);

        // Enter key
        chatInput.addEventListener("keydown", function (e) {
          if (e.key === "Enter" && !e.shiftKey) {
            e.preventDefault();
            sendMessage();
          }
        });

        // Block clipboard operations and context menu
        chatInput.addEventListener("paste", function (e) {
          e.preventDefault();
          return false;
        });

        chatInput.addEventListener("copy", function (e) {
          e.preventDefault();
          return false;
        });

        chatInput.addEventListener("cut", function (e) {
          e.preventDefault();
          return false;
        });

        chatInput.addEventListener("contextmenu", function (e) {
          e.preventDefault();
          return false;
        });

        chatInput.addEventListener("selectstart", function (e) {
          e.preventDefault();
          return false;
        });

        chatInput.addEventListener("select", function (e) {
          e.preventDefault();
          return false;
        });

        // Block long-press context menu on mobile
        chatInput.addEventListener("touchstart", function (e) {
          if (e.touches.length > 1) {
            e.preventDefault();
            return false;
          }
        });

        chatInput.addEventListener("touchend", function (e) {
          e.stopPropagation();
        });

        // Block drag and drop
        chatInput.addEventListener("dragstart", function (e) {
          e.preventDefault();
          return false;
        });

        chatInput.addEventListener("drop", function (e) {
          e.preventDefault();
          return false;
        });

        chatInput.addEventListener("dragover", function (e) {
          e.preventDefault();
          return false;
        });

        // Block beforeinput event for paste attempts (catches some mobile keyboard paste buttons)
        chatInput.addEventListener("beforeinput", function (e) {
          if (
            e.inputType === "insertFromPaste" ||
            e.inputType === "insertFromDrop"
          ) {
            e.preventDefault();
            return false;
          }
        });

        // === MOBILE KEYBOARD & SCROLL HANDLING ===

        // Prevent modal from scrolling on any interaction
        chatWindow.addEventListener("scroll", function (e) {
          if (chatWindow.scrollTop !== 0) {
            chatWindow.scrollTop = 0;
          }
        });

        // Prevent page scroll when chatbot is open
        window.addEventListener("scroll", function () {
          if (chatWindow.classList.contains("open")) {
            window.scrollTo(0, 0);
          }
        });

        // Continuous scroll lock check while chatbot is open
        setInterval(function () {
          if (chatWindow.classList.contains("open")) {
            if (chatWindow.scrollTop !== 0) {
              chatWindow.scrollTop = 0;
            }
            if (window.scrollY !== 0 || window.scrollX !== 0) {
              window.scrollTo(0, 0);
            }
          }
        }, 100);

        // Visual Viewport API - best keyboard detection for modern mobile browsers
        let initialHeight = window.innerHeight;
        let initialWidth = window.innerWidth;

        if (window.visualViewport) {
          initialHeight = window.visualViewport.height;
          initialWidth = window.visualViewport.width;

          function adjustChatbotForKeyboard() {
            if (!chatWindow.classList.contains("open")) return;

            const vvHeight = window.visualViewport.height;

            // Detect if keyboard is open (viewport height reduced significantly)
            const keyboardOpen = vvHeight < initialHeight * 0.75;

            if (keyboardOpen) {
              chatWindow.classList.add("keyboard-open");
              // Set height to visible viewport - CSS handles positioning
              chatWindow.style.height = vvHeight + "px";
              chatWindow.style.maxHeight = vvHeight + "px";
              // Compensate for iOS visual viewport offset
              if (window.visualViewport.offsetTop > 0) {
                chatWindow.style.top = window.visualViewport.offsetTop + "px";
              }
              // Prevent body scroll
              document.body.style.position = "fixed";
              document.body.style.width = "100%";
              document.body.style.overflow = "hidden";
              // Auto-scroll chat messages to bottom when keyboard opens
              setTimeout(function () {
                scrollToBottom();
              }, 150);
            } else {
              chatWindow.classList.remove("keyboard-open");
              chatWindow.style.height = "";
              chatWindow.style.maxHeight = "";
              chatWindow.style.top = "";
              // Keep body locked since chatbot is still open
              document.body.style.position = "fixed";
              document.body.style.width = "100%";
              document.body.style.overflow = "hidden";
              initialHeight = vvHeight;
              initialWidth = window.visualViewport.width;
              // Scroll to bottom after keyboard closes
              setTimeout(function () {
                scrollToBottom();
              }, 100);
            }
          }

          window.visualViewport.addEventListener(
            "resize",
            adjustChatbotForKeyboard,
          );
          // Prevent scroll from affecting modal position
          window.visualViewport.addEventListener("scroll", function () {
            if (chatWindow.classList.contains("open")) {
              // Reset scroll position to prevent modal from moving
              window.scrollTo(0, 0);
              adjustChatbotForKeyboard();
            }
          });
        }

        // Fallback: window resize for older browsers
        let windowHeight = window.innerHeight;
        window.addEventListener("resize", function () {
          if (!chatWindow.classList.contains("open")) return;
          const newHeight = window.innerHeight;
          if (newHeight >= windowHeight * 0.75) {
            windowHeight = newHeight;
          }
        });

        // Reset chatbot styles when keyboard closes
        chatInput.addEventListener("blur", function () {
          setTimeout(function () {
            if (!chatWindow.classList.contains("open")) return;
            chatWindow.classList.remove("keyboard-open");
            chatWindow.style.height = "";
            chatWindow.style.maxHeight = "";
            chatWindow.style.top = "";
            // Keep body locked since chatbot is still open
            // but restore fixed positioning to chatbot-open style
            document.body.style.position = "fixed";
            document.body.style.width = "100%";
            document.body.style.overflow = "hidden";
            // Re-initialize viewport height
            if (window.visualViewport) {
              initialHeight = window.visualViewport.height;
              initialWidth = window.visualViewport.width;
            }
            // Scroll messages to bottom after keyboard closes
            scrollToBottom();
          }, 150);
        });

        // Fallback responses when quota is reached
        function getFallbackResponse(question) {
          const q = question.toLowerCase();

          // Detect language
          const isTagalog =
            /\b(ano|mga|niya|kanyang|siya|tungkol|saan|paano)\b/i.test(q);

          // Expertise/Skills (general capabilities)
          if (
            /expertise|expert|specializ|good at|ano.*expertise|dalubhasa/i.test(
              q,
            )
          ) {
            if (isTagalog)
              return "Si Jan Russel ay isang Freelance Student Web Developer na dalubhasa sa full-stack development. Expert siya sa healthcare systems, government projects, student management systems, at custom web applications.";
            return "Jan Russel is a Freelance Student Web Developer specializing in full-stack development. He's an expert in healthcare systems, government projects, student management systems, and custom web applications.";
          }

          // Tech Stack (specific technologies)
          if (
            /tech|stack|technology|technologies|programming|language|tools|framework/i.test(
              q,
            ) ||
            /ano.*skills|skills.*niya|teknolohiya/i.test(q)
          ) {
            if (isTagalog)
              return "Tech Stack ni Jan Russel: Frontend - HTML5, CSS3, Bootstrap 5, Tailwind CSS, JavaScript, React, jQuery | Backend - PHP, Codeigniter 4, MySQL, RESTful APIs | Tools - Git, GitHub, VS Code, XAMPP. Alam din niya ang responsive design at API integration!";
            return "Jan Russel's Tech Stack: Frontend - HTML5, CSS3, Bootstrap 5, Tailwind CSS, JavaScript, React, jQuery | Backend - PHP, Codeigniter 4, MySQL, RESTful APIs | Tools - Git, GitHub, VS Code, XAMPP. He also knows responsive design & API integration!";
          }

          // Projects
          if (
            /project|portfolio|work|built|made|created|gawa|proyekto/i.test(q)
          ) {
            if (isTagalog)
              return "Mga pangunahing proyekto ni Jan Russel: SKSU Scholarship System, Russel's Chicken HR System, KES-SMART, BHC CONNECT, HealthConnect, ImmuCare, AidTrack, at BM-SCaPIS. Lahat ay full-stack web applications!";
            return "Jan Russel's featured projects: SKSU Scholarship System, Russel's Chicken HR System, KES-SMART , BHC CONNECT, HealthConnect, ImmuCare, AidTrack, and BM-SCaPIS. All full-stack web apps!";
          }

          // Hire/Contact
          if (
            /hire|contact|email|reach|connect|commission|available|kumuha|kontakin|hire.*him/i.test(
              q,
            )
          ) {
            if (isTagalog)
              return "Si Jan Russel ay OPEN FOR COMMISSIONS! Makikipag-ugnayan sa kanya sa: Facebook (facebook.com/russelicioush), Email (janrusselpenafiel01172005@gmail.com), Phone (+63 967 772 6912), GitHub (github.com/Jan-Russel-Penafiel), LinkedIn (linkedin.com/in/jan-russel-peñafiel-a1799036b). Location: Panay, South Cotabato, Philippines. I-download ang kanyang resume para sa buong detalye!";
            return "Jan Russel is OPEN FOR COMMISSIONS! Contact him via: Facebook (facebook.com/russelicioush), Email (janrusselpenafiel01172005@gmail.com), Phone (+63 967 772 6912), GitHub (github.com/Jan-Russel-Penafiel), LinkedIn (linkedin.com/in/jan-russel-peñafiel-a1799036b). Location: Panay, South Cotabato, Philippines. Download his resume for full details!";
          }

          // Location/Team
          if (/location|where|team|company|organization|nasaan/i.test(q)) {
            if (isTagalog)
              return "Location: Panay, Santo Niño, South Cotabato, Philippines | Team: AsyncX (Software Development Team)";
            return "Location: Panay, Santo Niño, South Cotabato, Philippines | Team: AsyncX (Software Development Team)";
          }

          // Greetings
          if (/^(hi|hello|hey|kumusta|kamusta|musta|hoy|uy)/i.test(q)) {
            if (isTagalog)
              return "Kumusta! Ako si Russel AI, virtual assistant ni Jan Russel. Makakatulong ako sa pagbuo ng simple web apps at sasagot sa tanong tungkol sa kanyang mga proyekto, skills, o personal na buhay!";
            return "Hello! I'm Russel AI, Jan Russel's virtual assistant. I can help build simple web apps and answer questions about his projects, skills, or personal life!";
          }

          // Personal questions
          if (
            /relationship|girlfriend|single|jowa|boyfriend|love|dating/i.test(q)
          ) {
            if (isTagalog)
              return "Si Jan Russel ay single at focused sa coding! Bukas siya sa pagkilala ng someone special na nag-appreciate ng late-night debugging sessions.";
            return "Jan Russel is single and focused on coding! He's open to meeting someone special who appreciates late-night debugging sessions.";
          }

          if (/favorite.*color|color.*fav|kulay|paborito/i.test(q)) {
            if (isTagalog)
              return "Ang paboritong kulay ni Jan Russel ay Cyan (#00fff7)! Hindi mo ba napapansin sa portfolio? Nandito ito sa lahat ng dako!";
            return "Jan Russel's favorite color is Cyan (#00fff7)! Can't you tell from this portfolio? It's everywhere!";
          }

          // Default fallback
          if (isTagalog)
            return "Pasensya na, nagamit na ang aking daily token quota. Mangyaring maghintay habang naglo-load ang ibang AI models. Subukan ulit sa sandali.";
          return "Sorry, my daily token quota is used up. Please wait while other AI models load. Try again shortly.";
        }

        // ========== MULTI-MODEL MANAGEMENT ==========
        const GEMINI_MODELS = [
          "gemini-2.5-flash",
          "gemini-2.0-flash-001",
          "gemini-2.0-flash",
          "gemini-2.0-flash-lite-001",
          "gemini-2.5-flash-lite",
          "gemini-2.0-flash-lite",
        ];

        let currentModelIndex = 0;
        let activeModel = GEMINI_MODELS[0]; // Default: gemini-2.5-flash
        let modelHealth = {}; // Track model health client-side
        let responseCache = new Map(); // Client-side response cache
        const CACHE_MAX_SIZE = 100;
        const CACHE_TTL = 30 * 60 * 1000; // 30 min client-side cache

        // Client-side cache helpers
        function getCacheKey(msg, history) {
          const ctx = history
            .slice(-2)
            .map((h) => h.role + ":" + h.content)
            .join("|");
          return msg.toLowerCase().trim() + "|" + ctx;
        }

        function clientCacheGet(key) {
          const entry = responseCache.get(key);
          if (!entry) return null;
          if (Date.now() - entry.timestamp > CACHE_TTL) {
            responseCache.delete(key);
            return null;
          }
          return entry;
        }

        function clientCachePut(key, reply, model) {
          if (responseCache.size >= CACHE_MAX_SIZE) {
            // Remove oldest entry
            const oldest = responseCache.keys().next().value;
            responseCache.delete(oldest);
          }
          responseCache.set(key, { reply, model, timestamp: Date.now() });
        }

        // Mark model as failed client-side, get next healthy model
        function getNextModel(failedModel) {
          modelHealth[failedModel] = {
            failed: true,
            cooldownUntil: Date.now() + 60000, // 1 min cooldown
            failCount: (modelHealth[failedModel]?.failCount || 0) + 1,
          };

          for (let i = 0; i < GEMINI_MODELS.length; i++) {
            const m = GEMINI_MODELS[i];
            const health = modelHealth[m];
            if (
              !health ||
              !health.failed ||
              Date.now() > health.cooldownUntil
            ) {
              return m;
            }
          }
          // All in cooldown, reset and try default
          modelHealth = {};
          return GEMINI_MODELS[0];
        }

        // Mark model as healthy
        function markModelHealthy(model) {
          activeModel = model;
          if (modelHealth[model]) {
            modelHealth[model].failed = false;
            modelHealth[model].failCount = 0;
          }
        }

        // Update UI with active model info
        function updateModelUI(model, cached) {
          const statusEl = document.getElementById("chatModelStatus");
          const poweredEl = document.getElementById("chatPoweredModel");
          if (statusEl) {
            const shortName = model.replace("gemini-", "").replace(/-/g, " ");
            statusEl.textContent = cached ? "Online" : "Online";
          }
          if (poweredEl) {
            poweredEl.textContent = model
              ? `Gemini AI - ${model}`
              : "Gemini AI";
          }
        }

        // Update prompt limit display
        function updatePromptLimitDisplay() {
          const counter = document.getElementById("promptCounter");

          if (counter) {
            const remaining = PROMPT_LIMIT - promptCount;
            counter.textContent = `Prompts: ${remaining}/${PROMPT_LIMIT}`;
            if (remaining === 0) {
              counter.style.color = "#ff4757";
            } else if (remaining <= 5) {
              counter.style.color = "#ffa502";
            } else {
              counter.style.color = "#00fff7";
            }
          }
        }

        // Detect if message is code-related (question)
        function isCodeRelatedPrompt(message) {
          const msg = message.toLowerCase();
          const codeKeywords = [
            // Direct code requests
            "code",
            "script",
            "function",
            "program",
            "algorithm",
            // Programming languages
            "html",
            "css",
            "javascript",
            "js",
            "php",
            "python",
            "java",
            "sql",
            "typescript",
            "react",
            "codeigniter",
            "bootstrap",
            // Code actions
            "write",
            "create",
            "build",
            "develop",
            "implement",
            "example",
            "sample",
            "snippet",
            "syntax",
            // Debugging
            "debug",
            "fix",
            "error",
            "bug",
            "issue",
            // Tagalog code keywords
            "code",
            "syntax",
            "programa",
            "gawa ng",
            "sulat ng",
          ];

          // Check for code block indicators
          if (
            message.includes("```") ||
            msg.includes("how to code") ||
            msg.includes("paano gumawa ng")
          ) {
            return true;
          }

          // Check if message contains multiple code keywords
          const keywordMatches = codeKeywords.filter((keyword) =>
            msg.includes(keyword),
          );
          return (
            keywordMatches.length >= 2 ||
            (keywordMatches.length === 1 &&
              (msg.includes("example") ||
                msg.includes("sample") ||
                msg.includes("write") ||
                msg.includes("create") ||
                msg.includes("gawa")))
          );
        }

        // Detect if response contains code
        function responseContainsCode(response) {
          if (!response) return false;

          // Check for code blocks (```)
          if (response.includes("```")) return true;

          // Check for common code patterns
          const codePatterns = [
            // PHP
            /<\?php/i, // PHP opening tag
            /\$\w+\s*=/, // PHP variables
            /echo\s+["']/i, // PHP echo
            /namespace\s+\w+/i, // PHP namespace

            // HTML/XML
            /<\/\w+>/, // HTML closing tags
            /<\w+[^>]*>/, // HTML opening tags
            /<!DOCTYPE/i, // DOCTYPE declaration

            // JavaScript/TypeScript
            /function\s+\w+\s*\(/i, // Function declarations
            /const\s+\w+\s*=/i, // Const declarations
            /let\s+\w+\s*=/i, // Let declarations
            /var\s+\w+\s*=/i, // Var declarations
            /async\s+function/i, // Async functions
            /await\s+\w+/i, // Await keyword
            /export\s+(default|const|function|class)/i, // ES6 exports
            /import\s+.*from/i, // Import statements
            /require\s*\(/i, // CommonJS require
            /\)\s*=>/, // Arrow functions

            // OOP
            /class\s+\w+/i, // Class declarations
            /extends\s+\w+/i, // Class inheritance
            /implements\s+\w+/i, // Interface implementation
            /new\s+\w+\s*\(/i, // Object instantiation
            /public\s+(function|class|var|static)/i, // Public access
            /private\s+(function|class|var|static)/i, // Private access
            /protected\s+(function|class|var|static)/i, // Protected access
            /static\s+(function|var)/i, // Static methods/properties

            // SQL
            /SELECT .* FROM/i, // SQL SELECT
            /INSERT INTO/i, // SQL INSERT
            /UPDATE .* SET/i, // SQL UPDATE
            /DELETE FROM/i, // SQL DELETE
            /CREATE TABLE/i, // SQL CREATE
            /ALTER TABLE/i, // SQL ALTER
            /DROP TABLE/i, // SQL DROP
            /WHERE\s+\w+\s*=/i, // SQL WHERE
            /JOIN\s+\w+/i, // SQL JOIN

            // Python
            /def\s+\w+\s*\(/i, // Python function def
            /class\s+\w+\s*\(/i, // Python class
            /import\s+\w+/i, // Python import
            /from\s+\w+\s+import/i, // Python from import
            /if\s+__name__\s*==/, // Python main check
            /self\.\w+/, // Python self
            /\[\s*\w+\s+for\s+\w+\s+in\s+/i, // Python list comprehension

            // Java/C#
            /public\s+class\s+\w+/i, // Java/C# class
            /private\s+void\s+\w+/i, // Java/C# method
            /using\s+System/i, // C# using
            /package\s+\w+/i, // Java package
            /void\s+\w+\s*\(/i, // Void methods

            // C/C++
            /#include\s*[<"]/i, // C/C++ include
            /int\s+main\s*\(/i, // C/C++ main
            /printf\s*\(/i, // C printf
            /cout\s*<</, // C++ cout
            /std::/, // C++ std namespace

            // Ruby
            /def\s+\w+/i, // Ruby method def
            /end$/m, // Ruby end keyword
            /puts\s+["']/i, // Ruby puts

            // Go
            /func\s+\w+\s*\(/i, // Go function
            /package\s+main/i, // Go package
            /fmt\.\w+/, // Go fmt package

            // Frameworks
            /\$this->/, // Laravel/OOP this
            /app\(\)/, // Laravel app helper
            /Route::/i, // Laravel routes
            /\$model->/, // Eloquent models
            /useState\s*\(/i, // React hooks
            /useEffect\s*\(/i, // React useEffect
            /componentDidMount/i, // React lifecycle
            /render\s*\(\s*\)\s*\{/, // React render

            // Common operators & syntax
            /=>|->|::/, // Arrow, object, scope operators
            /&&|\|\|/, // Logical operators
            /try\s*\{/i, // Try-catch blocks
            /catch\s*\(/i, // Catch blocks
            /finally\s*\{/i, // Finally blocks
            /throw\s+new/i, // Throw exceptions
            /return\s+\w+/i, // Return statements
            /\w+\s*\?\s*\w+\s*:/, // Ternary operators
            /for\s*\(/i, // For loops
            /while\s*\(/i, // While loops
            /foreach\s*\(/i, // Foreach loops
            /if\s*\(/i, // If statements
            /else\s*\{/i, // Else blocks
            /switch\s*\(/i, // Switch statements
            /case\s+\w+:/i, // Case statements
          ];

          // Test against code patterns
          return codePatterns.some((pattern) => pattern.test(response));
        }

        // Request queue to prevent rapid-fire API calls
        let isProcessing = false;
        const requestQueue = [];

        async function sendMessage() {
          const text = chatInput.value.trim();
          if (!text) return;

          // Check limits BEFORE processing (don't count yet, just check if already at limit)
          if (promptCount >= PROMPT_LIMIT) {
            const limitMsg = /\b(niya|kanyang|ng|at|mga|ay|ba|ka|ako)\b/i.test(
              text,
            )
              ? `Pasensya na, naabot mo na ang limit na ${PROMPT_LIMIT} prompts para ngayong araw. Para sa karagdagang tulong, maari ka direktang makipag-ugnayan kay Jan Russel sa Facebook, Email, o Phone. Bumalik bukas para sa bagong prompts. Salamat sa pag-unawa!`
              : `Sorry, you've reached today's limit of ${PROMPT_LIMIT} prompts. For more assistance, please contact Jan Russel directly via Facebook, Email, or Phone. Come back tomorrow for new prompts. Thank you for understanding!`;
            appendMessage(text, "user");
            appendMessage(limitMsg, "bot");
            speakText(limitMsg);
            chatInput.value = "";
            chatInput.style.height = "auto";
            return;
          }

          // Add user message
          appendMessage(text, "user");
          chatInput.value = "";
          chatInput.style.height = "auto"; // Reset height after sending
          chatSendBtn.disabled = true;

          // Check client-side cache first
          const cKey = getCacheKey(text, chatHistory);
          const cached = clientCacheGet(cKey);
          if (cached) {
            appendMessage(cached.reply, "bot");
            speakText(cached.reply);
            chatHistory.push({ role: "user", content: text });
            chatHistory.push({ role: "model", content: cached.reply });
            chatSendBtn.disabled = false;
            console.log("[Cache] Client hit, model:", cached.model);

            // Count prompt AFTER response
            promptCount++;
            console.log(`[Limit] Prompt ${promptCount}/${PROMPT_LIMIT}`);
            incrementPromptCount();
            return;
          }

          // Show typing indicator
          const typingEl = showTyping();

          // Add to history
          chatHistory.push({ role: "user", content: text });

          try {
            // Add delay between requests to avoid rate limiting
            if (isProcessing) {
              await new Promise((resolve) => setTimeout(resolve, 1000));
            }
            isProcessing = true;

            const result = await callGeminiWithRetry(text);
            removeTyping(typingEl);
            appendMessage(result.reply, "bot");
            speakText(result.reply);
            chatHistory.push({ role: "model", content: result.reply });

            // Count prompt AFTER response
            promptCount++;
            console.log(`[Limit] Prompt ${promptCount}/${PROMPT_LIMIT}`);
            incrementPromptCount();

            // Cache the response
            clientCachePut(cKey, result.reply, result.model);

            // Update active model
            if (result.model) {
              markModelHealthy(result.model);
              updateModelUI(result.model, result.cached);
              console.log(
                "[Gemini] Response from:",
                result.model,
                result.cached ? "(server-cached)" : "",
              );
            }
          } catch (err) {
            removeTyping(typingEl);
            // Check if it's a rate limit error
            if (
              err.message &&
              (err.message.includes("Rate limit") ||
                err.message.includes("429") ||
                err.message.includes("unavailable"))
            ) {
              // Use fallback response based on question
              const fallbackReply = getFallbackResponse(text);
              appendMessage(fallbackReply, "bot");
              speakText(fallbackReply);
              chatHistory.push({ role: "model", content: fallbackReply });

              // Count prompt for fallback response
              promptCount++;
              console.log(
                `[Limit] Prompt (fallback) ${promptCount}/${PROMPT_LIMIT}`,
              );
              incrementPromptCount();
            } else {
              const errMsg =
                "Sorry, I couldn't process that right now. Please try again!";
              appendMessage(errMsg, "bot");
              speakText(errMsg);
              // Don't count errors as prompts
            }
            console.error("Gemini error:", err);
          } finally {
            isProcessing = false;
            chatSendBtn.disabled = false;
          }
        }

        // Retry logic with exponential backoff + model rotation
        async function callGeminiWithRetry(userMessage, maxRetries = 3) {
          let lastError;
          let modelToTry = activeModel;

          for (let attempt = 0; attempt < maxRetries; attempt++) {
            try {
              if (attempt > 0) {
                const waitTime = Math.min(Math.pow(2, attempt) * 1000, 8000);
                console.log(
                  `[Gemini] Retry ${attempt + 1}/${maxRetries} in ${waitTime / 1000}s using ${modelToTry}`,
                );
                await new Promise((resolve) => setTimeout(resolve, waitTime));
              }

              return await callGemini(userMessage, modelToTry);
            } catch (err) {
              lastError = err;

              // On rate limit or model error, rotate to next model
              if (
                err.message &&
                (err.message.includes("429") ||
                  err.message.includes("Rate limit") ||
                  err.message.includes("unavailable"))
              ) {
                modelToTry = getNextModel(modelToTry);
                console.log(`[Gemini] Switching to model: ${modelToTry}`);
                if (attempt < maxRetries - 1) continue;
              } else if (err.message && err.message.includes("403")) {
                // API key error, no point retrying
                throw err;
              } else {
                // Unknown error, try next model
                modelToTry = getNextModel(modelToTry);
                if (attempt < maxRetries - 1) continue;
                throw err;
              }
            }
          }

          throw lastError;
        }

        async function callGemini(userMessage, preferredModel) {
          const res = await fetch("chat.php", {
            method: "POST",
            headers: {
              "Content-Type": "application/x-www-form-urlencoded",
            },
            body: new URLSearchParams({
              msg: userMessage,
              systemPrompt: SYSTEM_PROMPT,
              history: JSON.stringify(chatHistory),
              preferredModel: preferredModel || activeModel,
            }),
          });

          if (!res.ok) {
            throw new Error(`HTTP ${res.status}`);
          }

          const data = await res.json();

          // Check for API errors
          if (data.error) {
            const errorMsg = data.error.message || "API Error";
            if (errorMsg.includes("403")) {
              throw new Error(
                "API Key Error: Please check your Gemini API key in config.json.",
              );
            }
            throw new Error(errorMsg);
          }

          // Extract text + model info from response
          const usedModel = data._model || preferredModel || "unknown";
          const wasCached = data._cached || false;

          if (data.candidates && data.candidates.length > 0) {
            return {
              reply: data.candidates[0].content.parts[0].text,
              model: usedModel,
              cached: wasCached,
            };
          } else {
            return {
              reply: "I couldn't generate a response. Please try again.",
              model: usedModel,
              cached: false,
            };
          }
        }

        function appendMessage(text, type) {
          const div = document.createElement("div");
          div.className = `chat-msg ${type}`;

          // For bot messages, format code blocks with syntax highlighting
          if (type === "bot") {
            div.innerHTML = formatMessageWithCode(text);

            // Apply syntax highlighting to all code blocks
            div.querySelectorAll("pre code").forEach((block) => {
              hljs.highlightElement(block);
            });
          } else {
            // For user messages, just escape HTML and show plain text
            div.textContent = text;
          }

          chatMessages.appendChild(div);

          // Auto-scroll to bottom on all devices
          scrollToBottom();
        }

        // Format message text with code blocks and inline code
        function formatMessageWithCode(text) {
          // Store code blocks temporarily to prevent them from being affected by later replacements
          const codeBlocks = [];
          const CODE_PLACEHOLDER = "___CODE_BLOCK_";

          // First escape HTML
          let html = text.replace(/</g, "&lt;").replace(/>/g, "&gt;");

          // Format code blocks with language: ```language\ncode\n```
          html = html.replace(
            /```([a-zA-Z0-9+#]*)\n([\s\S]*?)```/g,
            function (match, lang, code) {
              const placeholder = CODE_PLACEHOLDER + codeBlocks.length + "___";
              codeBlocks.push(createCodeBlock(lang, code));
              return placeholder;
            },
          );

          // Detect standalone code blocks without backticks (e.g., "html\n<!DOCTYPE..." or "php\n<?php...")
          // This catches when AI outputs language name followed by code
          html = html.replace(
            /\n(html|javascript|js|typescript|ts|python|py|php|css|java|sql|json|xml|bash|sh|csharp|cs)\n(&lt;[^&]*(?:&[^;]*;[^&]*)*&gt;[\s\S]{20,}?)(?=\n\n|$)/gi,
            function (match, lang, code) {
              // Only process if it looks like actual code (has multiple lines and tags/brackets)
              if (code.includes("&lt;") && code.includes("&gt;")) {
                const placeholder =
                  CODE_PLACEHOLDER + codeBlocks.length + "___";
                codeBlocks.push(createCodeBlock(lang, code.trim()));
                return "\n" + placeholder;
              }
              return match;
            },
          );

          // Detect HTML code without language label (starts with &lt;!DOCTYPE or &lt;html)
          html = html.replace(
            /(&lt;!DOCTYPE[\s\S]{30,}?&lt;\/html&gt;)/gi,
            function (match, code) {
              const placeholder = CODE_PLACEHOLDER + codeBlocks.length + "___";
              codeBlocks.push(createCodeBlock("html", code.trim()));
              return placeholder;
            },
          );

          // Detect PHP code blocks (starts with &lt;?php)
          html = html.replace(
            /(&lt;\?php[\s\S]{30,}?\?&gt;)/gi,
            function (match, code) {
              const placeholder = CODE_PLACEHOLDER + codeBlocks.length + "___";
              codeBlocks.push(createCodeBlock("php", code.trim()));
              return placeholder;
            },
          );

          // Format inline code: `code`
          html = html.replace(/`([^`]+)`/g, "<code>$1</code>");

          // Linkify URLs
          const urlRegex =
            /(https?:\/\/[^\s]+)|(www\.[^\s]+)|([a-zA-Z0-9-]+\.(com|org|net|io|dev|ph)\/[^\s]+)/gi;
          html = html.replace(urlRegex, (url) => {
            let href = url;
            if (!url.match(/^https?:\/\//i)) {
              href = "https://" + url;
            }
            return `<a href="${href}" target="_blank" rel="noopener noreferrer" style="color: #00fff7; text-decoration: underline;">${url}</a>`;
          });

          // Convert line breaks to <br> ONLY for non-code content
          html = html.replace(/\n/g, "<br>");

          // Restore code blocks
          codeBlocks.forEach((block, index) => {
            html = html.replace(CODE_PLACEHOLDER + index + "___", block);
          });

          return html;
        }

        // Helper function to create formatted code blocks
        function createCodeBlock(lang, code) {
          const language = lang.trim().toLowerCase() || "plaintext";
          let languageDisplay =
            language.charAt(0).toUpperCase() + language.slice(1);
          let suggestedFileName = "";

          // Handle special cases and suggest file names for all programming languages
          if (language === "javascript" || language === "js") {
            languageDisplay = "JavaScript";
            suggestedFileName = "script.js";
          } else if (language === "typescript" || language === "ts") {
            languageDisplay = "TypeScript";
            suggestedFileName = "app.ts";
          } else if (language === "php") {
            languageDisplay = "PHP";
            suggestedFileName = "index.php";
          } else if (language === "html") {
            languageDisplay = "HTML";
            suggestedFileName = "index.html";
          } else if (language === "css") {
            languageDisplay = "CSS";
            suggestedFileName = "styles.css";
          } else if (
            language === "sql" ||
            language === "mysql" ||
            language === "postgresql"
          ) {
            languageDisplay = "SQL";
            suggestedFileName = "query.sql";
          } else if (language === "python" || language === "py") {
            languageDisplay = "Python";
            suggestedFileName = "main.py";
          } else if (language === "java") {
            languageDisplay = "Java";
            suggestedFileName = "Main.java";
          } else if (language === "csharp" || language === "cs") {
            languageDisplay = "C#";
            suggestedFileName = "Program.cs";
          } else if (language === "c") {
            languageDisplay = "C";
            suggestedFileName = "main.c";
          } else if (language === "cpp" || language === "c++") {
            languageDisplay = "C++";
            suggestedFileName = "main.cpp";
          } else if (language === "ruby" || language === "rb") {
            languageDisplay = "Ruby";
            suggestedFileName = "main.rb";
          } else if (language === "go" || language === "golang") {
            languageDisplay = "Go";
            suggestedFileName = "main.go";
          } else if (language === "rust" || language === "rs") {
            languageDisplay = "Rust";
            suggestedFileName = "main.rs";
          } else if (language === "swift") {
            languageDisplay = "Swift";
            suggestedFileName = "main.swift";
          } else if (language === "kotlin" || language === "kt") {
            languageDisplay = "Kotlin";
            suggestedFileName = "Main.kt";
          } else if (language === "dart") {
            languageDisplay = "Dart";
            suggestedFileName = "main.dart";
          } else if (language === "r") {
            languageDisplay = "R";
            suggestedFileName = "script.R";
          } else if (language === "perl" || language === "pl") {
            languageDisplay = "Perl";
            suggestedFileName = "script.pl";
          } else if (language === "scala") {
            languageDisplay = "Scala";
            suggestedFileName = "Main.scala";
          } else if (language === "lua") {
            languageDisplay = "Lua";
            suggestedFileName = "script.lua";
          } else if (language === "haskell" || language === "hs") {
            languageDisplay = "Haskell";
            suggestedFileName = "Main.hs";
          } else if (language === "elixir" || language === "ex") {
            languageDisplay = "Elixir";
            suggestedFileName = "main.ex";
          } else if (language === "clojure" || language === "clj") {
            languageDisplay = "Clojure";
            suggestedFileName = "core.clj";
          } else if (language === "fsharp" || language === "fs") {
            languageDisplay = "F#";
            suggestedFileName = "Program.fs";
          } else if (
            language === "vb" ||
            language === "vbnet" ||
            language === "visualbasic"
          ) {
            languageDisplay = "VB.NET";
            suggestedFileName = "Program.vb";
          } else if (language === "objectivec" || language === "objc") {
            languageDisplay = "Objective-C";
            suggestedFileName = "main.m";
          } else if (language === "matlab") {
            languageDisplay = "MATLAB";
            suggestedFileName = "script.m";
          } else if (language === "julia" || language === "jl") {
            languageDisplay = "Julia";
            suggestedFileName = "main.jl";
          } else if (language === "groovy") {
            languageDisplay = "Groovy";
            suggestedFileName = "Main.groovy";
          } else if (
            language === "shell" ||
            language === "sh" ||
            language === "bash"
          ) {
            languageDisplay = "Shell";
            suggestedFileName = "script.sh";
          } else if (language === "powershell" || language === "ps1") {
            languageDisplay = "PowerShell";
            suggestedFileName = "script.ps1";
          } else if (language === "json") {
            languageDisplay = "JSON";
            suggestedFileName = "data.json";
          } else if (language === "xml") {
            languageDisplay = "XML";
            suggestedFileName = "config.xml";
          } else if (language === "yaml" || language === "yml") {
            languageDisplay = "YAML";
            suggestedFileName = "config.yaml";
          } else if (language === "toml") {
            languageDisplay = "TOML";
            suggestedFileName = "config.toml";
          } else if (language === "markdown" || language === "md") {
            languageDisplay = "Markdown";
            suggestedFileName = "README.md";
          } else if (language === "latex" || language === "tex") {
            languageDisplay = "LaTeX";
            suggestedFileName = "document.tex";
          } else if (language === "vue") {
            languageDisplay = "Vue";
            suggestedFileName = "App.vue";
          } else if (language === "jsx") {
            languageDisplay = "JSX";
            suggestedFileName = "Component.jsx";
          } else if (language === "tsx") {
            languageDisplay = "TSX";
            suggestedFileName = "Component.tsx";
          } else if (language === "sass" || language === "scss") {
            languageDisplay = "SCSS";
            suggestedFileName = "styles.scss";
          } else if (language === "less") {
            languageDisplay = "Less";
            suggestedFileName = "styles.less";
          } else if (language === "dockerfile" || language === "docker") {
            languageDisplay = "Dockerfile";
            suggestedFileName = "Dockerfile";
          } else if (language === "nginx") {
            languageDisplay = "Nginx";
            suggestedFileName = "nginx.conf";
          } else if (language === "apache") {
            languageDisplay = "Apache";
            suggestedFileName = ".htaccess";
          } else if (
            language === "ini" ||
            language === "cfg" ||
            language === "conf"
          ) {
            languageDisplay = "Config";
            suggestedFileName = "config.ini";
          } else if (language === "env") {
            languageDisplay = "Environment";
            suggestedFileName = ".env";
          } else if (language === "graphql" || language === "gql") {
            languageDisplay = "GraphQL";
            suggestedFileName = "schema.graphql";
          } else if (language === "solidity" || language === "sol") {
            languageDisplay = "Solidity";
            suggestedFileName = "Contract.sol";
          } else if (language === "assembly" || language === "asm") {
            languageDisplay = "Assembly";
            suggestedFileName = "program.asm";
          }

          const codeId = "code-" + Math.random().toString(36).substr(2, 9);

          // Preserve proper indentation and spacing
          const formattedCode = code.trimEnd();

          return `<div class="code-block-wrapper" data-no-tts="true">
                <div class="code-header">
                    <span class="code-language">${languageDisplay}</span>
                    <button class="code-copy-btn" onclick="copyCodeToClipboard('${codeId}')">Copy</button>
                </div>
                <pre><code id="${codeId}" class="language-${language}">${formattedCode}</code></pre>
            </div>`;
        }

        // Copy code to clipboard function
        window.copyCodeToClipboard = function (codeId) {
          const codeElement = document.getElementById(codeId);
          if (!codeElement) return;

          // Get the text content which automatically unescapes HTML entities
          let codeText = codeElement.textContent;

          // Additional cleanup: ensure proper line breaks are preserved
          codeText = codeText.replace(/\r\n/g, "\n").replace(/\r/g, "\n");

          // Try to copy using Clipboard API
          if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard
              .writeText(codeText)
              .then(() => {
                updateCopyButton(codeId, true);
              })
              .catch((err) => {
                console.error("Clipboard copy failed:", err);
                fallbackCopyCode(codeText, codeId);
              });
          } else {
            // Fallback for older browsers
            fallbackCopyCode(codeText, codeId);
          }
        };

        // Fallback copy method for older browsers
        function fallbackCopyCode(text, codeId) {
          const textarea = document.createElement("textarea");
          textarea.value = text;
          textarea.style.position = "fixed";
          textarea.style.opacity = "0";
          document.body.appendChild(textarea);
          textarea.select();

          try {
            const successful = document.execCommand("copy");
            if (successful) {
              updateCopyButton(codeId, true);
            }
          } catch (err) {
            console.error("Fallback copy failed:", err);
          }

          document.body.removeChild(textarea);
        }

        // Update copy button state
        function updateCopyButton(codeId, success) {
          const codeElement = document.getElementById(codeId);
          if (!codeElement) return;

          const codeBlock = codeElement.closest(".code-block-wrapper");
          if (!codeBlock) return;

          const copyBtn = codeBlock.querySelector(".code-copy-btn");
          if (!copyBtn) return;

          if (success) {
            copyBtn.textContent = "Copied!";
            copyBtn.classList.add("copied");

            // Reset after 2 seconds
            setTimeout(() => {
              copyBtn.textContent = "Copy";
              copyBtn.classList.remove("copied");
            }, 2000);
          }
        }

        function scrollToBottom() {
          // Smooth scroll to bottom of chat messages
          chatMessages.scrollTo({
            top: chatMessages.scrollHeight,
            behavior: "smooth",
          });
        }

        function showTyping() {
          const div = document.createElement("div");
          div.className = "chat-typing";
          div.innerHTML = "<span></span><span></span><span></span>";
          chatMessages.appendChild(div);

          // Auto-scroll to show typing indicator on all devices
          scrollToBottom();

          return div;
        }

        function removeTyping(el) {
          if (el && el.parentNode) el.parentNode.removeChild(el);
        }

        // ========== TEXT-TO-SPEECH (TTS) ENGINE (gTTS / Google Translate TTS) ==========
        let ttsEnabled = true;
        let ttsCurrentAudio = null;
        let ttsAudioQueue = [];
        let ttsIsPlaying = false;

        // Detect language: Tagalog vs English
        function detectLanguage(text) {
          const tagalogWords =
            /\b(niya|kanyang|mga|ang|ako|ikaw|siya|kami|tayo|sila|namin|natin|nila|sa|ng|at|ay|na|ko|mo|po|opo|ba|din|rin|lang|mga|hindi|oo|ito|iyan|iyon|sino|ano|saan|kailan|paano|bakit|dahil|kasi|pag|kapag|kung|nang|yung|yun|ung|dito|diyan|doon|noon|ngayon|mamaya|kanina|talaga|sobra|masyado|napaka|grabe|ganda|galing|astig|kuya|ate|bro|pre|pare|lods|lodi|salamat|pasensya|sige|tara|halika|basta|naman|kaya|pala|eh|daw|raw|nga|man|lamang|pati|pero|o|kaso)\b/gi;
          const tagalogMatches = (text.match(tagalogWords) || []).length;
          if (tagalogMatches >= 2) return "tl";
          return "en";
        }

        // Split text into chunks that fit Google Translate TTS limit (~200 chars)
        function splitTextIntoChunks(text, maxLen) {
          maxLen = maxLen || 200;
          if (text.length <= maxLen) return [text];

          const chunks = [];
          // Split on sentence boundaries first
          const sentences = text.match(/[^.!?]+[.!?]+|[^.!?]+$/g) || [text];
          let current = "";

          for (let i = 0; i < sentences.length; i++) {
            const sentence = sentences[i].trim();
            if (!sentence) continue;

            if ((current + " " + sentence).trim().length <= maxLen) {
              current = (current + " " + sentence).trim();
            } else {
              if (current) chunks.push(current);
              // If single sentence is longer than maxLen, split on commas/spaces
              if (sentence.length > maxLen) {
                const parts = sentence.match(
                  new RegExp(".{1," + maxLen + "}(\\s|,|$)", "g"),
                ) || [sentence];
                parts.forEach(function (p) {
                  if (p.trim()) chunks.push(p.trim());
                });
                current = "";
              } else {
                current = sentence;
              }
            }
          }
          if (current) chunks.push(current);
          return chunks;
        }

        // Build Google Translate TTS URL via local proxy (avoids CORS issues)
        function buildGTTSUrl(text, lang) {
          return (
            "chat.php?text=" +
            encodeURIComponent(text) +
            "&lang=" +
            encodeURIComponent(lang)
          );
        }

        // Stop all current and queued audio (prioritize newer messages)
        function ttsStop() {
          // Clear the queue immediately
          ttsAudioQueue = [];
          ttsIsPlaying = false;

          // Stop and cleanup current audio
          if (ttsCurrentAudio) {
            try {
              // Remove event listeners to prevent them from firing
              ttsCurrentAudio.onended = null;
              ttsCurrentAudio.onerror = null;

              // Stop playback
              ttsCurrentAudio.pause();
              ttsCurrentAudio.currentTime = 0;
              ttsCurrentAudio.src = "";

              // Force garbage collection hint
              ttsCurrentAudio.load();
            } catch (e) {
              /* ignore */
            }
            ttsCurrentAudio = null;
          }
        }

        // Play the next chunk in the queue
        function ttsPlayNext() {
          if (!ttsEnabled || ttsAudioQueue.length === 0) {
            ttsIsPlaying = false;
            ttsCurrentAudio = null;
            return;
          }

          ttsIsPlaying = true;
          const url = ttsAudioQueue.shift();
          const audio = new Audio(url);
          ttsCurrentAudio = audio;

          // Speed up playback (1.0 = normal, 1.5 = faster, 2.0 = very fast)
          audio.playbackRate = 1.5;

          audio.onended = function () {
            ttsCurrentAudio = null;
            ttsPlayNext();
          };

          audio.onerror = function (e) {
            console.warn("gTTS Audio Error:", e);
            ttsCurrentAudio = null;
            // Continue to next chunk even on error
            ttsPlayNext();
          };

          audio.play().catch(function (err) {
            console.warn("gTTS Play Error:", err);
            ttsCurrentAudio = null;
            ttsPlayNext();
          });
        }

        // Main speak function — prioritizes newer messages over older ones
        function speakText(text) {
          if (!ttsEnabled) return;

          try {
            // PRIORITY: Stop any ongoing speech immediately (newer message takes precedence)
            ttsStop();

            // Remove markdown code blocks (```...```) from the text before speaking
            let cleanText = text;

            // Remove all code blocks with language tags: ```language\ncode\n```
            cleanText = cleanText.replace(
              /```[a-zA-Z0-9+#]*\n[\s\S]*?```/g,
              "",
            );

            // Remove inline code: `code`
            cleanText = cleanText.replace(/`[^`]+`/g, "");

            // Remove standalone code patterns (language name followed by code)
            cleanText = cleanText.replace(
              /\n(html|javascript|js|typescript|ts|python|py|php|css|java|sql|json|xml|bash|sh|csharp|cs)\n[<\[][\s\S]{20,}?(?=\n\n|$)/gi,
              "",
            );

            // Clean up extra whitespace and HTML entities
            cleanText = cleanText
              .replace(/&[^;]+;/g, " ")
              .replace(/\n{3,}/g, "\n\n")
              .trim();

            if (!cleanText) return;

            const lang = detectLanguage(cleanText);
            const chunks = splitTextIntoChunks(cleanText, 200);

            console.log(
              "gTTS: Speaking " +
                chunks.length +
                " chunk(s) in lang=" +
                lang +
                " (newer message priority)",
            );

            // Build audio URLs for all chunks
            ttsAudioQueue = chunks.map(function (chunk) {
              return buildGTTSUrl(chunk, lang);
            });

            // Start playback of new message
            ttsPlayNext();
          } catch (error) {
            console.warn("gTTS Error:", error);
          }
        }

        // Toggle TTS on/off
        window.toggleTTS = function () {
          ttsEnabled = !ttsEnabled;
          const btn = document.getElementById("ttsToggle");
          const icon = document.getElementById("ttsIcon");

          if (ttsEnabled) {
            btn.classList.remove("muted");
            icon.className = "fas fa-volume-up";
            btn.title = "Mute Text-to-Speech";
          } else {
            btn.classList.add("muted");
            icon.className = "fas fa-volume-mute";
            btn.title = "Unmute Text-to-Speech";
            ttsStop();
          }
        };

        // Stop TTS when chatbot closes
        const origToggleChatbot = window.toggleChatbot;
        window.toggleChatbot = function () {
          origToggleChatbot();
          if (!chatWindow.classList.contains("open")) {
            ttsStop();
          }
        };

        // Auto-speak greeting on first open
        let greetingSpoken = false;
        const origToggleForGreeting = window.toggleChatbot;
        window.toggleChatbot = function () {
          if (typeof origToggleForGreeting === "function") {
            origToggleForGreeting();
          }
          if (chatWindow.classList.contains("open") && !greetingSpoken) {
            greetingSpoken = true;
            setTimeout(function () {
              const greetingEl = chatMessages.querySelector(".chat-msg.bot");
              if (greetingEl && ttsEnabled) {
                speakText(greetingEl.textContent);
              }
            }, 500);
          }
        };

        // Cleanup on page unload/hide
        window.addEventListener("beforeunload", function () {
          ttsStop();
        });

        document.addEventListener("visibilitychange", function () {
          if (document.hidden) ttsStop();
        });
      })();
    </script>

    <!-- Viewer counter badge + script -->
    <style>
      /* Small counter styling */
      #viewerCounter {
        position: fixed;
        left: 12px;
        bottom: 12px;
        background: #00fff7;
        color: #0a0a0f;
        padding: 2px 5px;
        border-radius: 15px;
        box-shadow: 0 0 4px #00fff720;
        font-weight: 600;
        font-size: 0.55rem;
        z-index: 9999;
        transition:
          transform 0.15s ease,
          box-shadow 0.15s ease,
          opacity 0.15s ease;
        display: inline-block;
        backface-visibility: hidden;
        -webkit-backface-visibility: hidden;
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
      }
      #viewerCounter:hover {
        transform: scale(0.98);
        box-shadow: 0 0 4px #00fff718;
        opacity: 0.95;
      }
      @media (max-width: 768px) {
        #viewerCounter {
          font-size: 0.5rem;
          padding: 2px 4px;
          left: 8px;
          bottom: 8px;
        }
      }
    </style>

    <div id="viewerCounter">Viewers: <span id="viewerUnique">—</span></div>

    <script>
      (function () {
        const uniqueEl = document.getElementById("viewerUnique");

        async function incrementOnceAndRefresh() {
          // POST once to increment (will set a cookie for unique visitors)
          try {
            await fetch("counter.php", {
              method: "POST",
              credentials: "same-origin",
            });
          } catch (e) {
            console.error("Counter POST failed", e);
          }
          // Then fetch latest counts
          await fetchCounts();
        }

        async function fetchCounts() {
          try {
            const res = await fetch("counter.php", {
              method: "GET",
              credentials: "same-origin",
            });
            const json = await res.json();
            if (uniqueEl) uniqueEl.textContent = json.unique ?? "0";
          } catch (e) {
            console.error("Counter GET failed", e);
          }
        }

        window.addEventListener("load", function () {
          // Increment once per page load (POST)
          incrementOnceAndRefresh();
          // Periodically refresh counts (GET only)
          setInterval(fetchCounts, 15000);
        });
      })();
    </script>
  </body>
</html>
